<!DOCTYPE html>
<html lang='en-us'>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>NY CCSC Map Viewer</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--  <link rel="icon" href="./img/favicon.ico"> -->
  <link rel="stylesheet" href="./vendor/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="./vendor/bootstrap/bootstrap.min.css" media="all">
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css'>
  <link rel="stylesheet" href="./vendor/bootstrap/bootstrap-table.min.css" media="all">
  <link rel='stylesheet prefetch' href='./vendor/leaflet-1.2.0/leaflet.css'>
  <link rel="stylesheet" href="./css/main.css" media='all'>
</head>

<body>
    <div class='main-header hide-printing'> </div>
    <div id="container">
      <div id='ractive_root'>
        <div id='control_panel_root'></div>
      </div>

      <div id="map" class="sidebar-map" style="background-color:white;"></div>
    </div>

    <div class='print-legend-page visible-print visible-print-block'>
      <!--PRINT PARAMETERS-->
    </div>

<!-- VIEW TEMPLATES -->
<script id='control_panel_template' type="text/ractive">
  {{>map_controls_template}}
  {{>layer_controls_template}}
  {{>layer_info_modal_template}}
  {{>sharing_modal_template}}
  {{>map_details_modal_template}}
  {{>printing_legends_template}}
  {{>wizard_template}}
  {{>wizard_standalone_template}}
  {{>map_out_of_view_layers_template}}
  {{>layer_import_modal_template}}
</script>
<script id='map_color_block_legend_template' type='text/ractive'/>
  <div class='detail-block legend {{quantiled ? 'quantiled' : ''}}'>
    <div class='color-legend '>{{{legend}}}</div>
    {{#u.color_range_labels(metrics, colors, precision, signed, inverted)}}
      <div class='color-block' style="width: {{100.0 / colors.length}}%;">
        <svg width="100" height="100">
          <rect height="100" width="100" style="fill: {{color}}; opacity:{{(0.7 * parameters.opacity / 100.0) + 0.3}}; "/>
        </svg>
        <label>{{{label}}}</label>
      </div>
    {{/u.color_range_labels(metrics, colors, precision, signed, inverted)}}
  </div>
</script>

<script id='map_out_of_view_layers_template' type='text/ractive'>
  {{#if (out_of_view_layers(layers.active, map_state.zoom)).length > 0}}
    <div class='out-of-zoom-alerts'>
      {{#(out_of_view_layers(layers.active, map_state.zoom))}}
        <div class='alert alert-warning'>
          <label>{{{name}}} </label>
          is not visible at this zoom level.
          <a class='btn btn-sm btn-primary' on-click='zoom-to-view-layer'> Zoom to Layer </a>
        </div>
      {{/(out_of_view_layers(layers.active, map_state.zoom))}}
    </div>
  {{/if (out_of_view_layers(layers.active, map_state.zoom)).length > 0}}
</script>

<script id='wizard_link_template' type='text/ractive'>
  Show a Link Here
</script>

<script id='layer_import_modal_template' type="text/ractive">
  <div class='modal-wrapper {{layer_import.show_modal ? "open" : "closed"}} '>
    <div class='modal-bg' on-click="close-layer-import-modal"></div>
    <div class='modal-content layer-import-modal'>
      <div class='container-fluid'>
        <span class='show-cursor fa fa-close' on-click="close-layer-import-modal"></span>
        <div class='row'>
          <div class='col-xs-12'>
            <h2> Layer Import </h2>
            <p> This mapper allows you to import and view your own map layer in the browser.  </p>
            <p><i> Supported formats are .zip (Zipped Shapefiles), .kml, .geojson, .json, .gpx </i></p>
            <div class='input-upload'>
              <input aria-label="Import file filename"
                     id='layer_import_file_input' type='file' value='{{layer_import.import_file}}'
                  accept=".zip, .kml, .geojson, .json, .gpx"/>
              {{#if layer_import.import_file}}
                {{#if layer_import.import_file_processing}}
                  Loading ... <span class='fa fa-spinner fa-spin-custom'></span>
                {{else}}
                  <span class='btn btn-primary' on-click='upload-layer-import-file'> Import </span>
                {{/if layer_import.import_file_processing}}
              {{/if layer_import.import_file}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</script>


<script id='wizard_standalone_template' type="text/ractive">
  <div class='modal-wrapper {{wizard.standalone ? "open" : "closed"}} '>
    <div class='modal-bg' on-click="close-standalone-wizard"></div>
    <div class='modal-content wizard-modal'>
      <div class='container-fluid'>
        <span class='show-cursor fa fa-close' on-click="close-standalone-wizard"></span>
        {{#wizard.standalone.templates.wizard }}
          {{> . }}
        {{/wizard.standalone.templates.wizard }}
      </div>
    </div>
  </div>
</script>

<script id='wizard_template' type="text/ractive">
  <div class='modal-wrapper {{wizard.open ? "open" : "closed"}}'>
    <div class='modal-bg' on-click="close-wizard"></div>
    <div class='modal-content wizard-modal'>
      <div class='container-fluid'>
        <span class='show-cursor fa fa-close' on-click="close-wizard"></span>
        <span class='fa fa-arrow-right noselect' on-click="next-wizard"></span>
        <span class='fa fa-arrow-left noselect' on-click="prev-wizard"></span>
        {{#if "welcome" != wizard.steps[wizard.current_step]}}
          <span class='btn btn-sm btn-primary back-to-start show-cursor' on-click="show-wizard">Back To Start</span>
        {{/if "welcome" != wizard.steps[wizard.current_step]}}

        {{#if "welcome" === wizard.steps[wizard.current_step]}}
          <h1>Welcome</h1>
          <p>Thanks for visiting the New York Climate Change Mapping Tool; a place to interactively explore data and create maps related to climate change impacts, vulnerability and adaptation across New York.</p>
          <h2>What's in the Map?</h2>
          <p>Our library of viewable map layers and interactive map functions has been developed by recommendations from state experts in climate change. </p>
          <h2>What's Not in the Map?</h2>
          <p>Our map viewer contains only a portion of the mappable data sources available in the Clearinghouse. </p>
          <h2>Using the viewer</h2>
          <p>Before getting started, scroll through this Map Guide to get familiar with the layout and functions of the interface. Most layers contain multiple data sources that can be explored with map controls. Many layers can be clicked upon in the map to provide more specific local information or data values. You can also share your map digitally or create pdf maps with legends.</p>
          <ul>
            <li> <a class='show-cursor' on-click='wizard-sidebar-intro'> Learn about the sidebar </a> </li>
            <li> <a class='show-cursor' on-click='wizard-base-layers'> Moving the map and base layers </a> </li>
            <li> <a class='show-cursor' on-click='wizard-adding-things'> Adding things to the map </a> </li>
            <li> <a class='show-cursor' on-click='wizard-find-more-info'> Finding out more about a layer </a> </li>
            <li> <a class='show-cursor' on-click='wizard-order-layers'> Ordering layers </a> </li>
            <li> <a class='show-cursor' on-click='wizard-using-legends-tab'> Using Legends Tab </a> </li>
            <li> <a class='show-cursor' on-click='wizard-printing'> Printing the Map </a> </li>
            <li> <a class='show-cursor' on-click='wizard-advanced-layer-controls'> Advanced Layer Controls </a> </li>
          </ul>
        {{/if "welcome" === wizard.steps[wizard.current_step]}}
        {{#if "sidebar_intro" === wizard.steps[wizard.current_step]}}
          <h1> Using the sidebar </h1>
          <img src="img/wizard/sidebar_intro.gif">
          <p><strong>Layers</strong>
            tab gives you access to a variety of map layers and data sources organized by sector. You can browse the layers in each sector or use the search box at the top.
          </p>

          <p>
            <strong>Controls & Legends</strong>
            tab provides map legend information, allows you to adjust the layer information and how it is shown in the map.
          </p>

          <p>
            <strong>Quick Zoom</strong>
            tab allows you to search for a location or address in and around New York. The map will zoom to the location you select from the search results.
          </p>
        {{/if "sidebar_intro" === wizard.steps[wizard.current_step]}}

        {{#if "base_layers" === wizard.steps[wizard.current_step]}}
          <h1> Adjusting your map view and base layer</h1>
          <img src="img/wizard/base_layers.gif">
          <p><strong>Click and drag</strong>
            on the map itself to adjust the map view.
          </p>
          <p>
            Use the controls in the upper right to <strong> zoom in and out </strong>.  You may also double-click on the map, use your mouse scroll wheel, or hold down shift and draw a box with your mouse to zoom.
          </p>

          <p>
            Click the <strong>House</strong> icon (<span class='fa fa-home'></span>) to return to the default view of New York.
          </p>

          <p>
            Click the <strong>Target</strong> icon (<span class='fa fa-crosshairs'></span>) to zoom to your current location
            <br>
            <em>(note: your browser may request permission to locate you)</em>
          </p>

          <p>
            Click the <strong>Base Map</strong> button to select one of the available base map layers.
          </p>
        {{/if "base_layers" === wizard.steps[wizard.current_step]}}

        {{#if "adding_things" === wizard.steps[wizard.current_step]}}
          <h1> Adding things to the map</h1>
          <img src="img/wizard/adding_things.gif">
          <p>
            You can add layers by clicking on the Layers tab, which will show you all the layers available to be added to the map.
            <br>
            You can also use the search box to find layers.
          </p>
          <p>
            Once you find a layer you are interested in, you can click its name or checkbox to enable it. Once it is loaded it will display on the map. Some layers may take a few moments to load.
          </p>
          <p>
            Use the 'Sectors' filter to find the layers relevant to various sectors.
          </p>
        {{/if "adding_things" === wizard.steps[wizard.current_step]}}

        {{#if "find_more_info" === wizard.steps[wizard.current_step]}}
          <h1> Finding out more about a layer</h1>
          <p>
            Click on the <span class='fa fa-info-circle'></span> to learn more about the layer
            and find a link to its source, where you can often find detailed data descriptions and relevant information.
          </p>
          <p>
            For some layers you can also click <strong>directly on the map</strong> to identify the value at that location.
          </p>
          <img class='full-width' src="img/wizard/find_more_info.gif">
        {{/if "find_more_info" === wizard.steps[wizard.current_step]}}

        {{#if "order_layers" === wizard.steps[wizard.current_step]}}
          <h1> Ordering Layers </h1>
          <p>
            If a layer is active but you cannot see any features, it may be hidden behind other layers.
            Layers are ordered in the sidebar as they are ‘stacked’ in the map view.
          </p>
          <p>
            You can use the <span class='fa fa-angle-double-up'></span> to move layers to the top, or click and drag on the <span class='fa fa-hand-stop-o'></span> to drag layers into the order you prefer.
            Note that some types of layers will always draw on top of other layers - and these will not have the <span class='fa fa-angle-double-up'></span> or <span class='fa fa-hand-stop-o'></span> available.
          </p>
          <p>
            You can always hide (<span class='fa fa-eye'></span>) or remove (<span class='fa fa-trash'></span>) these layers to take them out of the map view.
          </p>
          <img class='full-width' src="img/wizard/order_layers.gif">
        {{/if "order_layers" === wizard.steps[wizard.current_step]}}

        {{#if "using_legends_tab" === wizard.steps[wizard.current_step]}}
          <h1> Using Controls & Legends Tab </h1>
          <p>
            Each layer has a set of buttons that vary depending on the functions available for that layer.
          </p>
          <p>
            All layers have:
              <br>
              <span class='fa fa-angle-double-up'></span> which moves the layer to the top of the map
              <br>
              <span class='fa fa-eye'></span> which hides or shows the layer
              <br>
              <span class='fa fa-info-circle'></span> which provides layer information
              <br>
              <span class='fa fa-trash'></span> which removes the layer from the view
          </p>
          <p>
            Opacity can be adjusted using the slider
          </p>
          <p>
            <strong>Expand / Collapse all </strong> – these buttons change how the legend information is viewed in the sidebar. It does not affect how layers appear in the map view. Each legend can also be opened or closed by clicking on the layer name or the triangle to the left.
            <br>
            <strong>Hide all </strong> – this hides all layers but does not remove them from the map view or change how their legends appear in the sidebar.
            <br>
            <strong>Remove all</strong> – this removes all layers from the map and their legends from the sidebar.
          </p>
          <img class='full-width' src="img/wizard/order_layers.gif">
        {{/if "using_legends_tab" === wizard.steps[wizard.current_step]}}

        {{#if "printing" === wizard.steps[wizard.current_step]}}
          <h1> Printing the Map </h1>
          <p>
            The <span class='fa fa-print'></span> button will export your map and legends to a layout and open the print dialog window automatically from your browser.
          </p>
          <p>
            The print layout includes a full-page map view and one or more additional pages for legend information. Note that the map view that is exported includes the area beneath the sidebar.
          </p>
          <p>
            <em> Hint: you can hide the sidebar by double-clicking on any tab name, or clicking on the name of the open tab. When the sidebar is collapsed, the map view shows what will be sent to the print layout.  </em>
          </p>
          <img class='full-width' src="img/wizard/printing.gif">
        {{/if "printing" === wizard.steps[wizard.current_step]}}
        {{#if "advanced_layer_controls" === wizard.steps[wizard.current_step]}}
          <h1> Advanced Layer Controls </h1>
          <p>
            Some layers, especially those in the <strong>Climate Data</strong> and <strong>Ecosystems</strong> folders, contain multiple datasets as part of the layer. These datasets can be accessed using customized controls found in the <strong>Controls & Legends</strong> tab once the layer is active.
          </p>
          <p>
            Use drop down menus, buttons and sliders to navigate to the data you are interested in. <em>Note: for most interactive layers, the legend color bar will automatically adjust based on which data you select to show in the map.</em>
          </p>
          <p>
          You can also <strong>Clone</strong> (<span class='fa fa-clone'></span>) a specific dataset and add it to the map as a ‘stand-alone’ layer. This is helpful when comparing multiple datasets from one or more of these types of interactive layers. The new layer is added to the list in the <strong>Controls & Legends</strong> tab (but does <em>not</em> appear in the list on the <strong>Layers</strong> tab).
          </p>
          <p>
            Most interactive layers include the ability to click on the map <span class='fa fa-map-marker'></span> to return a value for that location.
          </p>
          <img class='full-width' src="img/wizard/advanced_layer_controls.gif">
        {{/if "advanced_layer_controls" === wizard.steps[wizard.current_step]}}

        <!--
          <div class='footer'>
            Hint {{wizard.current_step + 1}} / {{wizard.steps.length}}
          </div>
        -->
      </div>
    </div>
  </div>
</script>

<script id='printing_legends_template' type="text/ractive">
  <div class='printing-legends visible-print-block'>
    <div class='columns'>
      {{#layers.active}}
        <div class='active-layer'>
          <label class='layer-name'> {{{name}}} </label>
         {{> layer_controls_details_blocks_template}}
        </div>
      {{/layers.active}}
    </div>
  </div>
</script>

<script id='map_details_modal_template' type="text/ractive">
  <div class='modal-wrapper {{(map_details.location && map_details.feature_info_requests.length > 0) ? "open" : "closed"}}' >
    <div class='modal-bg' on-click="hide-feature-info-modal"></div>
    <div class='modal-content feature-info-modal'>
      <div class='container-fluid'>
        <span class='show-cursor fa fa-close' on-click="hide-feature-info-modal"></span>
        <div class='row'>
          <div class='col-xs-12'>
            <h2>
              Location Info
             <!--  <small>{{map_details.location.lat}},{{map_details.location.lng}}</small> -->
            </h2>
          </div>
        </div>
        {{#map_details.feature_info_requests}}
          <div class='row response'>
            {{#map_details.feature_info_responses[response_id]}}
              {{#error}}
                <div class='col-xs-2'>
                  <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>
                </div>
                <div class='col-xs-10'>
                  <span class='error'> Error Loading </span>
                  {{#if (show_error_details)}}
                    <a on-click='toggle-show-feature-info-response-details'> Hide Details. </a>
                    <pre>{{error}}</pre>
                  {{else}}
                    <a on-click='toggle-show-feature-info-response-details'> Show Details. </a>
                  {{/if (show_error_details)}}
                </div>
              {{else}}
                {{> active_layer.templates.info}}
              {{/error}}
            {{else}}
              <div class='col-xs-2'>
                  <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>
              </div>
              <div class='col-xs-10'>
                <span> loading ...
                  <span class='fa fa-spinner fa-spin-custom'></span>
                </span>
              </div>
            {{/if}}
          </div>
        {{/map_details.feature_info_requests}}
      </div>
    </div>
  </div>
</script>

<script id='sharing_modal_template' type="text/ractive">
  <div class='modal-wrapper {{sharing_modal_loading ? "open" : "closed"}}'>
    <div class='modal-bg' on-click="hide-sharing-modal"></div>
    <div class='modal-content sharing-loading-modal'>
      <div class='container-fluid'>
        <div class='row'>
          <div class='col-xs-12'>
            <h2>
              Loading your map...
              <span class='fa fa-spinner fa-spin-custom'></span>
            </h2>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class='modal-wrapper {{sharing_modal.open ? "open" : "closed"}}'>
    <div class='modal-bg' on-click="hide-sharing-modal"></div>
    <div class='modal-content'>
      <div class='container-fluid'>
        <span class='show-cursor fa fa-close' on-click="hide-sharing-modal"></span>
        <div class='row'>
          <div class='col-xs-12'>
            <h2>
              Saving and Sharing Maps
            </h2>
          </div>
        </div>
        <div class='row'>
          <hr/>
        </div>
        <div class='row'>
          <div class='col-xs-12'>
            <p> You can save the current map view, including all active layers and settings, by requesting a save link below. Bookmark the link to return to the map.</p>
            <p>Share this link with others and they will be able to load up the map directly in their web browser.</p>
          </div>
        </div>
        <hr/>
        <div class='row'>
          {{#if sharing_modal.token }}
            {{#if "loading" === sharing_modal.token}}
              <div class='col-xs-3'> &nbsp; </div>
              <a disabled class='btn btn-primary col-xs-6' on-click="request-share-link-token">
                <span class='fa fa-spinner fa-spin-custom'></span>
                Requesting Link...
              </a>
              <div class='col-xs-3'> &nbsp; </div>
            {{ else }}
              <div class='col-xs-1'></div>
              <div class='col-xs-10'>
                <input class='form-control' readonly onfocus="this.select()" onmouseup='return false;' value='{{sharing_url(sharing_modal.token)}}'>
              </div>
              <div class='col-xs-1'></div>
            {{/if}}
          {{ else }}
            <div class='col-xs-3'> &nbsp; </div>
            <a class='btn btn-primary col-xs-6' on-click="request-share-link-token"> Request Link </a>
            <div class='col-xs-3'> &nbsp; </div>
          {{/if sharing_modal.token}}
        </div>
      </div>
    </div>
  </div>
</script>

<script id='layer_info_modal_template' type="text/ractive">
  <div class='modal-wrapper {{layer_controls.current_layer_info ? "open" : "closed"}}'>
    <div class='modal-bg' on-click="hide-layer-info-modal"></div>
    <div class='modal-content layer-info-modal'>
      <div class='container-fluid'>
        <span class='show-cursor fa fa-close' on-click="hide-layer-info-modal"></span>
        <div class='row'>
          <div class='col-xs-12'>
            <h2>
              {{{get_layer_defaults(layers.defaults, layer_controls.current_layer_info).name}}}
              <small>{{layer_controls.current_layer_info}}</small>
            </h2>
          </div>
        </div>
        <div class='row'>
          <div class='col-xs-4'>
            <label> Service Status </label>
          </div>
          <span class='col-xs-8'>
            <span class='label label-{{layer_load_state(layers_loading_states, layer_controls.current_layer_info)}}'>
              {{layer_load_state_error_count(layers_loading_states, layer_controls.current_layer_info)}}
            </span>
          </span>
          <span class='col-xs-2'>
          </span>
        </div>
        <div class='row'>
          <div class='col-xs-4'>
            <label> Folder </label>
          </div>
          <span class='col-xs-8'>{{get_layer_defaults(layers.defaults, layer_controls.current_layer_info).folder}}</span>
        </div>
        <div class='row'>
          <div class='col-xs-4'>
            <label> Description </label>
          </div>
          <span class='col-xs-8'>{{{get_layer_defaults(layers.defaults, layer_controls.current_layer_info).description}}}</span>
        </div>
        <div class='row'>
          <div class='col-xs-4'>
            <label> Sectors </label>
          </div>
          <span class='col-xs-8'>{{get_layer_defaults(layers.defaults, layer_controls.current_layer_info).sectors}}</span>
        </div>
        <div class='row'>
          <div class='col-xs-4'>
            <label> Source </label>
          </div>
          <span class='col-xs-8'>{{get_layer_defaults(layers.defaults, layer_controls.current_layer_info).source}}</span>
        </div>
        <div class='row'>
          <div class='col-xs-4'>
            <label> Source URL </label>
          </div>
          <span class='col-xs-8'>
            <a aria-label="Source URL" href="{{get_layer_defaults(layers.defaults, layer_controls.current_layer_info).source_url}}" target="_blank">
              {{u.shorten_url(get_layer_defaults(layers.defaults, layer_controls.current_layer_info).source_url, 40)}}
            </a>
          </span>
        </div>

        {{#if get_layer_defaults(layers.defaults, layer_controls.current_layer_info).download_url}}
          <div class='row'>
            <div class='col-xs-4'>
              <label> Download URL </label>
            </div>
            <span class='col-xs-8'>
              <a href="{{get_layer_defaults(layers.defaults, layer_controls.current_layer_info).download_url}}" download target="_blank">
                {{u.shorten_url(get_layer_defaults(layers.defaults, layer_controls.current_layer_info).download_url, 40)}}
              </a>
            </span>
          </div>
        {{/if}}
        {{#if get_layer_defaults(layers.defaults, layer_controls.current_layer_info).metadata_url}}
          <div class='row'>
            <div class='col-xs-4'>
              <label> MetaData URL </label>
            </div>
            <span class='col-xs-8'>
              <a href="{{get_layer_defaults(layers.defaults, layer_controls.current_layer_info).metadata_url}}" target="_blank">
                {{u.shorten_url(get_layer_defaults(layers.defaults, layer_controls.current_layer_info).metadata_url, 40)}}
              </a>
            </span>
          </div>
        {{/if}}
      </div>
    </div>
  </div>
</script>

<script id="zoom_controls_template" type="text/ractive">
  <div class='zoom-controls noselect'>
    <a class='noselect {{map_state.zoom > map_state.zoom_max ? "disable" : ""}}  >'
       decorator="tooltip:Zoom in" on-click="map-zoom-in"> <span class='fa fa-plus'></span> </a>
    {{#if has_geolocation }}
      <a class='noselect' decorator="tooltip:Zoom to your location" on-click='map-zoom-me'> <span class='fa fa-crosshairs'></span></a>
    {{/if}}
    <a class='noselect' decorator="tooltip:Zoom to original view" on-click='map-zoom-home'> <span class='fa fa-home'></span></a>
    <a class='noselect {{map_state.zoom < 1 ? "disable" : ""}}' decorator="tooltip:Zoom out" on-click="map-zoom-out"> <span class='fa fa-minus'></span> </a>
  </div>
</script>

<script id="layer_controls_template" type="text/ractive">
  <div class='layer-controls noselect'>
    <div class='tabs container-fluid'>
      <div class='row'>
        <a on-click="show-layers-control" class="layers-tab col-xs-3 {{layer_controls.active_tab === 'layers' ? 'active': '' }}">
          <span class='fa fa-check-square-o'></span>
          Layers
        </a>
        <a on-click="show-details-control" class="legend-map-controls-tab col-xs-6 {{layer_controls.active_tab === 'details' ? 'active': ''}}">
          <span class='fa fa-sliders'></span>
          Controls &amp; Legends
          {{#if layers.active.length > 0 }}
            <span class='label label-default label-xs'>{{layers.active.length}}</span>
          {{/if}}

          {{#wizard.adding_layers_popup}}
            <span class='arrow_box notice-me-banner' on-click="remove-layer-add-notice">
              <span>After adding layers to the map, click on the Controls &amp; Legends tab to dig deeper!</span>
            </span>
          {{/wizard.adding_layers_popup}}
        </a>
        <a on-click='show-search-control' class="locations-tab col-xs-3 {{layer_controls.active_tab === 'search' ? 'active': ''}} " >
          <span class='fa fa-search'></span>
          Quick Zoom
        </a>
      </div>
    </div>
    <div class="tray {{layer_controls.tray.open ? 'show' : ''}}">
      <div class='tray-container'>
        {{#if layer_controls.active_tab === "layers"}}
          {{>layer_controls_layers_template }}
        {{else}}
          {{#if layer_controls.active_tab === "search"}}
            {{>layer_controls_search_template}}
          {{else}}
            {{>layer_controls_details_template }}
          {{/if}}
        {{/if}}
      </div>
    </div>
  </div>
</script>

<script id="layer_controls_search_template" type="text/ractive">
  <div class='search-header'>
    <input id="search_input" placeholder="Type a search" value="{{layer_controls.search_string}}">
    {{#if layer_controls.search_string.length > 0 }}
      <a>
        <span class='fa fa-times-circle-o show-cursor' on-click="clear-search-query"></span>
      </a>
    {{/if}}
  </div>

  <div class='search-results'>
    {{#layer_controls.search_results.results}}
      <div class='result show-cursor'
            on-click="zoom-to-search-result">
        <a class='' decorator="tooltip:Focus map on {{formatted_address}}">
          <span class='fa fa-circle-o'></span>
        </a>
        <span> {{formatted_address}} </span>
      </div>
    {{/layer_controls.search_results}}

    {{#if layer_controls.search_results.length === 0}}
      <div class='search-results-empty'>
        <span class='fa fa-search'></span>
        <div class='text'>
          Type a search above to find New York locations.
        </div>
      </div>
    {{/if layer_controls.search_results.length === 0}}

  </div>
</script>

<script id="layer_controls_layer_group_template" type="text/ractive">
      <div class='show-cursor' on-click="toggle-layer-active" >
        {{#if is_active}}
          <span class='fa fa-check-square-o'></span>
        {{else}}
          <span class='fa fa-square-o'></span>
        {{/if is_active}}
        <label class='show-cursor'>{{{name}}}</label>
      </div>
</script>
<script id="layer_controls_layer_group_tree_template" type="text/ractive">
  <li>
    {{#if folder_name}}
      <label on-click="toggle-layer-group-collapse">
        {{#if is_expanded}}
          <span class='fa fa-caret-down'></span>
        {{else}}
          <span class='fa fa-caret-right'></span>
        {{/if}}

        {{folder_name}}
      </label>
    {{/if}}

    {{#if is_expanded}}
      <ul class='layer-group'>
        {{#children:i}}
          {{#if this.folder_name}}
            {{> layer_controls_layer_group_tree_template}}
          {{else}}
            <li class='layer show-cursor' on-click="toggle-layer-active">
              {{#is_active_layer(layers.active, this)}}
                {{#if (layer_load_state(layers_loading_states, this) === "success")}}
                  <span class='fa fa-check-square-o'></span>
                {{else}}
                  <span class='fa fa-spinner fa-spin-custom'></span>
                {{/if}}
              {{else}}
                <span class='fa fa-square-o'></span>
              {{/if}}
              <a class='info {{layer_load_state(layers_loading_states, this)}}'
                 on-click='show-layer-info'>
                <span class='fa fa-info'> </span>
              </a>
              <span>{{{get_layer_defaults(layers.defaults, this).name}}}</span>
            </li>
          {{/if}}
        {{/children}}
      </ul>
    {{/if}}
  </li>
</script>

<script id="layer_controls_layers_template" type="text/ractive">
  <div class='contents'>
    <div class='search-header col-md-12'>
      <div class='row'>
        <input aria-label="Filter string for layers list" id="layers_search_input" placeholder="Search for layers..." value="{{layers.search_string}}">
        {{#if layers.search_string.length > 0 }}
          <a>
            <span class='fa fa-times-circle-o show-cursor' on-click="clear-layers-search-query"></span>
          </a>
        {{/if}}
      </div>
      <div class='row'>
        <div class='sector-select'>
          <label> Sectors: </label>
          <div class='selected-text-container' on-click='toggle-sector-dropdown'>
            <span class='selected'>{{selected_sectors_text(sectors.selected)}}</span>
          </div>
          <span on-click='toggle-sector-dropdown'
           class='fa fa-caret-down'></span>
          {{#if sectors.show_dropdown}}
            <div class='sector-selection-dropdown'>
              {{#sectors.all}}
                <div on-click='toggle-sector-selection'>
                  {{#if is_sector_selected(sectors.selected, .)}}
                    <span class='fa fa-check-square-o'></span>
                  {{else}}
                    <span class='fa fa-square-o'></span>
                  {{/if is_sector_selected(sectors.selected, .)}}
                  <span class='sector-name'>{{.}}</span>
                </div>
              {{/sectors.all}}
              <hr/>
              <span class='btn btn-block btn-primary' on-click='toggle-sector-dropdown'>
                Done
              </span>
              <span class='btn btn-sm btn-block btn-secondary' on-click='clear-sector-dropdown'>
                Clear All
              </span>
            </div>
          {{/if sectors.show_dropdown}}
        </div>
      </div>
    </div>
    <div class='search-results'>
      <ul class='layer-group'>
        {{#if layers.tree}}
          {{> layer_controls_layer_group_tree_template layers.tree}}
        {{/if}}
      </ul>
    </div>
  </div>
</script>

<script id="layer_controls_details_blocks_template" type="text/ractive">
  {{#if parameters.opacity !== false}}
    <div class='detail-block opacity'>
      <label decorator='tooltip:Use slider to adjust layer transparency'> Opacity: </label>
      <input type="range" value="{{parameters.opacity}}" min="0" max="100">
      {{parameters.opacity}}%
    </div>
  {{/if}}
  {{#if !copied_source}}
    {{#templates.legend }}
      {{> templates.legend}}
    {{/templates.legend }}
  {{/if !copied_source}}

</script>

<script id="layer_controls_details_template" type="text/ractive">
  {{#if layers.active.length > 0 }}
    <div class='bulk'>
      {{#if !all_active_collapsed(layers.active)}}
        <a on-click='collapse-all-layers' class='show-cursor'> Collapse All</a>
      {{else}}
        <a on-click='expand-all-layers' class='show-cursor'> Expand All</a>
      {{/if}}

      {{#if !all_active_hidden(layers.active)}}
        <a on-click='hide-all-layers' class='show-cursor'> Hide All</a>
      {{else}}
        <a on-click='visible-all-layers' class='show-cursor'> Show All</a>
      {{/if}}

      <a on-click='deactivate-all-layers' class='show-cursor'> Remove All</a>
    </div>
  {{else}}
    <div class='active-layers-empty'>
      <span class='fa fa-globe'></span>
      <div class='text'>
        You need to select some layers to display on the map.
        <br/>
        Look in the Layers tab to the left to choose.
      </div>
    </div>
  {{/if}}

  {{#each layers.active}}
    <div {{parameters.no_sorting ? "" : "as-sortable"}} class='active-layer'>
      {{#if "" === layer_load_state(layers_loading_states, layer_default_id)}}
        <div class='disable-active-layer-overlay'>
          <label> Loading {{{u.layer_defaults(layer_default_id).name}}}...
            <span class='fa fa-spinner fa-spin-custom'></span>
          </label>
        </div>
      {{/if "" !== layer_load_state(layers_loading_states, layer_default_id)}}

      <label class='name' on-click="toggle-active-collapsed">
        <span class='show-cursor'>
          {{#if is_collapsed}}
            <span decorator="tooltip:Expand Legend" class='fa fa-caret-right'></span>
            {{#if layer_load_state(layers_loading_states, layer_default_id) !== "success"}}
              <a decorator="tooltip:Show layer metadata" on-click="show-active-layer-info" class='info {{layer_load_state(layers_loading_states, layer_default_id)}}'>
                <span class='show-cursor fa fa-info'></span>
              </a>
            {{/if}}
          {{else}}
            <span decorator="tooltip:Minimize Legend" class='fa fa-caret-down'></span>
          {{/if}}
          {{#if !parameters.no_sorting}}
            <span decorator="tooltip:Drag to reorder layer" class='drag-handle fa fa-hand-stop-o'></span>
          {{/if !parameters.no_sorting}}
          {{{u.layer_defaults(layer_default_id).name}}}
        </span>
      </label>

      {{#if !is_collapsed}}
        <div class='active-details'>
          <div class='control-bar'>
            <a decorator="tooltip:Remove layer" on-click="remove-active">
              <span class='show-cursor fa fa-trash-o' > </span>
            </a>
            {{#if !parameters.no_sorting}}
              <a decorator="tooltip:Move to top" on-click='move-active-to-top'>
                <span class='show-cursor fa fa-angle-double-up'> </span>
              </a>
            {{/if}}
            {{#if is_hidden}}
              <a decorator="tooltip:Make layer visible"  on-click='make-active-visible'>
                <span class='show-cursor fa fa-eye-slash' ></span>
              </a>
            {{else}}
              <a decorator="tooltip:Make layer hidden"  on-click='make-active-hidden'>
                <span class='show-cursor fa fa-eye'></span>
              </a>
            {{/if}}

            {{#if able_to_copy(this) }}
              <a decorator="tooltip:Clone this layer" on-click="clone-active-layer">
                <span class='show-cursor fa fa-clone'></span>
              </a>
            {{/if}}

            <a decorator="tooltip:Show layer metadata" on-click="show-active-layer-info" class='info {{layer_load_state(layers_loading_states, layer_default_id)}}'>
              <span class='show-cursor fa fa-info'></span>
            </a>

            {{#if layer_has_click_info(this)}}
              <a decorator="tooltip:Click on the map to find out more details">
                <span class='fa fa-map-marker' > </span>
              </a>
            {{/if layer_has_click_info(this)}}

            {{#if layer_has_standalone_wizard(this)}}
              <a decorator="tooltip:This layer has detailed instructions. Click to view" on-click="show-standalone-wizard">
                <span class='fa fa-question'> </span>
              </a>
            {{/if layer_has_standalone_wizard(this)}}

          </div>
          {{> layer_controls_details_blocks_template}}
        </div>
      {{/if}}
    </div>
  {{/each}}
</script>

<script id="map_controls_template" type="text/ractive">
<div class='map-controls'>
  <div class='map-control print-control btn-group'>
    <span class='btn btn-md btn-default' on-click="show-wizard">
      <span class='fa fa-question'></span>
    </span>
    <span class='btn btn-md btn-default add-layer'
          on-click="open-layer-import-modal">
      <span class='fa fa-map-o'></span>
      <span class='fa fa-plus-circle'></span>
    </span>
    <span class='btn btn-md btn-default'
          on-click="print-map">
      <span class='fa fa-print'></span>
    </span>

    <span class='btn btn-md btn-default'
          on-click="open-sharing-modal">
      <span class='fa fa-share-alt'></span>
    </span>

  </div>

  <div class='map-control'>
    <span class='btn btn-md btn-default {{map_controls.base_layer_control_open ? "active" : ""}}'
          on-click="toggle-base-layer-control"
      > Base Map </span>
    {{#map_controls.base_layer_control_open }}
      <div class='control-details base-layers'>
        {{#each base_layers}}
          <a class="base-layer show-cursor {{map_controls.active_base_layer === name ? 'active' : ''}}" on-click="activate-base-layer">{{{name}}}</a>
        {{/each}}
      </div>
      <div class='map-control-bg' on-click='toggle-base-layer-control'></div>
    {{/map_controls.base_layer_control_open }}
  </div>
  {{>zoom_controls_template}}
</div>
</script>

<script id='gfi_table' type='text/ractive'>
  <div class='col-xs-2'>
    <label> {{{name}}}</label>
  </div>
</script>

<!-- VIEW TEMPLATES -->
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
    <script src="./vendor/jquery/jquery-3.2.1.min.js"></script>
    <script src="./vendor/bootstrap/bootstrap.min.js"></script>
    <script src="./vendor/d3/d3.v4.min.js"></script>
    <script src='./vendor/shp/shp.js'></script>

    <script type='text/javascript' src='./vendor/leaflet-1.2.0/leaflet-src.js'></script>
    <script type='text/javascript' src="./vendor/esri-leaflet-2.0.8/esri-leaflet.js"></script>
    <script type='text/javascript' src='./vendor/togeojson.js'></script>

    <script type='text/javascript' src="./vendor/TileLayer.EsriRest.js"></script>
    <script type='text/javascript' src="./vendor/Leaflet.markercluster-1.3.0/leaflet.markercluster.js"></script>

    <script>
      if (!console) {
        window.console = { log: function () { }, warn: function() {}, error: function () {}};
      }
    </script>

    <!-- OUR SYSTEM CODE -->

    <script src="./vendor/uri.js"></script>
    <script src="./vendor/colorbrewer.js"></script>

    <script src='./vendor/ractive/ractive-1.3.14/ractive.js'></script
    <script src="./vendor/ractive/Ractive-decorators-sortable.min.js"></script>
    <!--
    <script src="./vendor/ractive/ractive-events-tap.umd.min.js"></script>
    <script src='./vendor/ractive/ractive-tooltip.min.js'></script>
    -->
    <script src="./vendor/leaflet-pip.js"></script>
    <script src="./vendor/topojson.js"></script>
    <script src='./vendor/path-data-polyfill.js'></script>
    <script src='./vendor/togeojson.js'></script>
    <script src="./vendor/lodash.min.js"></script>

    <!-- THIS NEEDS TO BE FIRST -->
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/polyfills.js */
"function"!=typeof Object.assign&&(Object.assign=function(n,t){"use strict";if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(n),e=1;e<arguments.length;e++){var o=arguments[e];if(null!=o)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/config.js */
function stringify(e){function n(e){return _.isObject(e)?_.sortBy(_.map(_.pairs(e),function(e){return[e[0],n(e[1])]}),function(e){return e[0]}):e}return JSON.stringify(n(e))}var getParameterByName=function(e){if("undefined"!=typeof window){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}return null},Config={defaults:{"bounding-box":[-79.76259,45.015865,-71.777491,40.477399]},skip_cdn:"disable"===getParameterByName("cdn")};
</script>,
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/layer_info.js */
function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var _ref,GEOSERVER="https://geoserver.nescaum-ccsc-dataservices.com/geoserver",API_SERVER="https://api.nescaum-ccsc-dataservices.com/",CDN=function(e){var a;if(Config.skip_cdn)a=e;else{var t=new URI(e),r=t.hostname();r.match(/geoserver.nescaum-ccsc-dataservices.com/)?(t.hostname("d3dfsz5phlpu8l.cloudfront.net"),t.port(null),t.scheme("https")):r.match(/api.nescaum-ccsc-dataservices.com/)?(t.hostname("d2749s27r5h52i.cloudfront.net"),t.port(null),t.scheme("https")):r.match(/aps.coast.noaa.gov/)?(t.hostname("d34d8e4z51f5hr.cloudfront.net"),t.port(null),t.scheme("https")):r.match(/gis.fema.gov/)?(t.hostname("d2zzyfhnmavvhx.cloudfront.net"),t.port(null),t.scheme("https")):r.match(/gis1.usgs.gov/)?(t.hostname("d2j0p075yoyqht.cloudfront.net"),t.port(null),t.scheme("https")):r.match(/services.coastalresilience.org/)?(t.hostname("d1afxrl1v7xde2.cloudfront.net"),t.port(null),t.scheme("https")):r.match(/hazards.fema.gov/)?(t.hostname("d2ostsj8rmvqnh.cloudfront.net"),t.port(null),t.scheme("https")):r.match(/ciesin.columbia.edu/)?t.scheme("https"):r.match(/rmgsc.cr.usgs.gov/)?(t.hostname("d2m13662o5wefi.cloudfront.net"),t.port(null),t.scheme("https")):r.match(/coast.noaa.gov/)?(t.hostname("d20i2i7q9fpq87.cloudfront.net"),t.port(null),t.scheme("https")):r.match(/repository.nescaum-ccsc-dataservices.com/)||(r.match(/geoserver.nescaum-ccsc-dataservices.com/)?(t.hostname("3dfsz5phlpu8l.cloudfront.net"),t.port(null),t.scheme("https")):r.match(/.*\.cloudfront.net/)||console.warn("Hostname not in a CDN",r)),a=t.toString()}return a},available_layers=[{id:"aadt",folder:"Transportation",name:"Traffic: Avg Annualized Daily",description:"A line shapefile showing traffic volumes (daily average in 2012) on significant roads in New York State. Includes links to detailed, hourly reports for volume, speed, and vehicle classification data. UTM NAD 83 Zone 18N. ",source:"NYS DOT",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1282",sectors:["Transportation"],download_url:"http://gis.ny.gov/gisdata/fileserver/?DSID=1282&file=NYSDOT_TDV_AADT.zip",metadata_url:null},{id:"airmon",folder:"Air Emissions",name:"Air Monitoring Stations",description:"This dataset shows the location of each ambient air quality monitoring station currently being operated by the Bureau of Air Quality Surveillance (BAQS), Division of Air Resources, New York State Department of Environmental Conservation. Real-time air quality conditions may be accessed for most stations by clicking on the icon in the map view.",source:"New York State Department of Environmental Conservation",source_url:"https://www.dec.ny.gov",sectors:["Public Health"],download_url:"https://gis.ny.gov/gisdata/data/ds_1159/AirMonStations.zip",metadata_url:"https://gis.ny.gov/gisdata/metadata/nysdec.AirMon.xml"},{id:"anthromes",folder:"Land Cover",name:"Anthropogenic Biomes",description:"The Anthropogenic Biomes of the World Version 2 data set describes anthropogenic transformations within the terrestrial biosphere caused by sustained direct human interaction with ecosystems, including agriculture and urbanization circa the year 2000. Potential natural vegetation, biomes, such as tropical rainforests or grasslands, are based on global vegetation patterns related to climate and geology. Anthropogenic transformation within each biome is approximated using population density, agricultural intensity (cropland and pasture) and urbanization. The data, as part of a time series provide global patterns of historical transformation of the terrestrial biosphere during the Industrial Revolution. This data set is distributed by the Columbia University Center for International Earth Science Information Network (CIESIN).",source:"Center for International Earth Science Information Network (CIESIN)",source_url:"https://sedac.ciesin.columbia.edu/data/set/anthromes-anthropogenic-biomes-world-v2-2000",sectors:["Ecosystems","Agriculture","Buildings"],download_url:null,metadata_url:"https://sedac.ciesin.columbia.edu/data/set/anthromes-anthropogenic-biomes-world-v2-2000"},{id:"armories",folder:"Emergency Operations",name:"Armories",description:"This data file contains information on the 64 Armories for NYS.",source:"New York State Department of Environmental Conservation",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=79",sectors:["Public Health"],download_url:"https://gis.ny.gov/gisdata/data/ds_79/NYARNG_Armories.zip",metadata_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=79"},{id:"boundary_climate_divisions",folder:"Boundaries",name:"NOAA Climate Divisions",description:"NOAA has identified 344 climate divisions in the continental United States. Climate divisions are computed from daily observations, monthly station temperature and precipitation values. The divisional values are weighted by area to compute statewide values and the statewide values are weighted by area to compute regional values. (Karl and Koss, 1984).",source:"NOAA",source_url:"https://www.ncdc.noaa.gov/monitoring-references/maps/us-climate-divisions.php",metadata_url:"",download_url:""},{id:"boundary_counties",folder:"Boundaries",name:"Counties",description:"TIGER 2013 Simplified County Boundaries, designed for 1:500k or smaller.  The cartographic boundary files are simplified representations of selected geographic areas from the Census Bureau’s MAF/TIGER geographic database.   These boundary files are specifically designed for small scale thematic mapping. ",source:"US Census Bureau",source_url:"https://www.census.gov/en.html",metadata_url:"https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.2013.html",download_url:"https://www2.census.gov/geo/tiger/GENZ2013/cb_2013_us_county_500k.zip",parameters:{opacity:100}},{id:"boundary_huc8",folder:"Boundaries",name:"Major Watersheds",description:"Sub-basin (8-digit HUC) boundaries derived from the National Hydrography Dataset (NHD).",source:"USGS",source_url:"https://nhd.usgs.gov/",metadata_url:"https://www.usgs.gov/core-science-systems/ngp/national-hydrography/access-national-hydrography-products",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:huc8&maxFeatures=50&outputFormat=SHAPE-ZIP"},{id:"boundary_municipal",folder:"Boundaries",name:"Municipalities",description:"Towns, villages, hamlets, boroughs and other municipalities of New York State.",source:"New York State",source_url:"https://gis.ny.gov/civil-boundaries/",download_url:"https://gis.ny.gov/gisdata/data/ds_927/NYS_Civil_Boundaries.shp.zip",metadata_url:"https://gis.ny.gov/gisdata/metadata/nysgis.Cities_Towns.pdf"},{id:"bridges",folder:"Transportation",name:"Bridges",description:"Point layer of all New York State bridge that carry or cross a public road including general inventory attributes. Bridge ID Number (BIN) attribute used to identify each bridge. ",source:"NYS DOT",source_url:"https://www.dot.ny.gov/index",sectors:["Transportation"],download_url:"https://gis.ny.gov/gisdata/data/ds_397/NYSDOTBridges.zip",metadata_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=397"},{id:"bulkstorage",folder:"Critical Infrastructure",name:"Bulk Storage Sites",description:"Point locations for: 1) Chemical Bulk Storage (CBS) Facilities, pursuant to the Hazardous Substance Bulk Storage Law, Article 40 of ECL; And 6 NYCRR 595-599. 2) Major Oil Storage Facilities, pursuant to Article 12 of the Navigation Law. 3) Petroleum Bulk Storage (PBS) Facilities, registered pursuant to title 10 of Article 17.",source:"NYS DEC",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1253",sectors:["Public Health","Energy"],download_url:"",metadata_url:"https://gis.ny.gov/gisdata/metadata/nysdec.BS.xml",parameters:{opacity:70}},{id:"carbon",folder:"Ecosystems",name:"Biomass Carbon Stock",description:"Current (2010) and projected future (2050) biomass carbon stock (grams of carbon per square meter) for two different emissions scenarios: IPCC A2 (medium-high emissions) and IPCC B1 (lower emissions). Biomass carbon includes carbon stored in above- and below-ground live plant components (such as leaf, branch, stem and root) as well as in standing and down dead woody debris, and fine litter.",source:"landcarbon.org",source_url:"https://www.usgs.gov/mission-areas/land-resources/science/landcarbon",sectors:["Ecosystems"],download_url:null,metadata_url:"https://www.usgs.gov/mission-areas/land-resources/science/landcarbon"},{id:"cfem_critical",folder:"Coastal Zones",name:"HAZUS Critical Facilities",description:"Selected facilities and structures along the Atlantic and Gulf coasts that, if flooded, would present an immediate threat to life, public health, or safety.",source:"NOAA Office For Coastal Management",source_url:"https://maps.coast.noaa.gov/arcgis/rest/services/FloodExposureMapper/CFEM_CriticalFacilities/MapServer",sectors:["Public Health","Coastal Zones"],download_url:null,metadata_url:"https://maps.coast.noaa.gov/arcgis/rest/services/FloodExposureMapper/CFEM_CriticalFacilities/MapServer"},{id:"climaid_temp",folder:"Other Climate Data",name:"CLIMAID Temperature Change",description:"Future temperature projections developed for and utilized by the New York ClimAID Report. Projected temperature change for the years 2020, 2050, and 2080, compared with the baseline period of 1971-2000, at a 50x50km resolution. Projections are available for two different emissions scenarios, RCP 4.5 (substantial reductions in GHG emissions before 2100) and RCP 8.5 (increasing GHG emissions with time). Users can select results by percentiles. For example, the 75th percentile means that 75 percent of the model results are lower in value (and 25 percent are higher).",source:"CLIMAID",source_url:"https://www.nyserda.ny.gov/climaid",sectors:["All Sectors"],download_url:null,metadata_url:""},(_ref={id:"climaid_precip",folder:"Other Climate Data",name:"CLIMAID Precipitation Change",description:"Future precipitation projections developed for and utilized by the New York ClimAID Report. Projected precipitation change for the years 2020, 2050, and 2080, compared with the baseline period of 1971-2000. Projections are available for two different emissions scenarios, RCP 4.5 (substantial reductions in GHG emissions before 2100) and RCP 8.5 (increasing GHG emissions with time). Users can select results by percentiles. For example, the 75th percentile means that 75 percent of the model results are lower in value (and 25 percent are higher).",source:"CLIMAID",source_url:"https://www.nyserda.ny.gov/climaid",sectors:""},_defineProperty(_ref,"sectors",["All Sectors"]),_defineProperty(_ref,"download_url",null),_defineProperty(_ref,"metadata_url",""),_ref),{id:"croplands",folder:"Agriculture",name:"Global Croplands,2000",description:"The Global Croplands dataset represents the proportion of land areas used as cropland (land used for the cultivation of food) in the year 2000. Satellite data from Modetate Resolution Imaging Spectroradiometer (MODIS) and Satellite Pour l'Observation de la Terre (SPOT) Image Vegetation sensor were combined with agricultural inventory data to create a global data set. The visual presentation of this data demonstrates the extent to which human land use for agriculture has changed the Earth and in which areas this change is most intense. The data was compiled by Navin Ramankutty , et. al. (2008) and distributed by the Columbia University Center for International Earth Science Information Network (CIESIN).",source:"Center for International Earth Science Information Network (CIESIN)",source_url:"https://sedac.ciesin.columbia.edu/",sectors:["Agriculture","Ecosystems"],download_url:null,metadata_url:"https://sedac.ciesin.columbia.edu/maps/services#Global Agricultural Lands"},{id:"culverts",folder:"Transportation",name:"Large Culverts",description:"Esri File Geodatabase includes all culverts with a span of between 5 and 20 feet on the state highway system. Attributed with Culvert Identification Number (CIN), feature carried, feature crossed and select inspection information from NYSDOT's Bridge Data Information System (BDIS). Details on the attributes are provided in the NYSDOT's Bridge Inventory",source:"NYS DOT",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1255",sectors:["Transportation"],download_url:"https://gis.ny.gov/gisdata/data/ds_1255/NYSDOTLargeCulverts.zip",metadata_url:"https://gis.ny.gov/gisdata/metadata/dot.LargeCulverts.xml"},{id:"dams",folder:"Critical Infrastructure",name:"Dams",description:"Location of dams in New York State, with selected attributes of each dam, including relative risk level.(https://www.dec.ny.gov/docs/water_pdf/togs315.pdf)",source:"NYS DEC",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1130",sectors:["Water Resources"],download_url:"https://www.dec.ny.gov/maps/nysdamslink.kmz",metadata_url:"https://gis.ny.gov/gisdata/metadata/nysdec.dams_KML.xml"},{id:"dec_wetlands",folder:"Water Resources",name:"Wetland Habitat Types",description:"Wetland habitat types extracted from the NETWHC macrogroups. The full report on the classification is available here: https://www.naturalresourcenavigator.org/wp-content/uploads/2017/03/NRN-Data-Documentation.pdf",source:"'Natural Resource Navigator / NY Climate Adaptation",source_url:"https://maps.naturalresourcenavigator.org",sectors:["Ecosystems","Water Resources"],download_url:null,metadata_url:""},{id:"coastal_wetlands",folder:"Water Resources",name:"Coastal Wetlands",description:" This dataset represents the extent and approximate location of coastal wetlands in the northeastern United States. The data presented were exclusively derived from the National Wetlands Inventory (NWI). The classification system used by the NWI was assessed by wetland specialists and classes were selected to specifically represent coastal wetlands. Coastal wetlands were defined as vegetated wetlands in saline or brackish waters that were not permanently flooded, or not in open water. The NWI classes that applied to this definition included estuarine intertidal emergent, estuarine intertidal scrub-shrub, estuarine intertidal forested, and estuarine intertidal unconsolidated shore with organic soil types that were irregularly flooded.",source:"'National Wetlands Inventory",source_url:"http://50.19.218.171/arcgis1/rest/services/MarineLifeAndHabitat/MapServer/32",sectors:["Ecosystems","Water Resources"],download_url:null,metadata_url:"http://50.19.218.171/arcgis1/rest/services/MarineLifeAndHabitat/MapServer/32"},{id:"dewberry_sea_level_rise",folder:"Coastal Zones",name:"Sea Level Rise (Dewberry)",description:"NYSERDA has developed data resources for a range of future coastal flooding conditions in order to improve the ability of local and state officials, and others to assess vulnerability and inform resiliency planning. The table below provides estimated sea level rise projections by decade under low, median, and high scenarios and are representative of sea level rise projections found in the 2014 Supplement to the ClimAID Integrated Assessment for Effective Climate Change Adaptation. The Coastal New York Future Floodplain Mapper provides information for seven of these scenarios (12, 18, 24, 36, 48, 60, and 72 inches).",source:"NYSERDA",source_url:"https://services.nyserda.ny.gov/SLR_Viewer/About",sectors:["All Sectors"],legend_url:"./img/dewberry_slr.png",metadata_url:"https://services.nyserda.ny.gov/SLR_Viewer/About"},{id:"dow_unconsolidated_aquifers",folder:"Water Resources",name:"Aquifers- Unconsolidated",description:"These aquifers include those in upstate NY that consist of sand and gravel and yield large supplies of water to wells. Bedrock aquifers, although significant in some areas, are not included here. Source data is 1:250,000, same scale as the NYS Geological Survey surficial and bedrock geology maps on which they were based. Together these maps form a consistent set of geologic and groundwater maps for use in regional management of the groundwater resources of the State. Long Island is represented in the separate 'Hydrogeologic Framework at 1:250,000 - Long Island, NY', published by USGS/NYSDEC. ",source:"NYS DEC",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1141",sectors:["Ecosystems","Water Resources"],download_url:"https://gis.ny.gov/gisdata/data/ds_1141/dow_uncon_aqui.zip",metadata_url:"https://gis.ny.gov/gisdata/metadata/nysdec.uncon_aqui.html"},{id:"electric_powerlines",folder:"Energy/Communications",name:"Electric Transmission Lines",description:"This feature class/shapefile represents electric power transmission lines. Transmission Lines are the system of structures, wires, insulators and associated hardware that carry electric energy from one point to another in an electric power system. Lines are operated at relatively high voltages varying from 69 kV up to 765 kV, and are capable of transmitting large quantities of electricity over long distances. Underground transmission lines are included where sources were available. The following updates have been made since the previous release: 6,457 features added.",source_url:"https://hifld-geoplatform.opendata.arcgis.com/",sectors:["Energy"],download_url:"https://opendata.arcgis.com/datasets/70512b03fe994c6393107cc9946e5c22_0.zip?outSR=%7B%22wkid%22%3A102100%2C%22latestWkid%22%3A3857%7D",metadata_url:"https://www.arcgis.com/sharing/rest/content/items/70512b03fe994c6393107cc9946e5c22/info/metadata/metadata.xml?format=default&output=html"},{id:"epa_frs_facilities",folder:"Critical Infrastructure",name:"Federally Regulated Facilites",description:"To improve public health and the environment, the EPA collects information about facilities or sites subject to environmental regulation. The EPA Geospatial Data Access Project provides downloadable files of these facilities or sites in the following formats: Extensible Markup Language (XML), Keyhole Markup Language (KML), ESRI Geodatabase, and Comma Separated Value (CSV). Within the file is key facility information, along with associated environmental interests for use in mapping and reporting applications. ",source:"United States Environmental Protection Agency",source_url:"https://www.epa.gov/",sectors:["Public Health"],download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:epa_frs_facilities&maxFeatures=5000&outputFormat=SHAPE-ZIP",metadata_url:"https://www.epa.gov/frs"},{id:"fema_historic",folder:"Water Resources",name:"FEMA Historic Emergencies 1964-2014",description:"This layer summarizes FEMA historic disaster declarations from 1964 through 2014, categorized by type.",source:"FEMA",source_url:"https://catalog.data.gov/dataset/fema-historical-disaster-declarations-shp",sectors:["All Sectors"],legend_url:CDN("https://52.2.5.122:8080/geoserver/wms?request=GetLegendGraphic&LAYER=nyccsc:fema_historic&format=image/png"),download_url:"https://gis.fema.gov/kmz/HistoricDeclarations.zip",metadata_url:"https://www.fema.gov/openfema-dataset-disaster-declarations-summaries-v1",parameters:{opacity:70}},{id:"flood_exposure",folder:"Coastal Zones",name:"Flood Exposure",description:"This map service was created to support the National Oceanic and Atmospheric Administration (NOAA) Office for Coastal Management’s (OCM) Coastal Flood Exposure Mapper. The purpose of the online mapping tool is to provide coastal managers, planners, and stakeholders a preliminary look at exposures to coastal flooding hazards. The Mapper is a screening-level tool that uses nationally consistent data sets and analyses. Data and maps provided can be used at several scales to help communities initiate resilience planning efforts. Currently the extent of this map service and the Coastal Flood Exposure Mapper is limited to U.S. coastal counties along the Gulf of Mexico and Atlantic Ocean. The purpose of this dataset is to provide boundaries and information for the county selection function within the mapping application. The dataset should be used only as a screening-level tool for management decisions. As with all remotely sensed data, all features should be verified with a site visit. The dataset is provided as is, without warranty to its performance, merchantable state, or fitness for any particular purpose. The entire risk associated with the results and performance of this dataset is assumed by the user. This dataset should be used strictly as a planning reference and not for navigation, permitting, or other legal purposes. For more information, visit the Coastal Flood Exposure Mapper (https://coast.noaa.gov/floodexposure). Send questions or comments to the NOAA Office for Coastal Management (coastal.info@noaa.gov). ",source:"NOAA",source_url:"https://coast.noaa.gov/arcgis/rest/services/FloodExposureMapper/CFEM_CoastalFloodHazardComposite/MapServer",sectors:["All Sectors"],legend_url:CDN("https://coast.noaa.gov/arcgis/services/FloodExposureMapper/CFEM_CoastalFloodHazardComposite/MapServer/WmsServer?request=GetLegendGraphic%26version=1.3.0%26format=image/png%26layer=1"),metadata_url:"https://coast.noaa.gov/arcgis/rest/services/FloodExposureMapper/CFEM_CoastalFloodHazardComposite/MapServer"},{id:"freight_stations",folder:"Transportation",name:"Freight Stations",description:"Vector file of locations where freight traffic would be billed to. While shown as point data, it would encompass any nearby industries.",source:"NYS DOT",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1262",sectors:["Transportation"],download_url:"https://gis.ny.gov/gisdata/data/ds_1262/FreightStations.zip",metadata_url:"https://gis.ny.gov/gisdata/metadata/dot.FreightStations.shp.xml"},{id:"gap_lc",folder:"Land Cover",name:"GAP Land Cover Dataset",description:"GAP Land Cover 3 National Vegetation Classification-Formation Land Use for the contiguous United States. For more information about the National Vegetation Classification Standard please visit this link: https://usnvc.org/data-standard/",source:"USGS",source_url:"https://www.usgs.gov/core-science-systems/science-analytics-and-synthesis/gap/science/land-cover",sectors:["Agriculture","Ecosystems"],download_url:null,metadata_url:"https://www.usgs.gov/core-science-systems/science-analytics-and-synthesis/gap/science/land-cover-data-overview?qt-science_center_objects=0#qt-science_center_objects"},{id:"ghg_facilities",folder:"Air Emissions",name:"GHG Emissions from Large Facilities",description:"Data for reporting year 2016 extracted from EPA's Facility Level Information on Greenhouse Gases Tool (FLIGHT).  All emissions data is presented in units of metric tons of carbon dioxide equivalent (CO2e) using GWP's from IPCC's AR4. ",source:"EPA Facility Level Information on GeeenHouse gases Tool (FLIGHT)",source_url:"https://ghgdata.epa.gov/ghgp/main.do",sectors:["Energy"],download_url:null,metadata_url:"https://ghgdata.epa.gov/ghgp/main.do"},{id:"hospitals",folder:"Critical Infrastructure",name:"Hospitals",description:"Hospitals in New York State, based on NYS Department of Health data.",source:"New York State Department of Health",source_url:"https://www.health.ny.gov",sectors:["Public Health"],download_url:"https://maps.nysprofile.ipro.org/live/php/data.php?table=hospitals",metadata_url:"https://profiles.health.ny.gov/hospital"},{id:"invasive_animals",folder:"",name:"Invasive Animal Species",description:"Summary of observations of mapped occurrence of invasive animals, including mammals, fish and bivalves, by county for New York State, provided by iMapInvasives NY -- New York's Online Invasive Species Database and Mapping System (https://imapinvasives.org) © 2016 NatureServe",source:"iMapInvasives",source_url:"https://imapinvasives.org",metadata_url:"https://www.imapinvasives.org/new-yorklogin",download_url:"https://52.2.5.122:8080/geoserver/www/invasive_animals.json",sectors:["Ecosystems","Transportation","Coastal Zones"]},{id:"invasive_plants",folder:"",name:"Invasive Plant Species",description:"Summary of observations of mapped locations of invasive plants by county for New York State, provided by iMapInvasives NY -- New York's Online Invasive Species Database and Mapping System (https://imapinvasives.org) © 2016 NatureServe",source:"iMapInvasives",source_url:"https://imapinvasives.org",metadata_url:"https://www.imapinvasives.org/new-yorklogin",download_url:"https://52.2.5.122:8080/geoserver/www/invasive_plants.json",sectors:["Ecosystems","Transportation","Coastal Zones"]},{id:"invasive_insects",folder:"",name:"Invasive Insect Species",description:"Summary of observations of mapped occurrence of invasive or exotic insect pests by county for New York State, provided by iMapInvasives NY -- New York's Online Invasive Species Database and Mapping System (https://imapinvasives.org) © 2016 NatureServe",source:"iMapInvasives",source_url:"https://imapinvasives.org",metadata_url:"https://www.imapinvasives.org/new-yorklogin",download_url:"https://52.2.5.122:8080/geoserver/www/invasive_insects.json",sectors:["Ecosystems","Transportation","Coastal Zones"]},{id:"lulc_2011",folder:"Land Cover",name:"NY Land Use/Land Class (2011)",description:"Current (2011) land use / land cover map of NY State, from the ClimAID Natural Resource Navigator site.",source:"NYS",source_url:"https://maps.naturalresourcenavigator.org",sectors:["Ecosystems"],legend_url:null,download_url:null,metadata_url:""},{id:"lulc_2050",folder:"Land Cover",name:"NY Land Use/Land Class (2050)",description:"Predicted future (2050) land use / land cover map of NY State, from the ClimAID Natural Resource Navigator site.",source:"NYS",source_url:"https://maps.naturalresourcenavigator.org",sectors:["Ecosystems"],legend_url:null,download_url:null,metadata_url:""},{id:"national_flood_hazard",folder:"Water Resources",name:"Flood Hazard",description:"FEMA National Flood Hazard Layer",source:"FEMA",source_url:"https://www.fema.gov/",sectors:["Water Resources"],metadata_url:"https://www.fema.gov/flood-maps/national-flood-hazard-layer"},{id:"naturalgas_pipelines",folder:"Energy/Communications",name:"Natural Gas Pipelines",description:"Natural gas interstate and intrastate pipelines in the United States. Based on a variety of sources with varying scales and levels of accuracy and therefore accuracy is directly affected. This layer is not visible if zoomed in beyond 1:200,000 scale.  Collected by EIA from FERC and other external sources.",source:"US Energy Information Administration",source_url:"https://www.eia.gov/",sectors:["Energy"],download_url:"https://www.eia.gov/maps/map_data/NaturalGas_InterIntrastate_Pipelines_US_EIA.zip",metadata_url:"https://www.eia.gov/maps/layer_info-m.php"},{id:"nlcd",folder:"Land Cover",name:"National Land Cover Dataset",description:"National Land Cover Dataset (NLCD). NLCD 2011 are National Land Cover Database classification schemes based primarily on Landsat data along with ancillary data sources, such as topography, census and agricultural statistics, soil characteristics, wetlands, and other land cover maps. NLCD 1992 is a 21-class land cover classification scheme that has been applied consistently across the conterminous U.S. at a spatial resolution of 30 meters.",source:"USGS",source_url:"https://www.mrlc.gov",sectors:["Agriculture","Ecosystems","Buildings","Transportation"],download_url:"https://www.mrlc.gov/data?f%5B0%5D=region%3Aconus",metadata_url:"https://www.mrlc.gov/index.php"},{id:"ny_mask",sort_key:0,folder:"Boundaries",name:"NY State Mask",description:"This layer masks out map features outside of the NY state boundaries.  Derived from TIGER 2013 Simplified County Boundaries, designed for 1:500k or smaller.  The cartographic boundary files are simplified representations of selected geographic areas from the Census Bureau’s MAF/TIGER geographic database.  ",source:"US Census Bureau",source_url:"https://www.census.gov/en.html",sectors:[]},{id:"nyserda_slr",folder:"Coastal Zones",name:"Sea Level Rise (SIT/Columbia)",description:"Sea level and storm surge predictions for the lower Hudson River, based on model simulations developed for NYSERDA.",source:"Stevens Institute of Technology/Columbia University/NYSERDA",source_url:"https://www.ciesin.columbia.edu/hudson-river-flood-map/",sectors:["All Sectors"],legend_url:"./img/legends/nyserda_slr.png",download_url:"https://ciesin.columbia.edu/geoserver/ows?service=wms&version=1.3.0&request=GetCapabilities",metadata_url:"https://github.com/matthiasmengel/sealevel"},{id:"pastures",folder:"Agriculture",name:"Global Pastures,2000",description:"The Global Pastures dataset represents the proportion of land areas used as pasture land (land used to support grazing animals) in the year 2000. Satellite data from Modetate Resolution Imaging Spectroradiometer (MODIS) and Satellite Pour l'Observation de la Terre (SPOT) Image Vegetation sensor were combined with agricultural inventory data to create a global data set. The visual presentation of this data demonstrates the extent to which human land use for agriculture has changed the Earth and in which areas this change is most intense. The data was compiled by Navin Ramankutty, et. al. (2008) and distributed by the Columbia University Center for International Earth Science Information Network (CIESIN).",source:"Center for International Earth Science Information Network (CIESIN)",source_url:"https://sedac.ciesin.columbia.edu/",sectors:["Agriculture","Ecosystems"],download_url:null,metadata_url:"https://sedac.ciesin.columbia.edu/maps/services#Global Agricultural Lands"},{id:"power_plants",folder:"Energy/Communications",name:"Power Plants",description:"Operable electric generating plants in the New York by energy source. This includes all plants that are operating, on standby, or short- or long-term out of service with a combined nameplate capacity of 1 MW or more.",source:"US Energy Information Administration",source_url:"https://www.eia.gov/",sectors:["Energy"],download_url:"https://www.eia.gov/maps/map_data/PowerPlants_US_EIA.zip",metadata_url:"https://www.eia.gov/maps/layer_info-m.php"},{id:"observed_precip",folder:"Climate Observations.Precipitation",name:"Precipitation (Observed)",sectors:["All Sectors"],description:"Total precipitation summarized by area (county,basin) and decade over the period 1980-2009. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_precip",folder:"Climate Projections.Precipitation",name:"Precipitation (Projected)",sectors:["All Sectors"],description:"Projected changes in annual or seasonal total precipitation. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='pcpn'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_precip",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_precip_gt_1",folder:"Climate Observations.Precipitation",name:'Extreme Precipitation > 1" (Observed)',sectors:["All Sectors"],description:"Days with precipitation greater than one inch summarized by area (county,basin) and decade over the period 1980-2009. Observational data: Fractional days occur as a result of the averaging process.  Since extremes do not occur in every year or in all locations within a county, state or basin, when computing an average over time or over an area, the inclusion of these zeroes can result in fractional days or even counts of days that are less than one. A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_precip_gt_1",folder:"Climate Projections.Precipitation",name:'Extreme Precipitation > 1" (Projected)',sectors:["All Sectors"],description:"Projected changes in the number of days per season or annually with precipitation above or below threshold values. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). Fractional days occur as a result of the averaging process.  Since extremes do not occur in every year or in all locations within a county, state or basin, when computing an average over time or over an area, the inclusion of these zeroes can result in fractional days or even counts of days that are less than one. The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='pcpn_gt_1'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_precip_gt_1",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_precip_gt_2",folder:"Climate Observations.Precipitation",name:'Extreme Precipitation > 2" (Observed)',sectors:["All Sectors"],description:"Days with precipitation greater than two inches summmarized by area (state,county,basin) and decade over the period 1960-2005. Fractional days occur as a result of the averaging process.  Since extremes do not occur in every year or in all locations within a county, state or basin, when computing an average over time or over an area, the inclusion of these zeroes can result in fractional days or even counts of days that are less than one. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_precip_gt_2",folder:"Climate Projections.Precipitation",name:'Extreme Precipitation > 2" (Projected)',sectors:["All Sectors"],description:"Projected changes in the number of days per season or annually with precipitation above or below threshold values. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). Fractional days occur as a result of the averaging process.  Since extremes do not occur in every year or in all locations within a county, state or basin, when computing an average over time or over an area, the inclusion of these zeroes can result in fractional days or even counts of days that are less than one. The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='pcpn_gt_2'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_precip_gt_2",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_precip_gt_3",folder:"Climate Observations.Precipitation",name:'Extreme Precipitation > 3" (Observed)',sectors:["All Sectors"],description:"Days with precipitation greater than three inches summarized by area (county,basin) and decade over the period 1980-2009. Fractional days occur as a result of the averaging process.  Since extremes do not occur in every year or in all locations within a county, state or basin, when computing an average over time or over an area, the inclusion of these zeroes can result in fractional days or even counts of days that are less than one. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_precip_gt_3",folder:"Climate Projections.Precipitation",name:'Extreme Precipitation > 3" (Projected)',sectors:["All Sectors"],description:"Projected changes in the number of days per season or annually with precipitation above or below threshold values. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). Fractional days occur as a result of the averaging process.  Since extremes do not occur in every year or in all locations within a county, state or basin, when computing an average over time or over an area, the inclusion of these zeroes can result in fractional days or even counts of days that are less than one. The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='pcpn_gt_3'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_precip_gt_3",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_avg_temp",folder:"Climate Observations.Temperature",name:"Average Temperatures (Observed)",sectors:["All Sectors"],description:"Average temperature summarized by area (county,basin) and decade over the period 1980-2009. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_avg_temp",folder:"Climate Projections.Temperature",name:"Average Temperatures (Projected)",sectors:["All Sectors"],description:"Projected changes in annual or seasonal average temperature. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='avgt'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_avg_temp",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_max_temp",folder:"Climate Observations.Temperature",name:"Maximum Temperatures - Average (Observed)",sectors:["All Sectors"],description:"Average maximum temperature summarized by area (county,basin) and decade over the period 1980-2009. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_max_temp",folder:"Climate Projections.Temperature",name:"Maximum Temperatures - Average (Projected)",sectors:["All Sectors"],description:"Projected changes in annual or seasonal average maximum temperature. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='maxt'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_max_temp",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_min_temp",folder:"Climate Observations.Temperature",name:"Minimum Temperatures - Average (Observed)",sectors:["All Sectors"],description:"Average minimum temperature summarized by area (county,basin) and decade over the period 1980-2009. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_min_temp",folder:"Climate Projections.Temperature",name:"Minimum Temperatures - Average (Projected)",sectors:["All Sectors"],description:"Projected changes in annual or seasonal average minimum temperature. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='mint'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_min_temp",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_temp_lt_0",folder:"Climate Observations.Temperature",name:"Days < 0 &deg;F (Observed)",sectors:["All Sectors"],description:"Days with minimum temperatures below 0&deg;F summarized by area (county,basin) and decade over the period 1980-2009. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_temp_lt_0",folder:"Climate Projections.Temperature",name:"Days < 0 &deg;F (Projected)",sectors:["All Sectors"],description:"Projected changes in the number of days per season or annually with temperature below threshold values. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='mint_lt_0'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_temp_lt_0",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_temp_lt_32",folder:"Climate Observations.Temperature",name:"Days < 32 &deg;F (Observed)",sectors:["All Sectors"],description:"Days with minimum temperatures below 32&deg;F summarized by area (county,basin) and decade over the period 1980-2009. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_temp_lt_32",folder:"Climate Projections.Temperature",name:"Days < 32 &deg;F (Projected)",sectors:["All Sectors"],description:"Projected changes in the number of days per season or annually with temperature below threshold values. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='min_lt_32'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_temp_lt_32",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_temp_gt_90",sort_key:"Days > 090",folder:"Climate Observations.Temperature",name:"Days > 90 &deg;F (Observed)",sectors:["All Sectors"],description:"Days with maximum temperatures above 90&deg;F summarized by area (county,basin) and decade over the period 1980-2009. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_temp_gt_90",sort_key:"Days > 090",folder:"Climate Projections.Temperature",name:"Days > 90 &deg;F (Projected)",sectors:["All Sectors"],description:"Projected changes in the number of days per season or annually with temperature above threshold values. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='maxt_gt_90'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_temp_gt_90.zip",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_temp_gt_95",sort_key:"Days > 095",folder:"Climate Observations.Temperature",name:"Days > 95 &deg;F (Observed)",sectors:["All Sectors"],description:"Days with maximum temperatures above 95&deg;F summarized by area (county,basin) and decade over the period 1980-2009. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_temp_gt_95",folder:"Climate Projections.Temperature",sort_key:"Days > 095",name:"Days > 95 &deg;F (Projected)",sectors:["All Sectors"],description:"Projected changes in the number of days per season or annually with temperature above threshold values. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='maxt_gt_95'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_temp_gt_95",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_temp_gt_100",sort_key:"Days > 100",folder:"Climate Observations.Temperature",name:"Days > 100 &deg;F (Observed)",sectors:["All Sectors"],description:"Days with maximum temperatures above 100&deg;F summarized by area (county,basin) and decade over the period 1980-2009. Observational data: A spatially comprehensive, meteoroLogical data set for Mexico, the U.S., and Southern CAnada (Livneh et al., 2015)",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_temp_gt_100",sort_key:"Days > 100",folder:"Climate Projections.Temperature",name:"Days > 100 &deg;F (Projected)",sectors:["All Sectors"],description:"Projected changes in the number of days per season or annually with temperature above threshold values. Changes are relative to the 1980-2009 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='maxt_gt_100'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_temp_gt_100",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_heating_degree_days",folder:"Climate Observations.Degree Days",name:"Heating Degree Days (Observed)",sectors:["All Sectors"],description:" Average heating degree-days summarized by area (county,basin) and decade over the period 1980-2009. <br>Definition:  Heating degree-days are based on the assumption that when the outside temperature is above 65°F, we don't need heating to be comfortable. Heating degree days are the difference between the daily temperature mean and 65°F.  For example, if the mean temperature mean is 25°F, we subtract the mean from 65 and the result is 40 heating degree-days for that day. (Definition adapted from National Weather Service)<br>   Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_heating_degree_days",folder:"Climate Projections.Degree Days",name:"Heating Degree Days (Projected)",sectors:["All Sectors"],description:" Projected changes in annual or seasonal mean heating degree-days.  Heating degree-days are based on the assumption that when the outside temperature is above 65°F, we don't need heating to be comfortable. Heating degree days are the difference between the daily temperature mean and 65°F.  For example, if the mean temperature mean is 25°F, we subtract the mean from 65 and the result is 40 heating degree-days for that day. (Definition adapted from National Weather Service)<br>  Projected changes are relative to the 1981-2010 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='hdd'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_heating_degree_days",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_cooling_degree_days",folder:"Climate Observations.Degree Days",name:"Cooling Degree Days (Observed)",sectors:["All Sectors"],description:" Average cooling degree-days summarized by area (county,basin) and decade over the period 1980-2009. <br>Definition: Cooling degree days are based on the assumption that when the outside temperature is below 65°F, we don't need cooling (air-conditioning) to be comfortable. Cooling degree-days are the difference between the daily temperature mean and 65°F.  For example, if the temperature mean is 85°F, we subtract 65 from the mean and the result is 20 cooling degree-days for that day. (Definition adapted from National Weather Service) <br>  Observational data: A spatially comprehensive, meteorological data set for Mexico, the U.S., and southern Canada (Livneh et al., 2015).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_cooling_degree_days",folder:"Climate Projections.Degree Days",name:"Cooling Degree Days (Projected)",sectors:["All Sectors"],description:" Projected changes in annual or seasonal mean cooling degree-days.  Cooling degree days are based on the assumption that when the outside temperature is below 65°F, we don't need cooling (air-conditioning) to be comfortable. Cooling degree-days are the difference between the daily temperature mean and 65°F.  For example, if the temperature mean is 85°F, we subtract 65 from the mean and the result is 20 cooling degree-days for that day. (Definition adapted from National Weather Service) <br> Projected changes are relative to the 1981-2010 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='cdd'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_cooling_degree_days",metadata_url:"http://loca.ucsd.edu/"},{id:"observed_growing_degree_days",folder:"Climate Observations.Degree Days",name:"Growing Degree Days (Observed)",sectors:["All Sectors"],description:" Average growing degree-days summarized by area (county,basin) and decade over the period 1980-2009. <br>Definition: A growing degree day (GDD) is an index used to express crop maturity. The index is computed by subtracting a base temperature of 50°F from the average of the maximum and minimum temperatures for the day. Minimum temperatures less than 50°F are set to 50, and maximum temperatures greater than 86°F are set to 86. These substitutions indicate that no appreciable growth is detected with temperatures lower than 50° or greater than 86°. (Adapted from National Weather Service) <br>  Observational data: A spatially comprehensive, meteorological data set for Mexico, the U.S., and southern Canada (Livneh et al., 2015).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",metadata_url:"http://loca.ucsd.edu/"},{id:"projected_growing_degree_days",folder:"Climate Projections.Degree Days",name:"Growing Degree Days (Projected)",sectors:["All Sectors"],description:" Projected changes in annual or seasonal mean growing degree-days.  A growing degree day (GDD) is an index used to express crop maturity. The index is computed by subtracting a base temperature of 50°F from the average of the maximum and minimum temperatures for the day. Minimum temperatures less than 50°F are set to 50, and maximum temperatures greater than 86°F are set to 86. These substitutions indicate that no appreciable growth is detected with temperatures lower than 50° or greater than 86°. (Definition adapted from National Weather Service) <br>  Projected changes are relative to the 1981-2010 mean, calculated for four periods 2020-2039 (2030s), 2040-2059 (2050s), 2060-2079 (2070s), 2080-2099 (2090s). The projections are derived from statistically downscaled (LOCA method) CMIP5 daily data. Data Source: Statistically downscaled CMIP5 daily Climate Observations using Localized Constructed Analogs (LOCA; Pierce et al., 2014).",source:"University of California San Diego as provided by the Northeast Regional Climate Center Applied Climate Information System (ACIS) at Cornell University (rcc-acis.org)",source_url:"http://loca.ucsd.edu/",download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:climate_data_projected_download&CQL_FILTER=var_name='gdd'&maxFeatures=1000&outputFormat=SHAPE-ZIP&format_options=filename:projected_growing_degree_days",metadata_url:"http://loca.ucsd.edu/"},{id:"public_environmental_justice_areas",folder:"Public Health",name:"Potential Environmental Justice Areas",description:"As established in DEC Commissioner Policy 29 on Environmental Justice and Permitting (CP-29), Potential EJ Areas are 2000 U.S. Census block groups of 250 to 500 households each that, in the 2000 Census, had populations that met or exceeded at least one of the following statistical thresholds: 1) At least 51.1% of the population in an urban area reported themselves to be members of minority groups; or 2) At least 33.8% of the population in a rural area reported themselves to be members of minority groups; or 3) At least 23.59% of the population in an urban or rural area had household incomes below the federal poverty level.",source:"NYS DEC",source_url:"https://www.dec.ny.gov/public/911.html",sectors:["Public Health"],download_url:"https://www.dec.ny.gov/maps/pejalink.kmz",metadata_url:"https://www.dec.ny.gov/public/911.html"},{id:"primary_aquifers",folder:"Water Resources",name:"Aquifers - Primary",description:"This layer shows the location of primary aquifers in New York State. Primary aquifers are highly productive aquifers presently being utilized as sources of water supply by major municipal water supply systems.",source:"NYS DEC",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1232",sectors:["Ecosystems","Water Resources"],legend_url:CDN("https://52.2.5.122:8080/geoserver/wms?request=GetLegendGraphic&LAYER=nyccsc:primary_aquifers&format=image/png"),download_url:"http://gis.ny.gov/gisdata/fileserver/?DSID=1232&file=primaryaquifers.zip",metadata_url:"https://gis.ny.gov/gisdata/metadata/nysdec.primary.aquifers.shp.xml"},{id:"railroad_junctions",folder:"Transportation",name:"Railroad Junctions",description:"Point shapefile of railroad junctions and locations. ",source:"NYS DOT",source_url:"https://www.dot.ny.gov/index",sectors:["Transportation"],download_url:"https://gis.ny.gov/gisdata/data/ds_1102/Rail_Place_Locations.zip",metadata_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1102"},{id:"railroad_passenger_stations",folder:"Transportation",name:"Railroad Stations",description:"Point shapefile of railroad passenger stations.",source:"NYS DOT",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1263",sectors:["Transportation"],download_url:"https://gis.ny.gov/gisdata/data/ds_1263/PassengerStations.zip",metadata_url:"https://gis.ny.gov/gisdata/metadata/dot.PassengerStations.shp.xml"},{id:"railroads",folder:"Transportation",name:"Railroads",description:"Line shapefile of active railroad lines. UTM NAD 83 Zone 18. Copyright 2001 by NYS Dept of Transportation.",source:"NYS DOT",source_url:"https://www.dot.ny.gov/index",sectors:["Transportation"],download_url:"http://gis.ny.gov/gisdata/fileserver/?DSID=904&file=NYSDOTRailroad_May2013.zip",metadata_url:"http://gis.ny.gov/gisdata/inventories/details.cfm?DSID=904"},{id:"regulated_wells",folder:"Energy/Communications",name:"Regulated Wells",description:"This dataset contains locations of regulated wells. The Division of Mineral Resources maintains information and data on over 40,000 wells, categorized under New York State Article 23 Regulated wells. The dataset reflects the status of the wells as of the previous business day. The location data has not been field verified but is expected to be within 100 meters of the actual well location. The data should not be used for precise determination of distances to buildings, property boundaries or other features. This is a public dataset. Wells currently afforded confidential status are plotted but confidential data is redacted. ",source:"GIS NY State",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1272",metadata_url:"https://gis.ny.gov/gisdata/metadata/nysdec.dmn.oil.gas.well.forportal_prod.xml",sectors:["Energy"]},{id:"remediation_sites",folder:"Critical Infrastructure",name:"Remediation Sites",description:"The points in this file represent only the existence of a site which has cleanup currently, or has undergone cleanup under the oversight of NYS DEC. This dataset includes a single point location for a subset of sites which are currently included in one of the Remedial Programs being overseen by the Division of Environmental Remediation.",source:"NYS DEC",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1097",sectors:["Public Health"],legend_url:CDN("https://52.2.5.122:8080/geoserver/wms?request=GetLegendGraphic&LAYER=nyccsc:remediation_sites&format=image/png"),download_url:"https://www.dec.ny.gov/derdata/remedsiteborders.zip",metadata_url:"https://gis.ny.gov/gisdata/metadata/nysdec.remedsite_borders_export.html"},{id:"sandy_surge",folder:"Coastal Zones",name:"Hurricane Sandy Surge Extent",description:"Final High Resolution (1 meter) Hurricane Sandy Storm Surge Extent (field-verified).  Data covers NYC only.",source:"NYC OpenData",source_url:"https://data.cityofnewyork.us/Environment/Sandy-Inundation-Zone/uyj8-7rv5",sectors:["All Sectors"],download_url:"https://data.cityofnewyork.us/api/geospatial/uyj8-7rv5?method=export&format=Shapefile",metadata_url:"https://data.cityofnewyork.us/Environment/Sandy-Inundation-Zone/uyj8-7rv5"},{id:"sewer_overflows",folder:"Water Resources",name:"Sewer Overflows",description:"The dataset represents the locations of combined sewer overflow (CSOs) outfall locations in NYS. It also includes overflow detection capabilities of CSO communities and overflow frequency data within a specified timeframe.",source:"NYS Office of Information Technology Services",source_url:"https://data.ny.gov/Energy-Environment/Combined-Sewer-Overflows-CSOs-Map/i8hd-rmbi",sectors:["Water Resources","Public Health"],legend_url:"./img/sewer-overflows.png",download_url:"https://data.ny.gov/resource/5d4q-pk7d.geojson",metadata_url:"https://data.ny.gov/Energy-Environment/Combined-Sewer-Overflows-CSOs-Map/i8hd-rmbi"},{id:"sovi",folder:"Public Health",name:"CDC Social Vulnerability Index-2018",description:"Social vulnerability refers to the potential negative effects on communities caused by external stresses on human health. Such stresses include natural or human-caused disasters, or disease outbreaks. Reducing social vulnerability can decrease both human suffering and economic loss.<br>CDC Social Vulnerability Index (CDC SVI) uses 15 U.S. census variables to help local officials identify communities that may need support before, during, or after disasters.",source:"U.S. Center for Disease Control",source_url:"https://www.atsdr.cdc.gov/placeandhealth/svi/index.html",sectors:["Water Resources","Coastal Zones"],download_url:"https://svi.cdc.gov/Documents/Data/2018_SVI_Data/States/NewYork.zip",metadata_url:"https://www.atsdr.cdc.gov/placeandhealth/svi/index.html"},{id:"ecological_land_units",folder:"Ecosystems",name:"Ecosystem Structural Components",description:"This layer contains five major ecosystem structural component layers (bioclimates, land surface forms, surficial lithology and topographic moisture position) developed during the United States Geological Survey’s (USGS) global ecosystems mapping effort. Terrestrial ecosystem distribution mapping used a geospatial mapping methodology based on a deductive, biophysical stratification approach to delineate ecosystems by their major structural elements (Sayre and others, 2009). First major ecosystem structural components were modeled (bioclimates, land surface forms, surficial lithology and topographic moisture position) and spatially combined to produce a new set of biophysical settings, termed ecosystem structural footprints, to characterize the abiotic (physical) potential of the environment. Aggregation of the unique structural footprints into the terrestrial ecosystems classification developed by NatureServe was the final step (Comer and others, 2003). Additional information and access to this data is available at https://rmgsc.cr.usgs.gov/ecosystems/.",source:"USGS Geosciences and Environmental Change Science Center",source_url:"https://www.usgs.gov/centers/gecsc/science/global-ecosystems?qt-science_center_objects=0#qt-science_center_objects",sectors:["Agriculture","Ecosystems"],download_url:null,metadata_url:"https://rmgsc.cr.usgs.gov/arcgis/rest/services/contUS/MapServer/"},{id:"spdes",folder:"Water Resources",name:"Waste Treatment Plants",description:"The State Pollutant Discharge Elimination System (SPDES) permit program in the Department's Division of Water regulates municipal and industrial wastewater treatment facilities that discharge directly into navigable waters. ",source:"NYS DEC",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1010",sectors:["Water Resources","Public Health"],download_url:"http://gis.ny.gov/gisdata/fileserver/?DSID=1010&file=spdes.zip",metadata_url:"http://gis.ny.gov/gisdata/metadata/nysdec.spdes.xml"},{id:"subway_lines",folder:"Transportation",name:"NYC Subways",description:"NY Metropolitan Subway Lines",source:"Spatiality Blog",source_url:"https://spatialityblog.com/2010/07/08/mta-gis-data-update/#datalinks",sectors:["Transportation"],download_url:"https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:subway_lines&maxFeatures=50&outputFormat=SHAPE-ZIP"},{id:"superfund",folder:"Critical Infrastructure",name:"Superfund Sites",description:"The Agency for Toxic Substances and Disease Registry (ATSDR) Hazardous Waste Site Polygon Data with CIESIN Modifications, Version 2 is a database providing georeferenced data for 1,572 National Priorities List (NPL) Superfund sites",source:"Center for International Earth Science Information Network (CIESIN)",source_url:"https://sedac.ciesin.columbia.edu/data/set/superfund-atsdr-hazardous-waste-site-ciesin-mod-v2",sectors:"",legend_url:"https://sedac.ciesin.columbia.edu/geoserver/wms?request=GetLegendGraphic&LAYER=superfund:superfund-atsdr-hazardous-waste-site-ciesin-mod-v2&format=image/png",download_url:null,metadata_url:"https://sedac.ciesin.columbia.edu/data/set/superfund-atsdr-hazardous-waste-site-ciesin-mod-v2"},{id:"thruway_bridges",folder:"Transportation",name:"Thruway Bridges",description:"Statewide file showing the locations of all Thruway bridges. Includes bridges that the Thruway maintains, but may be owned by other entities.",source:"New York State Trhuway Authority",source_url:"https://www.thruway.ny.gov/index.shtml",sectors:["Agriculture","Ecosystems"],download_url:"https://gis.ny.gov/gisdata/data/ds_438/NYSTA_Bridges.gdb.zip",metadata_url:"https://gis.ny.gov/gisdata/metadata/NYSTA-Bridges.xml"},{id:"trout_streams",folder:"Ecosystems",name:"Designated Trout Streams",description:"New York State Department of Environmental Conservation Water Quality Classifications dataset. The symbol (T or TS) after any class designation means that designated waters are trout waters (T) or suitable for trout spawning (TS).",source:"NYS DEC",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1118",sectors:["Ecosystems"],legend_url:CDN("https://52.2.5.122:8080/geoserver/wms?request=GetLegendGraphic&LAYER=nyccsc:trout_streams&format=image/png"),download_url:null,metadata_url:null},{id:"usgs_streamflow",folder:"Water Resources",name:"USGS Stream Gages",description:"This layer depicts the location and current status of US Geological Survey stream gauges across NYS. An active link with the USGS database provides real-time data, updated hourly.  For more information on a specific guage, click on the map icon, which will provide detailed information and a link to the USGS page for that gauge.",source:"USGS",source_url:"https://waterwatch.usgs.gov/index.php?r=ny&id=ww_current",sectors:"Water Resources",download_url:"https://waterwatch.usgs.gov/download/?gt=map&mt=real&st=ny&dt=site&ht=&fmt=csv",metadata_url:"https://waterwatch.usgs.gov/index.php?r=ny&id=ww_current"},{id:"wtrcls_line",folder:"Water Resources",name:"DEC Water Quality Classifications-Lines",description:"This NYS DEC data set provides the water quality classifications of New York State's lakes, rivers, streams and ponds, collectively referred to as water bodies. All water bodies in the state are provided a water quality classification based on existing, or expected best usage, of each water body or water body segment. Under New York State's Environmental Conservation Law (ECL), Title 5 of Article 15, certain waters of the state are protected on the basis of their classification. Streams and small water bodies located in the course of a stream that are designated as C (T) or higher (i.e., C (TS), B, or A) are collectively referred to as 'protected streams.'",source:"NYS DEC",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1118",sectors:"Ecosystems,Water Resources",legend_url:CDN("https://52.2.5.122:8080/geoserver/wms?request=GetLegendGraphic&LAYER=nyccsc:wtrcls_line&format=image/png"),download_url:"http://gis.ny.gov/gisdata/fileserver/?DSID=1118&file=nysdec_wtrcls.zip",metadata_url:"http://gis.ny.gov/gisdata/metadata/nysdec.wtrcls.xml"},{id:"wtrcls_poly",folder:"Water Resources",name:"DEC Water Quality Classifications-Polygons",description:"This NYS DEC data set provides the water quality classifications of New York State's lakes, rivers, streams and ponds, collectively referred to as water bodies. All water bodies in the state are provided a water quality classification based on existing, or expected best usage, of each water body or water body segment. Under New York State's Environmental Conservation Law (ECL), Title 5 of Article 15, certain waters of the state are protected on the basis of their classification. Streams and small water bodies located in the course of a stream that are designated as C (T) or higher (i.e., C (TS), B, or A) are collectively referred to as 'protected streams.'",source:"NYS DEC",source_url:"https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=1118",sectors:"Ecosystems,Water Resources",legend_url:CDN("https://52.2.5.122:8080/geoserver/wms?request=GetLegendGraphic&LAYER=nyccsc:wtrcls_poly&format=image/png"),download_url:"http://gis.ny.gov/gisdata/fileserver/?DSID=1118&file=nysdec_wtrcls.zip",metadata_url:"http://gis.ny.gov/gisdata/metadata/nysdec.wtrcls.xml"}],desired_active_on_load=[];
</script>

    <!-- Add all the javascript libs here -->
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/api_handler.js */
var API_Handler={parse_query_string:function(r){var a={};return r.split("&").forEach(function(r){if(r){var e=r.split("="),n=e[0],i=decodeURIComponent(e[1]),l=n.indexOf("[");if(-1===l)a[n]=i;else{var t=n.indexOf("]"),s=n.substring(l+1,t);n=n.substring(0,l),a[n]||(a[n]=[]),s?a[n][s]=i:a[n].push(i)}}}),a},parameter_error:function(r){console.error(r)},validate_parameters:function(r,a){var e=_.merge(Config.defaults,{"active-layers":[],"available-layers":a});if(r["bounding-box"])try{var n=r["bounding-box"].split(",",4),i=[parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])];i[0]<-90||i[0]>90||i[2]<-90||i[2]>90||i[1]<-180||i[1]>180||i[3]<-180||i[3]>180?API_Handler.parameter_error("Error parsing bounding-box: is out of bounds (+-90, +- 180, +-90, +-180) ["+i+"]"):e["bounding-box"]=i}catch(r){API_Handler.parameter_error("Error parsing bounding-box: "+r+" \nDefaulting to : "+JSON.stringify(e["bounding-box"]))}if(r["available-layers"])try{var l=_.remove(r["available-layers"].split(","),function(r){return r}),t=_.intersection(a,l);(s=_.difference(l,t)).length>0&&API_Handler.parameter_error("Error parsing available-layers: DROPPING layers ["+s.join(",")+"]"),e["available-layers"]=t}catch(r){API_Handler.parameter_error("Error parsing available-layser: "+r+" \nDefaulting to : "+JSON.stringify(e["available-layers"]))}if(r["active-layers"]||""===r["active-layers"])try{var l=_.remove(r["active-layers"].split(","),function(r){return r}),t=_.intersection(l,a),s=_.difference(l,t);s.length>0&&API_Handler.parameter_error("Error parsing active-layers: DROPPING layers ["+s.join(",")+"]"),e["active-layers"]=t}catch(r){API_Handler.parameter_error("Error parsing available-layser: "+r+" \nDefaulting to : "+JSON.stringify(e["available-layers"]))}var o=_.difference(e["active-layers"],e["available-layers"]);return o.length>0&&(e["available-layers"]=_.union(e["available-layers"],o)),e},get_parameters:function(r,a){var e=API_Handler.parse_query_string(r);return API_Handler.validate_parameters(e,a)}};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/base_layers.js */
var BASELAYER_PANE="baselayers",BaseLayers=[{name:"Terrain",data:L.tileLayer("https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}.png",{maxZoom:19,attribution:'Basemap Courtesy of <a href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer" target="_blank">ESRI</a>',pane:BASELAYER_PANE})},{name:"Street Map",data:L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'})},{name:"Imagery",data:L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{maxZoom:18,attribution:"Esri, DigitalGlobe, Earthstar Geographics, CNES/Airbus DS, GeoEye, USDA FSA, USGS, Getmapping, Aerogrid, IGN, IGP, and the GIS User Community"})},{name:"Watercolor",data:L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png",{attribution:'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:1,maxZoom:16,ext:"png"})},{name:"Toner",data:L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",minZoom:1,maxZoom:16,ext:"png"})},{name:"None",data:{Empty:L.tileLayer(""),OpenStreetMap:L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Map data &copy; OpenStreetMap contributors"})}}];
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/utils.js */
var _slicedToArray=function(){function e(e,t){var r=[],a=!0,n=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,l=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw l}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RendererTemplates={},Renderers={opacity:function(e){return e.is_hidden?0:!1===e.parameters.opacity?100:e.parameters.opacity/100},find_geojson_polygon_by_point:function(e,t){var r={type:"Point",coordinates:[e.latlng.lng,e.latlng.lat]};return _.find(t._layers,function(e){return gju.pointInPolygon(r,e.feature.geometry)})},update_legend:function(e){return function(t){"string"==typeof e.update_legend?t.legend_url=e.update_legend:e.update_legend?"object"===_typeof(e.update_legend)?(t.legend_url=e.update_legend.url,t.legend_url_text=e.update_legend.text):e.update_legend?e.update_legend(t):t.legend_url=null:t.legend_url=null}},geojson_add_to_map:function(e,t,r){r.addTo(e),t.leaflet_layer_ids=[r._leaflet_id],Views.ControlPanel.fire("tile-layer-loaded",t)},add_layer_error:function(e){Views.ControlPanel.fire("tile-layer-loading-error",e)},random:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},update_templates:function(e,t){if(!e.templates){e.templates={};var r=Renderers.random();t.legend_template&&!Ractive.partials[r]&&(Ractive.partials[r]=t.legend_template,e.templates.legend=r);var a=Renderers.random();t.info_template&&!Ractive.partials[a]&&(Ractive.partials[a]=t.info_template,e.templates.info=a);var n=Renderers.random();t.wizard_template&&!Ractive.partials[n]&&(Ractive.partials[n]=t.wizard_template,e.templates.wizard=n)}},is_loading_leaflet_layer:function(e,t){return e.loading_layers=e.loading_layers||{},e.loading_layers[stringify(t)]},loading_leaflet_layer:function(e,t){e.loading_layers=e.loading_layers||{},e.loading_layers[stringify(t)]=!0},loaded_leaflet_layer:function(e,t){e.loading_layers=e.loading_layers||{},e.loading_layers[stringify(t)]=!1},create_leaflet_layer_async:function(e,t,r,a,n){Renderers.get_leaflet_layer(e,t,r)||Renderers.is_loading_leaflet_layer(t,r)?n():(Renderers.loading_leaflet_layer(t,r),a().then(function(a){var l=null;(l=Array.isArray(a)?a[0]:a).addTo(e),Renderers.save_leaflet_layer(t,l._leaflet_id,r),n()}))},create_leaflet_layer:function(e,t,r,a){if(!Renderers.get_leaflet_layer(e,t,r)&&!Renderers.is_loading_leaflet_layer(t,r)){Renderers.loading_leaflet_layer(t,r);var n=a();n.addTo(e),Renderers.save_leaflet_layer(t,n._leaflet_id,r)}},save_leaflet_layer:function(e,t,r){e.leaflet_layer_ids.push(Object.assign({},{id:stringify(r)},{leaflet_id:t})),Renderers.loaded_leaflet_layer(e,r)},get_all_leaflet_layers:function(e,t){var r=_.pluck(t.leaflet_layer_ids,"leaflet_id");return Renderers.lookup_layers(e,r)},get_leaflet_layer:function(e,t,r){var a,n=_.find(t.leaflet_layer_ids,{id:stringify(r)});return n&&(a=Renderers.lookup_layers(e,[n.leaflet_id])[0]),a},get_layer:function(e,t,r){var a=[];return e.eachLayer(function(e){e._leaflet_id===r.id&&_.contains(leaflet_layer_ids,e._leaflet_id)&&a.push(e)}),a},lookup_layers:function(e,t,r){var a=[];return e.eachLayer(function(e){_.contains(t,e._leaflet_id)&&a.push(e)}),a},layer_to_pane_name:function(e){return e.id.replace(/\W/,".")},remove:function(e,t){var r=Renderers.get_all_leaflet_layers(e,t);_.each(r,function(t){e.hasLayer(t)&&e.removeLayer(t)})},render:function(e,t,r){var a=Renderers[t.renderer_id],n=Renderers.layer_to_pane_name(t),l=e.getPane(n);l||((l=e.createPane(n)).style.pointerEvents="none"),l.style.zIndex=r,l.style.opacity=Renderers.opacity(t),a.render(e,t,n)},zoom_to:function(e,t){Views.ControlPanel.fire("map-set-view",e,t)},zoom_to_bounding_box:function(e){var t=e.split(",").map(parseFloat),r=_slicedToArray(t,4);west=r[0],south=r[1],east=r[2],north=r[3],Views.ControlPanel.fire("map-set-bbox",west,south,east,north)},utils:{zoom_to_location_link:function(e){return"Point"===e.type?"<a href='#' onclick='Renderers.zoom_to(["+e.coordinates[1]+","+e.coordinates[0]+"], 15);'>Zoom to feature</a>":"MultiPoint"===e.type?"<a href='#' onclick='Renderers.zoom_to(["+e.coordinates[0][1]+","+e.coordinates[0][0]+"], 15);'>Zoom to feature</a>":e._northEast?"<a href='#' onclick='Renderers.zoom_to_bounding_box(\""+e.toBBoxString()+"\");'>Zoom to feature</a>":void 0},addPlusSign:function(e){return e>0?"+"+e:e.toString()}}};
</script>

    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/base.js */
RendererTemplates.base=function(e,r,n){var t=Object.assign({},{pickle:function(e){e.leaflet_layer_ids=[],delete e.loading_layers,delete e.templates},clone_layer_name:r.clone_layer_name,parameters:r.parameters,get_feature_info_xml_url:r.get_feature_info_xml_url,get_feature_info_url:r.get_feature_info_url},r,n);return t.render=function(e,a,_){r.onrender&&r.onrender(a),Renderers.update_templates(a,t),n.render(e,a,_)},t};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/esri.js */
RendererTemplates.esri=function(e,r){function n(e){var n=r.esri_opts;return"function"==typeof r.esri_opts&&(n=r.esri_opts(e)),n}var a=RendererTemplates.base(e,r,{render:function(e,a,t){Renderers.create_leaflet_layer_async(e,a,n(a),function(){return new Promise(function(e,o){var s=L.esri.dynamicMapLayer(_.merge({useCors:!1,pane:t,minZoom:r.parameters.min_zoom||0,maxZoom:r.parameters.max_zoom||18},n(a)));s.on("requestsuccess",function(e){Views.ControlPanel.fire("tile-layer-loaded",a)}),s.on("requesterror",function(e){Views.ControlPanel.fire("tile-layer-loading-error",a)}),e(s)})},function(){r.on_layer_create&&r.on_layer_create(a)});var o=Renderers.opacity(a),s=Renderers.get_all_leaflet_layers(e,a),i=Renderers.get_leaflet_layer(e,a,n(a));_.each(s,function(e){i&&i._leaflet_id===e._leaflet_id?e.setOpacity(o):e.setOpacity(0)})}});Renderers[e]=a};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/esri_feature_layer.js */
RendererTemplates.esri_feature_layer=function(e,r){function n(e){var n=r.esri_opts;return"function"==typeof r.esri_opts&&(n=r.esri_opts(e)),n}function t(e,n){if(r.setStyle)return r.setStyle(opacity,n);if(r.parameters.color_buckets){var t=_.find(r.parameters.color_buckets,function(t){var o=r.color_bucket_field;r.color_bucket_field instanceof Function&&(o=r.color_bucket_field(e));var a=_.get(n,o);return _.isArray(t.values)?1==t.values.length?t.values[0]==a:2==t.values.length?t.values[0]<=a&&t.values[1]>a:_.contains(v_.values,a):_.isFunction(t.values)?t.values(a):void console.log("Can't find this: ",n,a,r.parameters.color_buckets)});return t?{stroke:!0,color:t.stroke,weight:t.weight||1,fill:!0,fillColor:t.fill,clickable:!1}:(console.log("Can't find this: ",n,r.parameters.color_buckets),{})}}var o=RendererTemplates.base(e,r,{render:function(e,o,a){Renderers.create_leaflet_layer_async(e,o,n(o),function(){return new Promise(function(e,r){var t=L.esri.featureLayer(_.merge({useCors:!1,pane:a},n(o)));t.on("load",function(e){Views.ControlPanel.fire("tile-layer-loaded",o)}),t.on("requesterror",function(e){Renderers.add_layer_error(o)}),t.on("error",function(e){Renderers.add_layer_error(o)}),n(o).pointToLayer||t.on("click",function(e){LeafletMap.fire("click",e,!0)}),e(t)})},function(){r.on_layer_create&&r.on_layer_create(o)});var l=Renderers.opacity(o),i=Renderers.get_all_leaflet_layers(e,o),s=Renderers.get_leaflet_layer(e,o,n(o));_.each(i,function(e){_.each(i,function(e){s._leaflet_id===e._leaflet_id?e.setStyle(function(e){return Object.assign({},t(o,e),{opacity:l,fillOpacity:l})}):e.setStyle(function(){return{opacity:0,fillOpacity:0}})})})},find_geo_json:function(e,n,t){var o=[],a=n.leaflet_layer_ids,l=Renderers.lookup_layers(e,a);return _.each(l,function(e){var a=Renderers.find_geojson_polygon_by_point(t,e);if(a&&r.find_geojson_match){var l=r.find_geojson_match(n,a);l&&o.push(l)}}),{features:o,geojson:o.length>0}}});Renderers[e]=o};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/esri_feature_layer_points.js */
RendererTemplates.esri_feature_layer_points=function(e,r){function t(e){var t=r.esri_opts;return"function"==typeof r.esri_opts&&(t=r.esri_opts(e)),t}function n(e,n){if(r.setStyle)return r.setStyle(opacity,n);if(r.parameters.color_buckets){var o=_.find(r.parameters.color_buckets,function(t){var o=r.color_bucket_field;r.color_bucket_field instanceof Function&&(o=r.color_bucket_field(e));var a=_.get(n,o);return _.isArray(t.values)?1==t.values.length?t.values[0]==a:2==t.values.length?t.values[0]<=a&&t.values[1]>a:_.contains(v_.values,a):_.isFunction(t.values)?t.values(a):void console.log("Can't find this: ",n,a,r.parameters.color_buckets)});return o?{stroke:!0,color:o.stroke,weight:o.weight||1,fill:!0,fillColor:o.fill,clickable:!!t(e).pointToLayer}:(console.log("Can't find this: ",n,r.parameters.color_buckets),{})}}var o=RendererTemplates.base(e,r,{render:function(e,o,a){Renderers.create_leaflet_layer_async(e,o,t(o),function(){return new Promise(function(e,n){var l=_.merge({useCors:!1,pane:a},{pointToLayer:function(e,t){return r.marker(o,e,t,{pane:Renderers.layer_to_pane_name(o)})},onEachFeature:r.popup_content?function(e,t){t.bindPopup(r.popup_content(o,e,t))}:null},t(o)),i=L.esri.featureLayer(l);i.on("load",function(e){Views.ControlPanel.fire("tile-layer-loaded",o)}),i.on("requesterror",function(e){Renderers.add_layer_error(o)}),i.on("error",function(e){Renderers.add_layer_error(o)}),e(i)})},function(){r.on_layer_create&&r.on_layer_create(o)});var l=Renderers.get_all_leaflet_layers(e,o),i=Renderers.opacity(o),s=Renderers.get_leaflet_layer(e,o,t(o));_.each(l,function(e){_.each(l,function(e){s._leaflet_id===e._leaflet_id?e.setStyle(function(e){return Object.assign({},n(o,e),{opacity:i,fillOpacity:i})}):e.setStyle(function(){return{opacity:0,fillOpacity:0}})})})}});Renderers[e]=o};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/esri_rest.js */
RendererTemplates.esri_rest=function(e,r){function n(e){var n=r.esri_opts;return"function"==typeof r.esri_opts&&(n=r.esri_opts(e)),n}var a=RendererTemplates.base(e,r,{render:function(e,a,t){Renderers.create_leaflet_layer_async(e,a,n(a),function(){return new Promise(function(e,o){var l=new L.esri.TiledMapLayer(_.merge({url:r.url,pane:t,minZoom:r.parameters.min_zoom||0,maxZoom:r.parameters.max_zoom||18},n(a)));l.on("tileload",function(e){Views.ControlPanel.fire("tile-layer-loaded",a)}),l.on("tileerror",function(e){console.warn("layer_id","WMS Renderer",e),Views.ControlPanel.fire("tile-layer-loading-error",a)}),e(l)})},function(){r.on_layer_create&&r.on_layer_create(a)});var o=Renderers.opacity(a),l=Renderers.get_all_leaflet_layers(e,a),i=Renderers.get_leaflet_layer(e,a,n(a));_.each(l,function(e){i._leaflet_id===e._leaflet_id?e.setOpacity(o):e.setOpacity(0)})}});Renderers[e]=a};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/esri_tiled_map.js */
RendererTemplates.esri_tiled_map=function(e,n){function a(e){var a=n.esri_opts;return"function"==typeof n.esri_opts&&(a=n.esri_opts(e)),a}function r(e){return new Promise(function(a,r){$.ajax({cache:!0,dataType:"json",url:n.url+"/legend?f=pjson",success:function(r){var t=_.map(n.esri_opts.layers.split(","),parseInt),l=[];_.each(r.layers,function(e){_.contains(t,e.layerId)&&_.each(e.legend,function(e){l.push(e)})}),e.legend_data=l,a()},error:function(e){200!==e.status&&r(e)}})})}function t(e,r){return new Promise(function(t,l){var i=new L.esri.TiledMapLayer(_.merge({url:n.url,pane:r,minZoom:n.parameters.min_zoom||0,maxZoom:n.parameters.max_zoom||18},a(e)));i.on("tileload",function(n){Views.ControlPanel.fire("tile-layer-loaded",e)}),i.on("tileerror",function(n){console.warn("layer_id","WMS Renderer",n),Views.ControlPanel.fire("tile-layer-loading-error",e)}),t(i)})}var l=RendererTemplates.base(e,n,{legend_template:"\n        <div class='detail-block esri-tiled-map'>\n          {{#legend_data}}\n            <div class=''>\n              <img src=\"data:{{contentType}};base64,{{imageData}}\" class='cube'/>\n              <span>{{label}}</span>\n            </div>\n          {{/legend_data}}\n        </div>\n    ",render:function(e,l,i){Renderers.create_leaflet_layer_async(e,l,a(l),function(){return Promise.all([t(l,i),r(l)])},function(){n.on_layer_create&&n.on_layer_create(l)});var o=Renderers.opacity(l),s=Renderers.get_all_leaflet_layers(e,l),c=Renderers.get_leaflet_layer(e,l,a(l));_.each(s,function(e){c._leaflet_id===e._leaflet_id?e.setOpacity(o):e.setOpacity(0)})}});Renderers[e]=l};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/geojson_lines.js */
RendererTemplates.geojson_lines=function(e,n){var a={pickle:function(e){delete e.legend_url,e.leaflet_layer_ids=[]},update_legend:Renderers.update_legend(n),create_leaflet_layers:function(e,a){_.isEmpty(a.leaflet_layer_ids)&&(a.leaflet_layer_ids=["loading-so-we-avoid-race-conditions"],$.ajax({cache:!0,dataType:"json",url:n.url,success:function(r){var t=new L.GeoJSON(r,{pointToLayer:n.pointToLayer,onEachFeature:n.onEachFeature||function(e,a){n.popupContents&&a.bindPopup(n.popupContents(e))}});Renderers.geojson_add_to_map(e,a,t)},error:function(e){200!==e.status&&Renderers.add_layer_error(a)}}))}};a.render=function(e,r,t){alert("This is not converted"),a.update_legend(r),a.create_leaflet_layers(e,r);var o=Renderers.opacity(r),l=r.leaflet_layer_ids,s=Renderers.lookup_layers(e,l);_.each(s,function(e){_.each(e._layers,function(e){e.setStyle({opacity:o}),n.each_line&&n.each_line(e)})})},Renderers[e]=a};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/geojson_points.js */
RendererTemplates.geojson_points=function(e,n){var t={},r={},o=function(e){return e.parameters.options},a=function(e,o,a){return new Promise(function(i,c){t[o]?i(t[o]):r[o]||(r[o]=!0,n.load_data_url?n.load_data_url(e,o,a).then(function(e){t[o]=e,i(e)}).error(function(){c()}):$.ajax({cache:!0,dataType:"json",url:o,success:function(e){t[o]=e,i(e)},error:function(e){c()}}))})},i=RendererTemplates.base(e,n,{render:function(e,t,r){a(t,n.url,n.url_opts).then(function(a){Renderers.create_leaflet_layer_async(e,t,o(t),function(){return new Promise(function(e,o){var i=n.selectData?n.selectData(t,a.features):a.features;_.each(i,function(e){"MultiPoint"==e.geometry.type&&(e.geometry.type="Point",e.geometry.coordinates=e.geometry.coordinates[0])});var c=new L.GeoJSON(Object.assign({},a),{pointToLayer:function(e,o){if(n.pointToLayer)return n.pointToLayer(t,e,o,r)},pane:r,onEachFeature:function(e,r){n.onEachGeometry&&n.onEachGeometry(a,t,e,r),n.popupContents&&r.bindPopup(n.popupContents(e))}});if(n.clustering){var u=n.clustering.iconCreateFunction;u||(u=function(e,n){return new L.DivIcon({pane:n,html:e.getChildCount()})}),n.clustering.iconCreateFunction=function(e){return u(e,r)};var l=new L.MarkerClusterGroup(_.merge({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,disableClusteringAtZoom:11},n.clustering));l.addLayer(c),c=l}e(c),Views.ControlPanel.fire("tile-layer-loaded",t)})},function(){n.on_layer_create&&n.on_layer_create(t);var r=Renderers.opacity(t),a=Renderers.get_all_leaflet_layers(e,t),i=Renderers.get_leaflet_layer(e,t,o(t));_.each(a,function(e){var t=null;t=n.clustering?e._featureGroup._layers:e._layers,i&&i._leaflet_id===e._leaflet_id?Object.keys(t).forEach(function(e){t[e].setOpacity(r)}):Object.keys(t).forEach(function(e){t[e].setOpacity(0)})})})}).catch(function(e){Views.ControlPanel.fire("tile-layer-loading-error",t)})}});Renderers[e]=i};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/geojson_polygons.js */
RendererTemplates.geojson_polygons=function(e,n){var o={},t={},r=n.get_opts||function(e){return e.parameters.options},a=n.load_data_url||function(e,n,r){return new Promise(function(e,r){o[n]?e(o[n]):t[n]||(t[n]=!0,$.ajax({cache:!0,dataType:"json",url:n,success:function(t){if("Topology"===t.type){var r=_.keys(t.objects)[0];t=topojson.feature(t,t.objects[r])}o[n]=t,e(t)},error:function(e){r()}}))})},l=RendererTemplates.base(e,n,{find_geo_json:function(e,o,t){var a=[],l=Renderers.get_leaflet_layer(e,o,r(o)),i=Renderers.find_geojson_polygon_by_point(t,l);if(i&&n.find_geojson_match){var c=n.find_geojson_match(o,i);c&&a.push(c)}return a},render:function(e,o,t){Renderers.create_leaflet_layer_async(e,o,r(o),function(){return new Promise(function(e,r){a(o,n.url,n.url_opts).then(function(r){var a=r,l=new L.GeoJSON(a,{pane:t,filter:n.filter?function(e,t){return n.filter(o,e,t)}:null,onEachFeature:function(e,t){n.onEachGeometry&&n.onEachGeometry(r,o,e,t),n.popupContents&&t.bindPopup(n.popupContents(e))}});e(l),Views.ControlPanel.fire("tile-layer-loaded",o)})})},function(){n.on_layer_create&&n.on_layer_create(o);var t=Renderers.get_all_leaflet_layers(e,o),a=Renderers.get_leaflet_layer(e,o,r(o)),l=Renderers.opacity(o);_.each(t,function(e){_.each(e._layers,function(t){a&&e._leaflet_id==a._leaflet_id?(t.setStyle({fillOpacity:l,opacity:l}),n.onEachPolygon&&n.onEachPolygon(o,t,l)):t.setStyle({fillOpacity:0,opacity:0})})})})}});Renderers[e]=l};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/imported_geojson.js */
RendererTemplates.imported_geojson=function(e,r){var t={templates:{},parameters:{opacity:100},update_legend:Renderers.update_legend(r)};t.render=function(e,t,n){Renderers.create_leaflet_layer_async(e,t,t.id,function(){return new Promise(function(e,a){var o=new L.GeoJSON(r.data,{pane:n,style:function(e){var r=e.properties||{};return{stroke:!0,opacity:r["stroke-opacity"]||1,color:r.stroke||"#000",fillColor:"rgba(0,102,51,0.8)",weight:r["stroke-width"]||2}},onEachFeature:function(e,t){var n="";t.getBounds&&(n=Renderers.utils.zoom_to_location_link(t.getBounds())),t.bindPopup("<h5>"+r.name+"</h5>\n                  <pre>"+JSON.stringify(e.properties,null,2)+"</pre>\n                  <br/>\n                  "+n+"\n                  ")}});Views.ControlPanel.fire("tile-layer-loaded",t),e(o)})},function(){r.on_layer_create&&r.on_layer_create(t);Renderers.opacity(t);var n=Renderers.get_all_leaflet_layers(e,t),a=Renderers.get_leaflet_layer(e,t,t.id);_.each(n,function(e){a._leaflet_id===e._leaflet_id?e.setStyle({opacity:100,fillOpacity:100}):e.setStyle({opacity:0,fillOpacity:0})})})},Renderers[e]=t};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/invasives.js */
RendererTemplates.invasives=function(e,a){var r={"05010001":"Allegheny River","04150101":"Black","02030102":"Bronx River","04120103":"Buffalo River","02050104":"Canisteo River","04120102":"Cattaraugus Creek","04150102":"Chaumont_Perch","05010002":"Chautauqua Lake","02050102":"Chenango River","02050105":"Cohocton River","02040102":"East Branch Delaware River","04150307":"English_Salmon","04140201":"Finger Lakes","04150304":"Grass","04150303":"Indian","02010004":"Lake Champlain","04120101":"Lake Erie","01100006":"Lower Byram River","04130003":"Lower Genesee","02040104":"Mid -Delaware River","02020006":"Mid-Hudson River","04140101":"Mid-Lake Ontario","02020003":"Mid-Northern Hudson River","04140102":"Mid-Northern Lake Ontario","02020008":"Mid-Southern Hudson River","02020004":"Mohawk River","02020001":"Northern Hudson River","02010006":"Northern Lake Champlain","02030201":"Northern Long Island","02040101":"Nothern Delaware River","04140202":"Oneida","04150302":"Oswegatchie","04140203":"Oswego River","04150305":"Raquette","02020002":"Sacandaga Reservoir","02020005":"Schoharie Creek","02030101":"Southern Hudson River","02010001":"Southern Lake Champlain","02030202":"Southern Long Island","04150306":"St.Regis","02030104":"Staten Island","01100005":"Still River","02050103":"Susquehanna  River","04120104":"Tonawanda Creek","02050101":"Unadilla River","04130002":"Upper Genesee","02030103":"Upper Hackensack River","04150301":"Upper St.Lawrence","02020007":"Wallkill River","05010004":"West Allegheny","04130001":"West Lake Ontario"},n=a.url,t=null,i=function(e){return _.pick(e.parameters,["species","area"])},s={},o=colorbrewer.YlOrRd[9],l=function(e,a,r){var n=_.get(s,[e,a]);if(n)return n;var t=r[e]["watershed"==a?"basin":a];n=(n=d3.scaleQuantile()).range(o);var i=_.values(t);return n.domain(d3.extent(i)),_.set(s,[e,a],n),n},c=function(e,a,n){var t=i(e),s=_.cloneDeep(n),o=_.keys(a);return _.each(s.features,function(e){if(e.properties.color_fn=l(t.species,t.area,a),e.properties.area=t.area,e.properties.species=t.species,"watershed"==t.area){var n=a[t.species].basin[r[e.properties.huc8]];n||console.log("Could not find",e.properties.huc8),e.properties.data_count=n,e.properties.name=e.properties.name+" ("+e.properties.huc8+")"}else{var i=a[t.species].county[e.properties.name];e.properties.data_count=i}}),e.parameters.all_species=o,s};RendererTemplates.geojson_polygons(e,{parameters:{opacity:95,species:a.species,area:"county",all_areas:["county","watershed"]},pickle:function(e){delete e.parameters.color_fn,delete e.parameters.data_count},get_opts:i,onEachPolygon:function(e,a,r){i(e);var n=a.feature.properties.data_count,t=a.feature.properties.color_fn,s={weight:1,color:"black",opacity:.3+.7*r,fillColor:"rgba(0,0,0)",fillOpacity:0};if(t){var o=t(n);o?(s.fillColor=o,s.fillOpacity=r):(s.fillColor="transparent",s.weight=0)}else console.log("No color set");a.setStyle(s)},on_layer_create:function(e){var a=i(e),r=l(a.species,a.area),n=r.domain(),t=_.reduce(_.range(n[0],n[1],(n[1]-n[0])/5).concat([n[1]]),function(e,a){return e.push({v:a,c:r(a)}),e},[]);e.parameters.legend_range=t},find_geojson_match:function(e,a){i(e);return{count:a.feature.properties.data_count,area:a.feature.properties.name,geojson:!0,species:e.parameters.species}},load_data_url:function(e){return new Promise(function(a,r){var s=i(e);GeometryLoader.load(s.area,function(i,s){i?(console.log("Error!",i),r()):t?a(c(e,t,s)):$.ajax({cache:!0,dataType:"json",url:n,success:function(r){a(c(e,t=r,s))},error:function(e){r()}})})})},info_template:"\n        <div class='col-xs-2'>\n          <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n        </div>\n        <div class='col-xs-10'>\n        {{#geojson}}\n          <div>\n            Area: {{area}} {{parameters.area}} <br>\n            Species: {{species}} <br>\n            Number reported: {{count}} <br>\n          </div>\n        {{/geojson}}\n        </div>\n    ",legend_template:"\n      <div class='detail-block show-confidence'>\n        <label> Species: </label>\n        <select style=\"max-width: 70%;\" value='{{parameters.species}}'>\n          {{#parameters.all_species}}\n            <option value='{{this}}'> {{this}} </option>\n          {{/parameters.all_species}}\n        </select>\n      </div>\n      <div class='detail-block show-confidence'>\n        <label> Area: </label>\n        <select style=\"max-width: 70%;\" value='{{parameters.area}}'>\n          {{#parameters.all_areas}}\n            <option value='{{this}}'> {{u.capitalize(this)}} </option>\n          {{/parameters.all_areas}}\n        </select>\n      </div>\n      <div class='detail-block legend'>\n        <div class='color-legend'>Reported Invasive Species (Total Observations)</div>\n\n        {{#parameters.legend_range}}\n          <div class='color-block' style=\"width: {{100.0 / parameters.legend_range.length}}%;\">\n            <svg width=\"100\" height=\"100\">\n              <rect height=\"100\" width=\"100\" style=\"fill: {{c}}; opacity:{{(0.7 * parameters.opacity / 100.0) + 0.3}}; \"/>\n            </svg>\n            {{#if v}}\n              <label>{{fixed_precision(v, parameters.legend_significant_digits)}}</label>\n            {{/if v}}\n\n            {{#if s}}\n              <label>{{s}} </label>\n            {{/if s}}\n          </div>\n        {{/parameters.legend_range}}\n      </div>\n    "})};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/wms.js */
RendererTemplates.wms=function(e,r){function n(e){var n=r.wms_opts;return"function"==typeof r.wms_opts&&(n=r.wms_opts(e)),n}var a=RendererTemplates.base(e,r,{render:function(e,a,t){Renderers.create_leaflet_layer_async(e,a,n(a),function(){return new Promise(function(e,o){var l=new L.TileLayer.WMS(r.url,_.merge({pane:t,minZoom:r.parameters.min_zoom||0,maxZoom:r.parameters.max_zoom||18},n(a)));l.on("tileload",function(e){Views.ControlPanel.fire("tile-layer-loaded",a)}),l.on("tileerror",function(e){console.warn("layer_id","WMS Renderer",e),Views.ControlPanel.fire("tile-layer-loading-error",a)}),e(l)})},function(){r.on_layer_create&&r.on_layer_create(a)});var o=Renderers.opacity(a),l=Renderers.get_all_leaflet_layers(e,a),i=Renderers.get_leaflet_layer(e,a,n(a));_.each(l,function(e){i&&i._leaflet_id===e._leaflet_id?e.setOpacity(o):e.setOpacity(0)})}});Renderers[e]=a};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/climaid.js */
RendererTemplates.climaid_data={},RendererTemplates.climaid=function(e,t){var n=function(e){return _.pick(e.parameters,["timestep","scenario","percentile","symbology"])},a={},r=function(t,n){var a=n.timestep,r=n.scenario,o=n.percentile,l=n.symbology,i=[e,a,r,o,l].join("_");if(!RendererTemplates.climaid_data[i]){var c=function(e,n){var a=[t.longitude.start+n*t.longitude.step,t.latitude.start+e*t.latitude.step];return[a,[t.longitude.start+(1+n)*t.longitude.step,t.latitude.start+e*t.latitude.step],[t.longitude.start+(1+n)*t.longitude.step,t.latitude.start+(1+e)*t.latitude.step],[t.longitude.start+n*t.longitude.step,t.latitude.start+(1+e)*t.latitude.step],a]},s={type:"FeatureCollection",features:[]},d=t[a][r][o];_.forEach(d,function(e,t){_.forEach(e,function(e,n){s.features.push({type:"Feature","lat-lng":c(t,n)[0],geometry:{type:"Polygon",coordinates:[c(t,n)]},properties:{climaid_delta:e}})})});var p=[0,100];if("year"===l)p=d3.extent(_.flattenDeep(_.map(t[a],function(e){return _.map(e,function(e){return _.flattenDeep(e)})})));else if("scenario"===l){var u=_.compact(_.pluck(t,r)),m=_.flattenDeep(_.map(u,function(e){return _.values(e)}));p=d3.extent(m)}else if("percentile"===l){m=[];_.each(t,function(e){_.each(e,function(e){_.each(e,function(e,t){t===o&&m.push(e)})})}),p=d3.extent(_.flattenDeep(m))}RendererTemplates.climaid_data[i]=Object.freeze({geojson:s,color_extent:p})}return RendererTemplates.climaid_data[i]},o=function(e){return new Promise(function(t,n){RendererTemplates.climaid_data[e]?t(RendererTemplates.climaid_data[e]):a[e]||(a[e]=!0,$.ajax({cache:!0,dataType:"json",url:e,success:function(n){RendererTemplates.climaid_data[e]=n,Object.freeze(RendererTemplates.climaid_data[e]),t(RendererTemplates.climaid_data[e])},error:function(e){n()}}))})},l=function(e,n,a){var r=d3.scaleQuantile(),o=t.color_range.positive,l=a;if(a[0]<0){o=t.color_range.negative.concat(["rgba(0,0,0)"]).concat(t.color_range.positive);var i=_.max([Math.abs(a[1]),Math.abs(a[0])]);l=[-i,i]}r.range(o),r.domain(l);var c=r.domain(),s=_.reduce(_.range(c[0],c[1],(c[1]-c[0])/9).concat([c[1]]),function(e,t){return e.push(r(t)),e},[]);return e.parameters.color_range=s,e.parameters.color_extent=l,e.parameters.colorfn=r,r},i=function(e,t){e.parameters.metrics_range=t.quantiles(),e.parameters.colorfn=t},c=function(e,t,n,a,r){try{var o=t(a.properties.climaid_delta)||"rgba(0,0,0,0)";r.setStyle({fillColor:o,color:o})}catch(e){console.error(e)}},s=RendererTemplates.base(e,t,{parameters:{opacity:"70",timestep:"2020",percentile:"mean",scenario:"45",symbology:"scenario"},find_geo_json:function(e,t,a){var r=null,o=Renderers.get_leaflet_layer(e,t,n(t)),l=Renderers.find_geojson_polygon_by_point(a,o);return l&&(r=_.merge({},l.feature.properties,{geojson:!0})),r},render:function(e,a,s){o(t.data_url).then(function(t){Renderers.create_leaflet_layer_async(e,a,n(a),function(){var e=r(t,a.parameters),n=l(a,0,e.color_extent);return i(a,n),new Promise(function(t,r){t(new L.GeoJSON(e.geojson,{pane:s,onEachFeature:function(e,t){c(0,n,0,e,t)}})),Views.ControlPanel.fire("tile-layer-loaded",a)})},function(){var t=Renderers.opacity(a),r=Renderers.get_all_leaflet_layers(e,a),o=Renderers.get_leaflet_layer(e,a,n(a)),l={weight:"0.1",color:"rgba(0,0,0,0.4)"},i={weight:"0",opacity:0,fillOpacity:0,fill:"transparent"};_.each(r,function(e){o&&o._leaflet_id===e._leaflet_id?e.setStyle(function(e){return _.merge({},l,{opacity:t,fillOpacity:Math.max(0,t-.1)})}):e.setStyle(function(e){return i})})})})},info_template:"\n      <div class='col-xs-2'>\n        <label> "+t.title+" </label>\n      </div>\n      <div class='col-xs-10'>\n        <div>\n          "+t.legend+": {{u.to_fixed(geojson.climaid_delta, "+t.legend_precision+")}} "+t.legend_units+" <br>\n        </div>\n      </div>\n    ",legend_template:"\n      <div class='detail-block sea-level'>\n        <label decorator='tooltip:Use slider to select date'> Year: </label>\n        <select value='{{parameters.timestep}}'>\n          <option value='2020'> 2020 </option>\n          <option value='2050'> 2050 </option>\n          <option value='2080'> 2080 </option>\n        </select>\n      </div>\n      <div class='detail-block show-confidence'>\n        <label decorator='tooltip:Emissions Scenario'> Scenario: </label>\n        <select value='{{parameters.scenario}}'>\n          <option value='45'> Low (4.5) </option>\n          <option value='85'> High (8.5) </option>\n        </select>\n      </div>\n      <div class='detail-block show-confidence'>\n        <label decorator='tooltip: Percentile standing among all possible models'> Percentile: </label>\n        <select value='{{parameters.percentile}}'>\n          <option value='10'> 10th Percentile </option>\n          <option value='25'> 25th Percentile </option>\n          <option value='mean'> Median </option>\n          <option value='75'> 75th Percentile </option>\n          <option value='90'> 90th Percentile </option>\n        </select>\n      </div>\n      <div class='detail-block show-confidence'>\n        <label decorator='tooltip:The data range from which the color scale will be constructed'> Symbolize By: </label>\n        <select value='{{parameters.symbology}}'>\n          <option value='scenario'> Across Scenario </option>\n          <option value='year'> Across Years </option>\n          <option value='percentile'> Across Percentile </option>\n        </select>\n      </div>\n\n      {{#{metrics: parameters.metrics_range,\n          legend: '"+t.legend+"',\n          inverted: '"+t.invert_scale+"',\n          quantiled: true,\n          signed: false,\n          precision: '"+t.legend_precision+"',\n          colors: parameters.color_range} }}\n        {{> map_color_block_legend_template }}\n      {{/{metrics: parameters.metrics_range}}\n    "});Renderers[e]=s};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/climate_data.js */
RendererTemplates.ny_climate_data_cache={},RendererTemplates.ny_match_geometry_and_data=function(e,a,t,n,r){var o=function(e){return"county"==t?e.properties.name==a.properties.name:"watershed"==t?parseInt(e.properties.uid,10)===parseInt(a.properties.huc8,10):"state"==t||void console.error("matching",t,e.properties,a.properties)},l={};return _.each(e.features,function(e){o(e)&&_.each(e.properties.data,function(a){a.season===n&&(found_data_value=_.find(a.values,function(e){return e.year===r}),found_data_value&&(l={value:found_data_value,season:n,year:r,season_data:a,geometry_data:e.properties}))})}),l},RendererTemplates.ny_climate_data_colorize=function(e,a,t,n){var r=_.findIndex(e,function(e){return n.invert_scale?a>=e:a<=e});return-1===r&&(r=e.length),t[r]},RendererTemplates.ny_climate_data=function(e,a){var t=function(e){return{id:e.id,options:e.parameters.options}},n={},r=function(e){return new Promise(function(a,t){RendererTemplates.ny_climate_data_cache[e]?a(_.cloneDeep(RendererTemplates.ny_climate_data_cache[e])):n[e]||(n[e]=!0,$.ajax({cache:!0,dataType:"json",url:e,success:function(t){RendererTemplates.ny_climate_data_cache[e]=t,a(t)},error:function(e){t()}}))})},o=function(e){return new Promise(function(a,t){GeometryLoader.load(e,function(e,n){e?t(e):a(n)})})},l=RendererTemplates.base(e,a,{find_geo_json:function(e,a,n){Renderers.get_all_leaflet_layers(e,a);var r=Renderers.get_leaflet_layer(e,a,t(a));Object.keys(r._layers)[0];if(r){n.latlng;var o=leafletPip.pointInLayer(n.latlng,r,!0);return o[0]?_.cloneDeep(o[0].feature.properties):null}return null},render:function(e,n,l){r(a.data_url).then(function(r){a.onLoadedData&&a.onLoadedData(r,n),Renderers.create_leaflet_layer_async(e,n,t(n),function(){return new Promise(function(e,t){o(n.parameters.options.summary).then(function(t){var o=new L.GeoJSON(t,{pointToLayer:a.pointToLayer,pane:l,onEachFeature:function(e,t){a.onEachGeometry(r,n,e,t)}});e(o),Views.ControlPanel.fire("tile-layer-loaded",n)}).catch(function(e){200!==e.status&&Views.ControlPanel.fire("tile-layer-loading-error",n),t()})})},function(){var a=Renderers.opacity(n),r=Renderers.get_all_leaflet_layers(e,n),o=Renderers.get_leaflet_layer(e,n,t(n)),l={weight:"1",color:"black",fillOpacity:0,fill:"red"},i={weight:"0",opacity:0,fillOpacity:0,fill:"transparent"};_.each(r,function(e){o&&o._leaflet_id===e._leaflet_id?e.setStyle(function(e){return e.properties.location_data?_.merge({},l,{opacity:a,fillOpacity:Math.max(0,a-.1)}):_.merge({},i,{fillColor:"rgba(0,0,0,0.1)",color:"rgba(0,0,0,0.1)",opacity:a,fillOpacity:Math.max(0,a-.1)})}):e.setStyle(function(e){return i})})})})}});Renderers[e]=l};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/climate_data_projected.js */
var findDataForNYProjectedData=function(e,a,n,t,s,o){var r=RendererTemplates.ny_match_geometry_and_data(e,a,n,t,s);return _.isEmpty(r)||(r.scenario=o),r};RendererTemplates.ny_projected_climate_data=function(e,a){RendererTemplates.ny_climate_data(e,{clone_layer_name:function(e){var n=e.parameters.options;return a.title+" Y:"+e.parameters.years[n.year_indx]+"s S:"+n.season+" by "+n.summary},info_template:"\n        <div class='col-xs-2'>\n          <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n        </div>\n        <div class='col-xs-10'>\n          {{#geojson.location_data}}\n            <table class='table'>\n              <thead>\n                <tr>\n                  <th style='text-align: center;'\n                      colspan='{{u.object_entries_count(active_layer.parameters.all_seasons) + 2}}'> {{geojson.name}} {{geojson.geomtype}}\n      </th>\n                </tr>\n                <tr>\n                  <th> </th>\n                  <th></th>\n                  <th class='deltas' style='text-align: center;'\n                      colspan='{{u.object_entries_count(active_layer.parameters.all_seasons) + 2}}'>\n                        "+a.legend+" </th>\n                </tr>\n                <tr>\n                  <th> Season </th>\n                  <th> Baseline ("+a.legend_units+")</th>\n                  <th> Scenario </th>\n\n                  {{#active_layer.parameters.years}}\n                    <th> {{.}}s</th>\n                  {{/active_layer.parameters.years}}\n                </tr>\n              </thead>\n              <tbody>\n                {{#u.sort_by(geojson.location_data.geometry_data.data, 'season')}}\n                  <tr class=\"{{(season === geojson.location_data.season ? 'active-season' : '')}} {{((\"high\" == geojson.location_data.scenario) ? 'active-scenario' : '')}}\">\n                    <td rowspan='2'>{{u.capitalize(season)}}</td>\n                    <td rowspan='2'>{{u.to_fixed(baseline, "+a.legend_precision+")}}</td>\n                    <td> High </td>\n\n                    {{#u.sort_by(values, 'year')}}\n                      <td class='{{((year === geojson.location_data.year) ? 'active-year' : '')}}'>\n                      {{{u.add_sign(u.to_fixed(delta_high, "+a.legend_precision+"))}}}</td>\n                    {{/sort_by(values, 'year')}}\n                  </tr>\n\n                  <tr class=\"{{(season === geojson.location_data.season ? 'active-season' : '')}} {{((\"low\" == geojson.location_data.scenario) ? 'active-scenario' : '')}}\">\n\n                    <td> Low </td>\n\n                    {{#u.sort_by(values, 'year')}}\n                      <td class='{{((year === geojson.location_data.year) ? 'active-year' : '')}}'>\n                      {{{u.add_sign(u.to_fixed(delta_low, "+a.legend_precision+"))}}}</td>\n                    {{/sort_by(values, 'year')}}\n                  </tr>\n                {{/u.sort_by(geojson.location_data.geometry_data.data, 'season')}}\n              </tbody>\n            </table>\n          {{else}}\n            <h4> No Climate Data For This Location</h4>\n          {{/geojson.location_data}}\n        </div>\n    ",legend_template:"\n      <div class='detail-block show-confidence'>\n        <label decorator='tooltip:Choose a Summary Area'> Summary: </label>\n        <select value='{{parameters.options.summary}}'>\n          {{#u.to_sorted_values_from_hash(parameters.all_summaries)}}\n            <option value='{{key}}'>{{{value}}}</option>\n          {{/u.to_sorted_values_from_hash(parameters.all_summaries)}}\n        </select>\n      </div>\n      <div class='detail-block opacity'>\n        <label  decorator='tooltip:Use slider to adjust Decade'> Decade: </label>\n        <input type=\"range\" value=\"{{parameters.options.year_indx}}\"\n          min=\"0\"\n          max=\"{{parameters.years.length-1}}\">\n        {{parameters.years[parameters.options.year_indx]}}s\n      </div>\n      <div class='detail-block show-confidence'>\n        <label decorator='tooltip:Choose a Scenario'> Scenario: </label>\n        <select value='{{parameters.options.scenario}}'>\n          {{#u.to_sorted_values_from_hash(parameters.all_scenarios)}}\n            <option value='{{key}}'>{{value}}</option>\n          {{/u.to_sorted_values_from_hash(parameters.all_scenarios)}}\n        </select>\n      </div>\n      <div class='detail-block show-confidence'>\n        <label decorator='tooltip:Choose a Season'> Season: </label>\n        <select value='{{parameters.options.season}}'>\n          {{#u.to_sorted_values_from_hash(parameters.all_seasons)}}\n            <option value='{{key}}'>{{value}}</option>\n          {{/u.to_sorted_values_from_hash(parameters.all_seasons)}}\n        </select>\n      </div>\n\n      {{#{metrics: parameters.metrics_ranges[parameters.options.season][parameters.options.scenario],\n          legend: '"+a.legend+"',\n          inverted: '"+a.invert_scale+"',\n          quantiled: true,\n          signed: true,\n          precision: '"+a.legend_precision+"',\n          colors: parameters.color_range} }}\n        {{> map_color_block_legend_template }}\n      {{/{metrics: parameters.metrics_ranges[parameters.options.season]}}\n    ",data_url:"https://repository.nescaum-ccsc-dataservices.com/acis/ny/projected/?variable_name="+a.variable_name,onLoadedData:function(e,n){var t=_.uniq(_.flatten(_.map(e.features,function(e){return _.flatten(_.map(e.properties.data,function(e){return _.flatten(_.map(e.values,function(e){return e.year}))}))}))).sort();n.parameters.years=t;var s={};_.each(e.features,function(e){_.each(e.properties.data,function(e){s[e.season]=s[e.season]||{high:[],low:[]},_.each(e.values,function(a){s[e.season].low.push(a.delta_low),s[e.season].high.push(a.delta_high)})})});var o=_.cloneDeep(n.parameters.color_range);a.invert_scale&&o.reverse(),_.each(n.parameters.all_seasons,function(e,t){var r=[].concat(s[t].high.concat(s[t].low)),l=d3.scaleQuantile().domain(r).range(o).quantiles();a.invert_scale&&l.reverse(),n.parameters.metrics_ranges[t]={low:l,high:l}})},onEachGeometry:function(e,n,t,s){var o=n.parameters.options,r=RendererTemplates.ny_climate_data_colorize;try{var l=findDataForNYProjectedData(e,t,o.summary,o.season,n.parameters.years[o.year_indx],o.scenario);if(t.properties.location_data=l,_.isEmpty(l))s.setStyle({fillColor:"rgba(30,30,30,0.2)",color:"rgba(30,30,30,0.2)"});else{var i="high"===o.scenario?l.value.delta_high:l.value.delta_low,c=r(n.parameters.metrics_ranges[o.season][o.scenario],i,n.parameters.color_range,a);s.setStyle({fillColor:c,color:c})}}catch(a){t.properties.location_data=null,console.error(a),console.log("failed to find value for ",o.metric,"Feature Name:",t.properties.name,t.properties.name,"Available Names:",Object.keys(e))}},parameters:{opacity:100,color_range:a.color_range,metrics_ranges:{},all_scenarios:{high:"High",low:"Low"},all_summaries:{county:"County",watershed:"Watershed"},all_seasons:{annual:"Annual",fall:"Fall",winter:"Winter",spring:"Spring",summer:"Summer"},years:[],options:{year_indx:0,season:"annual",summary:"county",scenario:"high"}}})};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderer_templates/climate_data_observed.js */
var findDataForNYObservedData=function(e,a,n,t,r){return RendererTemplates.ny_match_geometry_and_data(e,a,n,t,r)};RendererTemplates.ny_observed_climate_data=function(e,a){RendererTemplates.ny_climate_data(e,{clone_layer_name:function(e){var n=e.parameters.options;return a.title+" Y:"+e.parameters.years[n.year_indx]+"s S:"+n.season+" by "+n.summary},info_template:"\n        <div class='col-xs-2'>\n          <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n        </div>\n        <div class='col-xs-10'>\n          {{#geojson.location_data}}\n            <table class='table'>\n              <thead>\n                <tr>\n                  <th style='text-align: center;'\n                      colspan='{{u.object_entries_count(active_layer.parameters.all_seasons) + 2}}'> {{geojson.name}} {{geojson.geomtype}}\n      </th>\n                </tr>\n                <tr>\n                  <th></th>\n                  <th class='deltas' style='text-align: center;'\n                      colspan='{{u.object_entries_count(active_layer.parameters.all_seasons)}}'>\n                        "+a.legend+" </th>\n                </tr>\n                <tr>\n                  <th> Season </th>\n                  {{#active_layer.parameters.years}}\n                    <th> {{.}}s</th>\n                  {{/active_layer.parameters.years}}\n                </tr>\n              </thead>\n              <tbody>\n\n                {{#u.sort_by(geojson.location_data.geometry_data.data, 'season')}}\n                  <tr class=\"no-scenario {{(season === geojson.location_data.season ? 'active-season' : '')}}\">\n                    <td>{{u.capitalize(season)}}</td>\n                    {{#u.sort_by(values, 'year')}}\n                      <td class='{{(year === geojson.location_data.year ? 'active-year' : '')}}'>\n                         {{{u.to_fixed(data_value, "+(a.legend_precision||"undefined")+")}}}</td>\n                    {{/sort_by(values, 'year')}}\n                  </tr>\n                {{/u.sort_by(geojson.location_data.geometry_data.data, 'season')}}\n              </tbody>\n            </table>\n          {{else}}\n            <h4> No Climate Data For This Location</h4>\n          {{/geojson.location_data}}\n        </div>\n    ",legend_template:"\n      <div class='detail-block show-confidence'>\n        <label decorator='tooltip:Choose a Summary Area'> Summary: </label>\n        <select value='{{parameters.options.summary}}'>\n          {{#u.to_sorted_values_from_hash(parameters.all_summaries)}}\n            <option value='{{key}}'>{{{value}}}</option>\n          {{/u.to_sorted_values_from_hash(parameters.all_summaries)}}\n        </select>\n      </div>\n      <div class='detail-block opacity'>\n        <label  decorator='tooltip:Use slider to adjust Decade'> Decade: </label>\n        <input type=\"range\" value=\"{{parameters.options.year_indx}}\"\n          min=\"0\"\n          max=\"{{parameters.years.length-1}}\">\n        {{parameters.years[parameters.options.year_indx]}}\n      </div>\n      <div class='detail-block show-confidence'>\n        <label decorator='tooltip:Choose a Season'> Season: </label>\n        <select value='{{parameters.options.season}}'>\n          {{#u.to_sorted_values_from_hash(parameters.all_seasons)}}\n            <option value='{{key}}'>{{value}}</option>\n          {{/u.to_sorted_values_from_hash(parameters.all_seasons)}}\n        </select>\n      </div>\n\n      {{#{metrics: parameters.metrics_ranges[parameters.options.season],\n          legend: '"+a.legend+"',\n          inverted: '"+a.invert_scale+"',\n          quantiled: true,\n          signed: false,\n          precision: '"+a.legend_precision+"',\n          colors: parameters.color_range} }}\n        {{> map_color_block_legend_template }}\n      {{/{metrics: parameters.metrics_ranges[parameters.options.season]}}\n    ",data_url:"https://repository.nescaum-ccsc-dataservices.com/acis/ny/observed/?variable_name="+a.variable_name,onLoadedData:function(e,n){var t=_.uniq(_.flatten(_.map(e.features,function(e){return _.flatten(_.map(e.properties.data,function(e){return _.flatten(_.map(e.values,function(e){return e.year}))}))}))).sort();n.parameters.years=t;var r={};_.each(e.features,function(e){_.each(e.properties.data,function(e){r[e.season]=r[e.season]||[],_.each(e.values,function(a){r[e.season].push(a.data_value)})})});var s=_.cloneDeep(n.parameters.color_range);a.invert_scale&&s.reverse(),_.each(n.parameters.all_seasons,function(e,t){var o=d3.scaleQuantile().domain(r[t]).range(s).quantiles();a.invert_scale&&o.reverse(),n.parameters.metrics_ranges[t]=o})},onEachGeometry:function(e,n,t,r){var s=n.parameters.options,o=RendererTemplates.ny_climate_data_colorize;try{var l=findDataForNYObservedData(e,t,s.summary,s.season,n.parameters.years[s.year_indx]);if(t.properties.location_data=l,_.isEmpty(l))r.setStyle({fillColor:"rgba(30,30,30,0.2)",color:"rgba(30,30,30,0.2)"});else{t.properties.location_data=l;var i=l.value.data_value,c=o(n.parameters.metrics_ranges[s.season],i,n.parameters.color_range,a);r.setStyle({fillColor:c,color:c})}}catch(a){t.properties.location_data=null,console.error(a),console.log("failed to find value for ",s.metric,"Feature Name:",t.properties.name,t.properties.name,"Available Names:",Object.keys(e))}},parameters:{opacity:100,color_range:a.color_range,metrics_ranges:{},all_summaries:{county:"County",watershed:"Watershed"},all_seasons:{annual:"Annual",fall:"Fall",winter:"Winter",spring:"Spring",summer:"Summer"},years:[],options:{year_indx:0,season:"annual",summary:"county"}}})};
</script>

    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/geometry_loader.js */
var GeometryLoader={load:function(e,c,o){var s={county:CDN("https://api.nescaum-ccsc-dataservices.com/ny.counties.json"),basin:CDN("https://api.nescaum-ccsc-dataservices.com/ny.basins.topojson"),watershed:CDN("https://repository.nescaum-ccsc-dataservices.com/data/ny/watershed.json"),state:CDN("https://repository.nescaum-ccsc-dataservices.com/data/ny/state.topojson")},t=function(){c(null,_.cloneDeep(GeometryLoader.cache[e]))};GeometryLoader.cache[e]?t():d3.json(s[e],function(o,s){o?c(o,null):("Topology"===s.type&&(s=topojson.feature(s,s.objects[e])),GeometryLoader.cache[e]=s,t())})},cache:{}};
</script>

    <script> var Controllers = {}; </script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/controllers/layer_import.js */
Controllers.LayerImport={import_layer:function(e,r){e.set("layer_import.import_file_processing",!0);var t=new FileReader,o=function(){setTimeout(function(){e.set("layer_import.import_file",""),e.set("layer_import.import_file_processing",!1),e.set("layer_import.show_modal",!1),e.set("layer_import.import_file","")},10)},a=function(t){try{Controllers.Layers.add_imported_layer(e,r.name,t)}finally{o()}};r.name.match(".*.json")||r.name.match(".*.geojson")?(t.addEventListener("loadend",function(){a(t.result)}),t.readAsText(r)):r.name.match(".*.zip")?(t.addEventListener("loadend",function(){try{a(shp.parseZip(t.result))}catch(e){console.error(e),o(),alert(e)}}),t.readAsArrayBuffer(r)):r.name.match(".*.gpx")?(t.addEventListener("loadend",function(){try{var e=(new DOMParser).parseFromString(t.result,"text/xml"),r=toGeoJSON.gpx(e);r.features[0].geometry.coordinates.forEach(function(e){e.length=2,delete e[2]}),a(r)}catch(e){console.error(e),o(),alert(e)}}),t.readAsText(r)):r.name.match(".*.kml")?(t.addEventListener("loadend",function(){try{var e=(new DOMParser).parseFromString(t.result,"text/xml"),r=toGeoJSON.kml(e);a(r)}catch(e){console.error(e),o(),alert(e)}}),t.readAsText(r)):alert("This input file is not supported")}};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/controllers/search.js */
Controllers.Search={execute_search:function(o,n){$.getJSON("https://maps.google.com/maps/api/geocode/json?bounds="+Config.defaults["bounding-box"][1]+","+Config.defaults["bounding-box"][0]+"|"+Config.defaults["bounding-box"][3]+","+Config.defaults["bounding-box"][2]+"&address="+encodeURIComponent(o)+"&key=AIzaSyAOCQaASjkuA5J9S_6Nn0T7oz4VnFsh5dU",function(e,d,s){n(o,e)})}};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/controllers/layers.js */
Controllers.Layers={test_pickler:function(){_.each(Renderers,function(e){e.pickle&&e.pickle({leaflet_layer_ids:[],parameters:{}})})},update_layers_parameters:function(e,r){var a=_.findIndex(e.get("layers.active"),{id:r.id});e.update("layers.active."+a+".parameters")},mark_layer_as_unloaded:function(e,r){var a=stringify(active_layer.parameters);e.set("layers_loading_states."+r+"."+a,!1)},mark_layer_as_loaded:function(e,r,a,t){var l=stringify(r.parameters),s=e.get("layers_loading_states."+r.layer_default_id+"."+l)||{loaded:0,errors:0};if(0===s.loaded||!a||t){a?s.loaded=s.loaded+1:s.errors=s.errors+1,e.set("layers_loading_states."+r.layer_default_id,s);var n=_.findIndex(e.get("layers.active"),{id:r.id});e.set("layers.active."+n,r)}},sort_active_layers:function(e){return _.sortBy(e,function(r){var a=_.findIndex(e,r),t="";return r.sort_key?t=sort_key.toString():r.parameters.no_sorting?t="A"+r.name:(t="Z",t+=_.padLeft(a,25,"0")),t})},is_active_layer:function(e,r){return!!_.find(e,{layer_default_id:r,copied_source:null})},counter:0,new_active_layer:function(e,r){var a=Renderers[r.renderer_id||r.id];Controllers.Layers.counter=Controllers.Layers.counter+1;var t=Object.assign({},a.parameters||{},r.parameters||{});return{id:"layer:"+Controllers.Layers.counter,layer_default_id:r.id,parameters:t,renderer_id:r.id,leaflet_layer_ids:[],is_collapsed:!1,is_hidden:!1,name:r.name,legend_url:null,copied_source:null}},pickle_active_layer:function(e){var r=_.cloneDeep(e);r.leaflet_layer_ids=[];var a=Renderers[r.renderer_id];return a&&a.pickle(r),r.legend_url&&(r.legend_url=null),r},add_imported_layer:function(e,r,a){_.cloneDeep(e.get("layers.active"));Controllers.Layers.counter=Controllers.Layers.counter+1;var t="imported_layer:"+Controllers.Layers.counter;e.push("layers.defaults",{folder:"User Imports",id:t,name:r}),RendererTemplates.imported_geojson(t,{templates:{},name:r,data:a.type?a:JSON.parse(a)}),Controllers.Layers.toggle_layer_active(e,t),e.push("layers.available_ids",t)},add_cloned_layer:function(e,r,a){var t=_.cloneDeep(e.get("layers.active")),l=_.cloneDeep(r);Controllers.Layers.counter=Controllers.Layers.counter+1,l.id="cloned_layer:"+Controllers.Layers.counter,l.leaflet_layer_ids=[],l.copied_source=r.id,l.name=Renderers[r.renderer_id].clone_layer_name(r),l.is_collapsed=!0,t.unshift(l),e.set("layers.active",Controllers.Layers.sort_active_layers(t))},remove_active:function(e,r){var a=_.cloneDeep(e.get("layers.active"));_.remove(a,{id:r.get("id")}),e.set("layers.active",Controllers.Layers.sort_active_layers(a))},visible_all_layers:function(e,r){var a=_.cloneDeep(e.get("layers.active"));_.each(a,function(e){e.is_hidden=!1}),e.set("layers.active",Controllers.Layers.sort_active_layers(a))},hide_all_layers:function(e,r){var a=_.cloneDeep(e.get("layers.active"));_.each(a,function(e){e.is_hidden=!0}),e.set("layers.active",Controllers.Layers.sort_active_layers(a))},expand_all_layers:function(e,r){var a=_.cloneDeep(e.get("layers.active"));_.each(a,function(e){e.is_collapsed=!1}),e.set("layers.active",Controllers.Layers.sort_active_layers(a))},collapse_all_layers:function(e,r){var a=_.cloneDeep(e.get("layers.active"));_.each(a,function(e){e.is_collapsed=!0}),e.set("layers.active",Controllers.Layers.sort_active_layers(a))},toggle_active_collapsed:function(e,r){var a=_.cloneDeep(e.get("layers.active")),t=_.find(a,"id",r.get("id"));t.is_collapsed=!t.is_collapsed,e.set("layers.active",Controllers.Layers.sort_active_layers(a))},make_active_hidden:function(e,r){var a=_.cloneDeep(e.get("layers.active"));_.find(a,"id",r.get("id")).is_hidden=!0,e.set("layers.active",Controllers.Layers.sort_active_layers(a))},make_active_visible:function(e,r){var a=_.cloneDeep(e.get("layers.active"));_.find(a,"id",r.get("id")).is_hidden=!1,e.set("layers.active",Controllers.Layers.sort_active_layers(a))},move_active_to_top:function(e,r){var a=_.cloneDeep(e.get("layers.active")),t=_.find(a,{id:r.get("id")});_.remove(a,{id:r.get("id")}),a.unshift(t),e.set("layers.active",Controllers.Layers.sort_active_layers(a))},toggle_layer_active:function(e,r){var a=e.get("layers.defaults"),t=_.cloneDeep(e.get("layers.active")),l=_.find(t,{layer_default_id:r,copied_source:null});if(l)_.remove(t,l);else{var s=Controllers.Layers.new_active_layer(e.get("map"),_.find(a,"id",r));t.unshift(s)}e.set("layers.active",Controllers.Layers.sort_active_layers(t)),e.set("active_layers_added_count",e.get("active_layers_added_count")+1)},force_layers_active:function(e,r){var a=e.get("layers.defaults"),t=_.map(r,function(r){var t=_.find(e.get("layers.active"),{layer_default_id:r,copied_source:null});return t||(t=Controllers.Layers.new_active_layer(e.get("map"),_.find(a,"id",r))),t});e.set("layers.active",Controllers.Layers.sort_active_layers(t))},set_available_layer_ids:function(e,r){var a=e.get("layers.defaults");_.filter(r,function(e){return _.find(a,"id",e)});e.set("layers.available_ids",r)},ensure_active_are_available:function(e){var r=e.get("layers.active")||[],a=e.get("layers.available_ids");e.set("layers.active",_.filter(r,function(e){return _.contains(a,e.id)||_.contains(a,e.renderer_id)}))},add_tree_node:function(e,r,a,t,l){var s=l>0;if(0===a.length)r.children=r.children.concat(t);else{var n=a.shift(),i=_.find(r.children,function(e){return e.folder_name===n});i||(i={folder_name:n,is_expanded:s,children:[]},r.children=r.children.concat(i)),Controllers.Layers.add_tree_node(e,i,a,t,l-1)}return r.children=_.sortBy(r.children,function(r){var a=_.find(e,"id",r),t="";return a?(t="A",a.sort_key?t+=a.sort_key:t+=a.name):t="Z"+r.folder_name,t}),r},update_layer_tree:function(e){var r={folder_name:null,is_expanded:!0,children:[]},a=e.get("layers.available_ids"),t=e.get("layers.defaults"),l=e.get("layers.search_string").toLowerCase(),s=e.get("sectors.selected");_.each(a,function(e){var a=_.find(t,"id",e);if(a){var n=null,i=!1;_.isEmpty(l)?n=!0:i=n=_.includes((a.name||"").toLowerCase(),l)||_.includes((a.description||"").toLowerCase(),l)||a.id.toLowerCase()===l,""===a.folder&&(n=!1),n&&s.length>0&&(n=_.any(a.sectors,function(e){return _.any(s,function(r){return r.toLowerCase()===e.toLowerCase()})})),n&&(r=Controllers.Layers.add_tree_node(t,r,a.folder.split("."),e,i?1e3:1))}}),e.set("layers.tree",r)},deactivate_all:function(e){e.set("layers.active",[])}};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/controllers/sharing.js */
Controllers.Sharing={version:1,get_save_data:function(a){return{version:Controllers.Sharing.version,active_layers:_.map(a.get("layers.active"),function(a){return Controllers.Layers.pickle_active_layer(a)}),map_state:a.get("map_state")}},open_sharing:function(a,e){a.set("sharing_modal.open",!0),a.set("sharing_modal.token",null),a.set("sharing_modal.copied",!1)},sharing_url:function(a){var e=URI(window.location.href);return e.removeSearch("map_state_token"),e.addSearch("map_state_token",a),e.toString()},add_token_copy:function(a){var e=$("#sharing_copy_button");new ZeroClipboard(e).on("copy",function(e){a.set("sharing_modal.copied",!0),e.clipboardData.setData("text/plain",Controllers.Sharing.sharing_url(a.get("sharing_modal.token"))),setTimeout(function(){a.set("sharing_modal.copied",!1)},3e3)})},hide_sharing:function(a,e){a.set("sharing_modal.open",!1)},load_active_layers:function(a,e){var t=JSON.parse(e);t.version!==Controllers.Sharing.version?alert("This data is not the correct version. Sorry!"):(a.set("layers.active",t.data),a.set("sharing_modal.open",!1))},save_state:function(a,e){$.ajax({url:"https://repository.nescaum-ccsc-dataservices.com/map_states",method:"POST",contentType:"application/json",data:JSON.stringify({map_state:JSON.stringify(a)}),success:function(a){e(a.token)}})},load_state:function(a,e,t){e.set("sharing_modal_loading",!0),$.ajax({url:CDN("https://repository.nescaum-ccsc-dataservices.com/map_states/"+a),dataType:"json",success:function(a){var n=JSON.parse(a.data);n.version!=Controllers.Sharing.version?alert("Ack! We can't load this saved map!"):(e.set("layers.active",n.active_layers),t.setView(n.map_state.center,n.map_state.zoom)),t.invalidateSize(),setTimeout(function(){e.set("sharing_modal_loading",!1)},1500)}})}};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/controllers/feature_info.js */
Controllers.FeatureInfo={get_gfi_url:function(e,t,r){var n={xmin:r.getBounds().getWest(),xmax:r.getBounds().getEast(),ymin:r.getBounds().getSouth(),ymax:r.getBounds().getNorth(),bbox:_.map([r.getBounds().getWest(),r.getBounds().getSouth(),r.getBounds().getEast(),r.getBounds().getNorth()],function(e){return e.toFixed(6)}).join(","),width:r.getSize().x,height:r.getSize().y,lat:t.latlng.lat,lng:t.latlng.lng,x:Math.round(r.layerPointToContainerPoint(t.layerPoint).x),y:Math.round(r.layerPointToContainerPoint(t.layerPoint).y)};return _.template(e)(n)},are_feature_info_layers_active:function(e){return _.filter(e,function(e){return Renderers[e.renderer_id].get_feature_info_url}).length>0},layer_has_click_info:function(e){return!(!e||!Renderers[e.renderer_id])&&!!(Renderers[e.renderer_id].find_geo_json||Renderers[e.renderer_id].get_feature_info_xml_url||Renderers[e.renderer_id].get_feature_info_url)},get_details:function(e,t){var r=e.get("layers.active"),n=e.get("map"),a=_.filter(r,function(e){return!e.is_hidden&&Controllers.FeatureInfo.layer_has_click_info(e)});a.length>0&&(e.set("map_details.feature_info_responses",{}),e.set("map_details.feature_info_requests",[]),e.set("map_details.location",t.latlng),_.each(a,function(r){var a=Renderers[r.renderer_id],o=_.cloneDeep(e.get("map_details.feature_info_requests")),i=r.id+"-"+Date.now();if(o.push({name:r.name,active_layer:r,response_id:i}),e.set("map_details.feature_info_requests",_.sortBy(o,"name")),a.get_feature_info_url){var s=a.get_feature_info_url(r),l=Controllers.FeatureInfo.get_gfi_url(s,t,n);$.ajax(l,{dataType:"json",success:function(n){e.get("map_details.location")===t.latlng&&e.set("map_details.feature_info_responses."+i,{active_layer:r,json:n})},error:function(n){e.get("map_details.location")===t.latlng&&e.set("map_details.feature_info_responses."+i,{active_layer:r,error:n.responseText})}})}else if(a.get_feature_info_xml_url){var s=a.get_feature_info_xml_url(r),l=Controllers.FeatureInfo.get_gfi_url(s,t,n);$.ajax(l,{dataType:"xml",success:function(n){if(e.get("map_details.location")===t.latlng){var a=[];try{_.each($(n).find("FIELDS"),function(e){var t={};_.each(e.attributes,function(e){t[e.nodeName]=e.nodeValue}),a.push(t)})}catch(e){}e.set("map_details.feature_info_responses."+i,{active_layer:r,xml_output:a,xml:n})}},error:function(n){e.get("map_details.location")===t.latlng&&e.set("map_details.feature_info_responses."+i,{active_layer:r,error:n.responseText})}})}else if(a.find_geo_json){var u=a.find_geo_json(n,r,t);if(u)e.set("map_details.feature_info_responses."+i,{active_layer:r,geojson:u});else{var f=e.get("map_details.feature_info_requests");e.set("map_details.feature_info_requests",_.without(f,_.find(f,{response_id:i})))}}}))}};
</script>

    <script> var Views = {}; </script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/views/utils.js */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ViewUtils={json:function(n){var t=[],e=JSON.stringify(n,function(n,e){if("object"===(void 0===e?"undefined":_typeof(e))&&null!==e){if(-1!==t.indexOf(e))return;t.push(e)}return e});return t=null,e},console:function(n){window.console.log(n)},uniq_on_prop:function(n,t){return _.uniq(n,function(n){return n[t]})},to_fixed:function(n,t){var e=n;return t&&(e=n.toFixed(t)),e},add_sign:function(n){var t=" ";return n>0?t="+":n<0&&(t="-"),"<span class='sign'>"+t+"</span>"+Math.abs(n)},object_entries_count:function(n){return Object.keys(n).length},color_range_labels:function(n,t,e,r,o){e||0===e||(e=2);for(var u=[],i=_.min([n.length,t.length]),l=0;l<i;l++){var a=n[l];a&&(a=a.toFixed(e)),a&&r&&(a=ViewUtils.add_sign(a)),u.push({label:a,value:a,color:t[l]})}u[u.length-1].label="";for(var s=1;s<u.length;s++)u[s].value===u[s-1].value&&(u[s].label="");return u},sort_by:function(n,t){return _.sortBy(n,t)},capitalize:function(n){return _.capitalize(n)},number_of_keys:function(n){return _.keys(n).length},to_sorted_keys_from_hash:function(n){var t=_.reduce(n,function(n,t,e){return n.push([e,t]),n},[]);return _.map(_.sortBy(t,function(n){return n[0]}),function(n){return{key:n[0],value:n[1]}})},to_sorted_values_from_hash:function(n){var t=_.reduce(n,function(n,t,e){return n.push([e,t]),n},[]);return _.map(_.sortBy(t,function(n){return n[1]}),function(n){return{key:n[0],value:n[1]}})},to_month_name:function(n){return{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}[parseInt(n,10)]},shorten_string:function(n,t,e){for(var r=[" ","/","&"],o=.8*t,n=(e=void 0!==e&&e)?n.split("").reverse().join(""):n,u="",i=0;i<t-1&&(u+=n[i],!(i>=o&&r.indexOf(n[i])>=0));i++);return e?u.split("").reverse().join(""):u},shorten_url:function(n,t){var e=(t=void 0!==t?t:50)/2;return n&&n.length>0?(n=n.replace("http://","").replace("https://","")).length<=t?n:ViewUtils.shorten_string(n,e,!1)+".."+ViewUtils.shorten_string(n,e,!0):n},layer_defaults:function(n){var t=null;return _.each(available_layers,function(e){e.id==n&&(t=e)}),t}};
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/views/map.js */
var LeafletMap=L.map("map",{zoomControl:!1}),z_indexes={base:0,layers:1e3};L.control.scale().addTo(LeafletMap),LeafletMap.on("zoomend",function(e){Views.ControlPanel.set("map_state.zoom",LeafletMap.getZoom())}),LeafletMap.on("moveend",function(e){Views.ControlPanel.set("map_state.center",LeafletMap.getCenter())}),LeafletMap.on("click",function(e){Controllers.FeatureInfo.get_details(Views.ControlPanel,e)}),LeafletMap.createPane(BASELAYER_PANE);
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/views/control_panel.js */
Views.ControlPanel=new Ractive({template:"#control_panel_template",el:"control_panel_root",data:{u:ViewUtils,CDN:CDN,GEOSERVER:GEOSERVER,sharing_url:function(e){return Controllers.Sharing.sharing_url(e)},out_of_view_layers:function(e,n){return _.select(e,function(e){var o=e.parameters.min_zoom||-1,r=e.parameters.max_zoom||100;return!e.is_hidden&&(n<o||n>r)})},all_active_hidden:function(e){return!0===_.uniq(_.pluck(e,"is_hidden"))[0]},layer_load_state_error_count:function(e,n){return(e[n]?e[n].errors:0)+" Errors"},fixed_precision:function(e,n){return e?e.toFixed(n):e},layer_load_state:function(e,n){var o="",r=e[n]?e[n].errors:0,t=e[n]?e[n].loaded:0;return r>0&&0===t?o="danger":r>0&&t>0?o="warning":0===r&&t>0&&(o="success"),o},all_active_collapsed:function(e){return!0===_.uniq(_.pluck(e,"is_collapsed"))[0]},able_to_copy:function(e){return!!(e&&Renderers[e.renderer_id]&&Renderers[e.renderer_id].clone_layer_name)},layer_has_standalone_wizard:function(e){return!!e&&!(!e.templates||!e.templates.wizard)},layer_has_click_info:function(e){return Controllers.FeatureInfo.layer_has_click_info(e)},get_layer_defaults:function(e,n){return _.find(e,"id",n)||{}},is_active_layer:function(e,n){return Controllers.Layers.is_active_layer(e,n)},is_sector_selected:function(e,n){return _.contains(e,n)},selected_sectors_text:function(e){return 0===e.length?"All Sectors":e.join(", ")},sectors:{all:[],selected:[]},layers:{defaults:[],available_ids:[],active:[],tree:[]},map:LeafletMap,has_geolocation:!!navigator.geolocation,layer_controls:{current_layer_info:null,active_tab:"layers",search_string:"",search_results:[],tray:{open:!0}},layers_loading_states:{},map_state:{zoom:null,center:null},zoom_max:16,parameters:{},base_layers:[],active_base_layer:null,map_controls:{active_base_layer:null,base_layer_control_open:!1},map_details:{feature_info_requests:null,location:null},sharing_modal:{open:!1},wizard:{adding_layers_popup:!1,open:!1,current_step:0,steps:["welcome","sidebar_intro","base_layers","adding_things","find_more_info","order_layers","using_legends_tab","printing","advanced_layer_controls"]}},decorators:{}}),Views.ControlPanel.on({"remove-layer-add-notice":function(e){e.original.stopPropagation(),e.original.preventDefault(),Views.ControlPanel.set("wizard.adding_layers_popup",!1)},"show-layers-control":function(e){var n=Views.ControlPanel;"layers"===n.get("layer_controls.active_tab")?n.set("layer_controls.tray.open",!n.get("layer_controls.tray.open")):(n.set("layer_controls.tray.open",!0),n.set("layer_controls.active_tab","layers"))},"show-details-control":function(e){var n=Views.ControlPanel;"details"===n.get("layer_controls.active_tab")?n.set("layer_controls.tray.open",!n.get("layer_controls.tray.open")):(n.set("layer_controls.tray.open",!0),n.set("layer_controls.active_tab","details"))},"show-search-control":function(e){var n=Views.ControlPanel;"search"===n.get("layer_controls.active_tab")?n.set("layer_controls.tray.open",!n.get("layer_controls.tray.open")):(n.set("layer_controls.tray.open",!0),n.set("layer_controls.active_tab","search"))},"map-zoom-in":function(e){Views.ControlPanel.get("map").zoomIn()},"map-zoom-out":function(e){Views.ControlPanel.get("map").zoomOut()},"map-set-view":function(e,n){Views.ControlPanel.get("map").setView(e,n)},"map-set-bbox":function(e,n,o,r){Views.ControlPanel.get("map").fitBounds(new L.LatLngBounds(new L.LatLng(n,e),new L.LatLng(r,o)))},"map-zoom-home":function(e){var n=Views.ControlPanel.get("map"),o=Views.ControlPanel.get("parameters.bounding-box");o?n.fitBounds(new L.LatLngBounds(new L.LatLng(o[1],o[0]),new L.LatLng(o[3],o[2]))):n.setView([42.4,-76],6)},"map-zoom-me":function(e){var n=Views.ControlPanel.get("map");navigator.geolocation.getCurrentPosition(function(e){n.setView({lat:e.coords.latitude,lng:e.coords.longitude},14)},function(){console.log("Failed to geo-locate")},{enableHighAccuracy:!0,timeout:5e3,maximumAge:72e4})},"update-layers-parameters":function(e){var n=Views.ControlPanel;Controllers.Layers.update_layers_parameters(n,e)},"tile-layer-loaded":function(e,n){var o=Views.ControlPanel;Controllers.Layers.mark_layer_as_loaded(o,e,!0,n)},"tile-layer-loading-error":function(e){var n=Views.ControlPanel;Controllers.Layers.mark_layer_as_loaded(n,e,!1)},"activate-base-layer":function(e){Views.ControlPanel.set("map_controls.active_base_layer",e.get().name)},"toggle-base-layer-control":function(e){var n=Views.ControlPanel;n.set("map_controls.base_layer_control_open",!n.get("map_controls.base_layer_control_open"))},"toggle-layer-active":function(e){var n=Views.ControlPanel;Controllers.Layers.toggle_layer_active(n,e.get()),"true"!==document.cookie.replace(/(?:(?:^|.*;\s*)seen_adding_layers_popup\s*\=\s*([^;]*).*$)|^.*$/,"$1")&&Views.ControlPanel.set("wizard.adding_layers_popup",!0),document.cookie="seen_adding_layers_popup=true; expires=Fri, 31 Dec 9999 23:59:59 GMT"},"move-active-to-top":function(e){var n=Views.ControlPanel;Controllers.Layers.move_active_to_top(n,e)},"make-active-hidden":function(e){var n=Views.ControlPanel;Controllers.Layers.make_active_hidden(n,e)},"make-active-visible":function(e){var n=Views.ControlPanel;Controllers.Layers.make_active_visible(n,e)},"expand-all-layers":function(e){var n=Views.ControlPanel;Controllers.Layers.expand_all_layers(n,e)},"visible-all-layers":function(e){var n=Views.ControlPanel;Controllers.Layers.visible_all_layers(n,e)},"hide-all-layers":function(e){var n=Views.ControlPanel;Controllers.Layers.hide_all_layers(n,e)},"collapse-all-layers":function(e){var n=Views.ControlPanel;Controllers.Layers.collapse_all_layers(n,e)},"toggle-active-collapsed":function(e){var n=Views.ControlPanel;Controllers.Layers.toggle_active_collapsed(n,e)},"remove-active":function(e){var n=Views.ControlPanel;Controllers.Layers.remove_active(n,e)},"toggle-layer-group-collapse":function(e){var n=Views.ControlPanel;e.get().is_expanded=!e.get().is_expanded,n.update(e.resolve())},"show-layer-info":function(e){var n=Views.ControlPanel;e.original.stopPropagation(),e.original.preventDefault(),n.set("layer_controls.current_layer_info",e.get())},"show-active-layer-info":function(e){Views.ControlPanel.set("layer_controls.current_layer_info",e.get().layer_default_id),e.original.stopPropagation(),e.original.preventDefault()},"hide-feature-info-modal":function(e){Views.ControlPanel.set("map_details.location",null)},"hide-layer-info-modal":function(e){Views.ControlPanel.set("layer_controls.current_layer_info",null)},"deactivate-all-layers":function(e){Controllers.Layers.deactivate_all(Views.ControlPanel)},"zoom-to-search-result":function(e){Views.ControlPanel.get("map").fitBounds([[e.get().geometry.viewport.southwest.lat,e.get().geometry.viewport.southwest.lng],[e.get().geometry.viewport.northeast.lat,e.get().geometry.viewport.northeast.lng]])},"print-map":function(e){var n=Views.ControlPanel,o=n.get("layer_controls.tray.open");n.set("layer_controls.tray.open",!1),window.print(),n.set("layer_controls.tray.open",o)},"clear-layers-search-query":function(e){Views.ControlPanel.set("layers.search_string",""),$("#layers_search_input").focus()},"clear-search-query":function(e){Views.ControlPanel.set("layer_controls.search_string",""),$("#search_input").focus()},"clone-active-layer":function(e){var n=Views.ControlPanel;Controllers.Layers.add_cloned_layer(n,e.get(),"testly")},"open-sharing-modal":function(e){var n=Views.ControlPanel;Controllers.Sharing.open_sharing(n,e)},"request-share-link-token":function(e){Views.ControlPanel.set("sharing_modal.token","loading"),Controllers.Sharing.save_state(Controllers.Sharing.get_save_data(Views.ControlPanel),function(e){Views.ControlPanel.set("sharing_modal.token",e),Controllers.Sharing.add_token_copy(Views.ControlPanel)})},"hide-sharing-modal":function(e){var n=Views.ControlPanel;Controllers.Sharing.hide_sharing(n,e)},"show-wizard":function(e){var n=Views.ControlPanel;n.get("wizard.current_step")&&n.set("wizard.current_step",0),n.set("wizard.open",!0)},"next-wizard":function(e){var n=Views.ControlPanel;n.set("wizard.current_step",(1+n.get("wizard.current_step"))%n.get("wizard.steps").length)},"wizard-sidebar-intro":function(e){Views.ControlPanel.set("wizard.current_step",_.findIndex(Views.ControlPanel.get("wizard.steps"),function(e){return"sidebar_intro"===e}))},"wizard-base-layers":function(e){Views.ControlPanel.set("wizard.current_step",_.findIndex(Views.ControlPanel.get("wizard.steps"),function(e){return"base_layers"===e}))},"wizard-adding-things":function(e){Views.ControlPanel.set("wizard.current_step",_.findIndex(Views.ControlPanel.get("wizard.steps"),function(e){return"adding_things"===e}))},"wizard-find-more-info":function(e){Views.ControlPanel.set("wizard.current_step",_.findIndex(Views.ControlPanel.get("wizard.steps"),function(e){return"find_more_info"===e}))},"wizard-order-layers":function(e){Views.ControlPanel.set("wizard.current_step",_.findIndex(Views.ControlPanel.get("wizard.steps"),function(e){return"order_layers"===e}))},"wizard-using-legends-tab":function(e){Views.ControlPanel.set("wizard.current_step",_.findIndex(Views.ControlPanel.get("wizard.steps"),function(e){return"using_legends_tab"===e}))},"wizard-printing":function(e){Views.ControlPanel.set("wizard.current_step",_.findIndex(Views.ControlPanel.get("wizard.steps"),function(e){return"printing"===e}))},"wizard-advanced-layer-controls":function(e){Views.ControlPanel.set("wizard.current_step",_.findIndex(Views.ControlPanel.get("wizard.steps"),function(e){return"advanced_layer_controls"===e}))},"prev-wizard":function(e){var n=Views.ControlPanel,o=n.get("wizard.current_step"),r=n.get("wizard.steps").length,t=o-1;t<0&&(t+=r),n.set("wizard.current_step",t)},"show-standalone-wizard":function(e){Views.ControlPanel.set("wizard.standalone",e.get())},"close-standalone-wizard":function(e){Views.ControlPanel.set("wizard.standalone",null)},"close-wizard":function(e){Views.ControlPanel.set("wizard.open",!1)},"toggle-show-feature-info-response-details":function(e){var n=Views.ControlPanel;e.get().show_error_details=!e.get().show_error_details,n.update(e.resolve())},"zoom-to-view-layer":function(e){var n=Views.ControlPanel,o=Views.ControlPanel.get("map"),r=n.get("map_state.zoom"),t=e.get().parameters.min_zoom,a=e.get().parameters.max_zoom;t&&r<t?o.setZoom(t):a&&r>a&&o.setZoom(a)},"toggle-sector-dropdown":function(e){var n=Views.ControlPanel;n.set("sectors.show_dropdown",!n.get("sectors.show_dropdown"))},"toggle-sector-selection":function(e){var n=Views.ControlPanel,o="sectors.selected",r=n.get(o);_.contains(r,e.get())?n.set(o,_.without(r,e.get())):n.set(o,r.concat(e.get()))},"clear-sector-dropdown":function(e){var n=Views.ControlPanel;n.get("sectors.selected");n.set("sectors.selected",[]),n.set("sectors.show_dropdown",!1)},"open-layer-import-modal":function(e){Views.ControlPanel.set("layer_import.show_modal",!0),e.original.stopPropagation(),e.original.preventDefault()},"close-layer-import-modal":function(e){Views.ControlPanel.set("layer_import.show_modal",!1),e.original.stopPropagation(),e.original.preventDefault()},"upload-layer-import-file":function(e){var n=Views.ControlPanel;Controllers.LayerImport.import_layer(n,e.get().layer_import.import_file[0]),e.original.stopPropagation(),e.original.preventDefault()}}),Views.ControlPanel.observe("layer_controls.search_string",function(e){var n=Views.ControlPanel;e.length>1?Controllers.Search.execute_search(e,function(e,o){console.log(e,o),n.get("layer_controls.search_string")===e&&n.set("layer_controls.search_results",o)}):n.set("layer_controls.search_results",[])}),Views.ControlPanel.observe("parameters.bounding-box",function(e){var n=Views.ControlPanel.get("map");if(e){var o=new L.LatLng(e[1],e[0]),r=new L.LatLng(e[3],e[2]);n.fitBounds(new L.LatLngBounds(o,r))}}),Views.ControlPanel.observe("parameters.available-layers",function(e){if(e){var n=Views.ControlPanel;Controllers.Layers.set_available_layer_ids(n,e)}}),Views.ControlPanel.observe("parameters.active-layers",function(e){var n=Views.ControlPanel;e&&Controllers.Layers.force_layers_active(n,e)}),Views.ControlPanel.observe("map_controls.active_base_layer",function(e){var n=Views.ControlPanel.get("map"),o=Views.ControlPanel.get("base_layers"),r=_.find(o,function(n){return n.name===e}),t=_.reject(o,r);r&&(_.each(t,function(e){n.hasLayer(e.data)&&n.removeLayer(e.data)}),"None"===r.name||(n.addLayer(r.data),r.data.setZIndex(z_indexes.base)))}),Views.ControlPanel.observe("layers.defaults",function(e){if(e)var n=Views.ControlPanel;n.set("sectors.all",_.uniq(_.compact(_.flatten(_.pluck(e,"sectors")))).sort())}),Views.ControlPanel.observe("layers.available_ids",function(e){if(e){var n=Views.ControlPanel;Controllers.Layers.ensure_active_are_available(n),Controllers.Layers.update_layer_tree(n)}}),Views.ControlPanel.observe("sectors.selected",function(e){var n=Views.ControlPanel;Controllers.Layers.update_layer_tree(n),Controllers.Layers.expand_all_layers(n)}),Views.ControlPanel.observe("layers.search_string",function(e){var n=Views.ControlPanel;Controllers.Layers.update_layer_tree(n)}),Views.ControlPanel.observe("layers.active",function(e,n){var o=Views.ControlPanel.get("map"),r=Views.ControlPanel;_.each(n,function(n){_.find(e,"id",n.id)||Renderers.remove(o,n)}),_.map(e,function(n){var r=_.findIndex(_.cloneDeep(e).reverse(),"id",n.id),t=z_indexes.layers+r;Renderers.render(o,n,t)}),r.update("layers.active"),o.closePopup()}),Views.ControlPanel.observe("map_details.location",function(e){var n=Views.ControlPanel.get("map"),o=Views.ControlPanel,r=o.get("map_details.location_marker");e?(r&&r.getLatLng()!==e&&(n.removeLayer(r),r=null,o.set("map_details.location_marker",r)),r||(r=new L.marker(e),o.set("map_details.location_marker",r),r.addTo(n))):r&&(n.removeLayer(r),r=null,o.set("map_details.location_marker",r))}),Views.ControlPanel.observe("base_layers",function(e){!Views.ControlPanel.get("map_controls.active_base_layer")&&e.length>0&&Views.ControlPanel.set("map_controls.active_base_layer",e[0].name)}),Views.ControlPanel.observe("layer_controls.tray.open",function(e){$("#map").toggleClass("tray-open",e);var n=Views.ControlPanel.get("map");n&&n.invalidateSize()});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/constants.js */
Renderers.Constants={soils_eco_desc:{0:"N/A",2:"Acadian-Appalachian Alpine Tundra",3:"Columbia Plateau Vernal Pool",4:"Florida River Floodplain Marsh",10:"North-Central Interior Dry Oak Forest and Woodland",11:"North-Central Interior Dry-Mesic Oak Forest and Woodland",12:"Great Basin Foothill and Lower Montane Riparian Woodland and Shrubland",13:"Ozark-Ouachita Mesic Hardwood Forest",14:"Edwards Plateau Limestone Shrubland",15:"Edwards Plateau Mesic Canyon",17:"Sonoran Mid-Elevation Desert Scrub",20:"Madrean Oriental Chaparral",23:"Great Lakes Wet-Mesic Lakeplain Prairie",26:"Southern Ridgeand Valley Calcareous Gladeand Woodland",27:"Boreal Jack Pine-Black Spruce Forest",28:"Boreal White Spruce-Fir-Hardwood Forest",29:"Boreal Aspen-Birch Forest",30:"Laurentian Acidic Rocky Outcrop",32:"Chihuahuan Mixed Salt Desert Scrub",33:"Great Basin Semi-Desert Chaparral",34:"North Pacific Montane Grassland",35:"Temperate Pacific Subalpine-Montane Wet Meadow",36:"Modoc Basalt Flow Vernal Pool",38:"Northern Rocky Mountain Montane-Foothill Deciduous Shrubland",39:"Columbia Basin Foothill and Canyon Dry Grassland",40:"Tamaulipan Arroyo Shrubland",41:"Tamaulipan Palm Grove Riparian Forest",42:"Tamaulipan Floodplain",44:"Tamaulipan Tallgrass Grassland",45:"Tamaulipan Clay Grassland",46:"Tamaulipan Calcareous Thornscrub",47:"Tamaulipan Savanna Grassland",48:"Tamaulipan  Mesquite Upland Scrub",49:"Tamaulipan Mixed Deciduous Thornscrub",50:"Northwestern Great Plains Highland White Spruce Woodland",51:"Western Great Plains Riparian",52:"Rocky Mountain Foothill Limber Pine-Juniper Woodland",53:"California Central Valley  Alkali Sink",55:"South Coastal California Vernal Pool",56:"Northern California Claypan Vernal Pool",57:"Mediterranean California Alkali Marsh",58:"California Central Valley Riparian Woodland and Shrubland",59:"Mediterranean California Foothill and Lower Montane Riparian Woodland",60:"California Mesic Serpentine Grassland",61:"California Central Valley and Southern Coastal Grassland",63:"Mediterranean California Subalpine Meadow",64:"Mediterranean California Alpine Dry Tundra",65:"Southern California Oak Woodland and Savanna",66:"California Coastal Live Oak Woodland and Savanna",67:"California Lower Montane Blue Oak-Foothill Pine Woodland and Savanna",68:"California Central Valley Mixed Oak Savanna",69:"Southern California Coastal Scrub",70:"Northern California Coastal Scrub",71:"Northernand Central California Dry-Mesic Chaparral",72:"Southern California Dry-Mesic Chaparral",73:"California Maritime Chaparral",74:"Mediterranean California Mesic Serpentine Woodland and Chaparral",75:"California Xeric Serpentine Chaparral",76:"California Mesic Chaparral",77:"California Montane Woodland and Chaparral",78:"Sierra Nevada Alpine Dwarf-Shrubland",79:"Mediterranean California Lower Montane Black Oak-Conifer Forest and Woodland",80:"California Coastal Closed-Cone Conifer Forestand Woodland",81:"California Coastal Redwood Forest",82:"Central and Southern California Mixed Evergreen Woodland",83:"Mediterranean California Mixed Evergreen Forest",84:"California Montane Jeffrey Pine-(Ponderosa Pine) Woodland",85:"Klamath-Siskiyou Lower Montane Serpentine Mixed Conifer Woodland",86:"Mediterranean California Dry-Mesic Mixed Conifer Forest and Woodland",87:"Mediterranean California Mesic Mixed Conifer Forestand Woodland",88:"Klamath-Siskiyou Upper Montane Serpentine Mixed Conifer Woodland",89:"Mediterranean California Red Fir Forest",90:"Sierra Nevada Subalpine Lodgepole Pine Forest and Woodland",91:"Northern California Mesic Subalpine Woodland",92:"Mediterranean California Subalpine Woodland",93:"Mediterranean California Mixed Oak Woodland",94:"Mediterranean California Southern Coastal Dune",95:"Mediterranean California Northern Coastal Dune",96:"Mediterranean California Coastal Bluff",98:"Southern California Coast Ranges Cliff and Canyon",99:"Central California Coast Ranges Cliff and Canyon",100:"Klamath-Siskiyou Cliff and Outcrop",101:"Sierra Nevada Cliff and Canyon",103:"Mediterranean California Alpine Bedrock and Scree",104:"Southern Interior Low Plateau Dry-Mesic Oak Forest",112:"South-Central Interior Mesophytic Forest",113:"Southern Appalachian Oak Forest",114:"North Pacific Maritime Coastal Sand Dune and Strand",116:"Temperate Pacific Freshwater Emergent Marsh",118:"Willamette Valley Wet Prairie",121:"Boreal Depressional Bog",123:"North Pacific Lowland Riparian Forest and Shrubland",124:"North Pacific Montane Riparian Woodland and Shrubland",125:"North Pacific Shrub Swamp",128:"Willamette Valley Upland Prairie and Savanna",129:"North Pacific Avalanche Chute Shrubland",130:"North PacificOak Woodland",132:"Boreal White Spruce Forest and Woodland",133:"North Pacific Broadleaf Landslide Forest and Shrubland",134:"North Pacific Dry Douglas-fir-( Madrone) Forest and Woodland",135:"North Pacific Mesic Western Hemlock-Yellow-cedar Forest",136:"North Pacific Hypermaritime Western Red-cedar-Western Hemlock Forest",137:"North Pacific Hypermaritime Sitka Spruce Forest",140:"Southern Rocky Mountain Juniper Woodland and Savanna",141:"Rocky Mountain Subalpine-Montane Riparian Woodland",142:"Rocky Mountain Subalpine-Montane Riparian Shrubland",143:"Rocky Mountain Subalpine Mesic-Wet Spruce-Fir Forest and Woodland",144:"Rocky Mountain Subalpine-Montane Mesic Meadow",145:"Rocky Mountain Subalpine Dry-Mesic Spruce-Fir Forest and Woodland",146:"Southern Rocky Mountain Mesic Montane Mixed Conifer Forest and Woodland",147:"Southern Rocky Mountain Montane-Subalpine Grassland",148:"Southern Rocky Mountain Dry-Mesic Montane Mixed Conifer Forest and Woodland",149:"Rocky Mountain Lower Montane-Foothill Shrubland",150:"Rocky Mountain Lower Montane-Foothill Riparian Woodland and Shrubland",151:"Rocky Mountain Lodgepole Pine Forest",152:"Rocky Mountain Subalpine-Montane Limber-Bristlecone Pine Woodland",153:"Rocky Mountain GambelOak-Mixed Montane Shrubland",154:"Western Great Plains Foothilland Piedmont Grassland",155:"Rocky Mountain Alpine Turf",156:"Rocky Mountain Cliff, Canyonand Massive Bedrock",157:"Rocky Mountain Bigtooth Maple Ravine Woodland",158:"Rocky Mountain Aspen Forest and Woodland",159:"Rocky Mountain Alpine-Montane Wet Meadow",160:"Rocky Mountain Alpine Fell-Field",161:"Rocky Mountain Alpine Dwarf-Shrubland",162:"Rocky Mountain Alpine Bedrock and Scree",163:"Northern Rocky Mountain Subalpine Woodland and Parkland",164:"Northern Rocky Mountain Subalpine-Upper Montane Grassland",165:"Northern Rocky Mountain Dry-Mesic Montane Mixed Conifer Forest",166:"Northern Rocky Mountain Lower Montane Riparian Woodland and Shrubland",167:"Northern Rocky Mountain Conifer Swamp",168:"Northern Rocky Mountain Mesic Montane Mixed Conifer Forest",171:"MadreanUpper Montane Conifer-Oak Forest and Woodland",172:"Madrean Pinyon-Juniper Woodland",173:"Madrean Lower Montane Pine-Oak Forest and Woodland",174:"Madrean Encinal",175:"Wyoming Basins Dwarf Sagebrush Shrubland and Steppe",176:"Columbia Basin Palouse Prairie",177:"Inter-Mountain Basins Volcanic Rockand Cinder Land",178:"Inter-Mountain Basins Subalpine Limber-Bristlecone Pine Woodland",179:"Inter-Mountain Basins Shale Badland",180:"Inter-Mountain Basins Semi-Desert Shrub-Steppe",181:"Inter-Mountain Basins Semi-Desert Grassland",182:"Inter-Mountain Basins Playa",183:"Inter-Mountain Basins Montane Sagebrush Steppe",184:"Inter-Mountain Basins Mixed Salt Desert Scrub",185:"Inter-Mountain Basins Mat Saltbush Shrubland",186:"Inter-Mountain Basins Juniper Savanna",188:"Inter-Mountain Basins Greasewood Flat",189:"Inter-Mountain Basins Cliffand Canyon",190:"Inter-Mountain Basins Big Sagebrush Steppe",191:"Inter-Mountain Basins Big Sagebrush Shrubland",192:"Inter-Mountain Basins Aspen-Mixed Conifer Forest and Woodland",193:"Inter-Mountain Basins Active and Stabilized Dune",194:"Great Basin Xeric Mixed Sagebrush Shrubland",195:"Great Basin Pinyon-Juniper Woodland",196:"Inter-Mountain Basins Curl-leaf Mountain Mahogany Woodland and Shrubland",197:"Columbia Plateau Scabland Shrubland",198:"Columbia Basin Foothill Riparian Woodland and Shrubland",199:"Colorado Plateau Pinyon-Juniper Woodland",200:"Colorado Plateau Pinyon-Juniper Shrubland",201:"Colorado Plateau Mixed Bedrock Canyon and Tableland",202:"Colorado Plateau Blackbrush-Mormon-tea Shrubland",203:"Colorado Plateau Mixed Low Sagebrush Shrubland",204:"Sonoran Paloverde-Mixed Cacti Desert Scrub",205:"Sonoran GraniteOutcrop Desert Scrub",206:"Sonora-Mojave Semi-Desert Chaparral",207:"Sonora-Mojave Creosotebush-White Bursage Desert Scrub",208:"North American Warm Desert Wash",209:"North American Warm Desert Volcanic Rockland",210:"North American Warm Desert Riparian Woodland and Shrubland",211:"North American Warm Desert Riparian Mesquite Bosque",214:"Sonora-Mojave Mixed Salt Desert Scrub",215:"North American Warm Desert Lower Montane Riparian Woodland and Shrubland",216:"Chihuahuan-Sonoran Desert Bottomland and Swale Grassland",217:"North American Warm Desert Bedrock Cliff and Outcrop",218:"North American Warm Desert Activeand Stabilized Dune",219:"North American Warm Desert Badland",220:"Mojave Mid-Elevation Mixed Desert Scrub",221:"Mogollon Chaparral",222:"Chihuahuan Succulent Desert Scrub",223:"Chihuahuan Stabilized Coppice Dune and Sand Flat Scrub",224:"Chihuahuan Sandy Plains Semi-Desert Grassland",225:"Apacherian-Chihuahuan Semi-Desert Grassland and Steppe",226:"Chihuahuan Mixed Desertand Thorn Scrub",227:"Apacherian-Chihuahuan Mesquite Upland Scrub",228:"Chihuahuan Gypsophilous Grassland and Steppe",229:"Chihuahuan Creosotebush Desert Scrub",230:"Madrean Juniper Savanna",231:"North American Arid West Emergent Marsh",233:"North-CentralOak Barrens",238:"Laurentian-Acadian Northern Pine-(Oak) Forest",239:"Laurentian Pine-Oak Barrens",240:"Ozark-Ouachita Dry-Mesic Oak Forest",241:"Ozark-Ouachita Dry Oak Woodland",242:"South-Central Interior Small Streamand Riparian",243:"South-Central Interior Large Floodplain",245:"Ozark-Ouachita Riparian",247:"North-Central Interior Wet Meadow-Shrub Swamp",248:"North-Central Interior Wet Flatwoods",250:"North-Central Interior Oak Savanna",251:"North-Central Interior Maple-Basswood Forest",252:"North-Central Interior Sandand Gravel Tallgrass Prairie",253:"North-Central Interior Floodplain",254:"North-Central Interior Beech-Maple Forest",255:"Central Interior Highlands Dry Acidic Glade and Barrens",256:"Central Interior Highlands Calcareous Glade and Barrens",257:"Central Interior Calcareous Cliff and Talus",258:"Central Interior Acidic Cliff and Talus",259:"Eastern Great Plains Tallgrass Aspen Parkland",260:"Eastern Great Plains Wet Meadow, Prairie, and Marsh",261:"Northern Tallgrass Prairie",262:"Southeastern Great Plains Tallgrass Prairie",263:"Southern Blackland Tallgrass Prairie",264:"Central Tallgrass Prairie",265:"Crosstimbers Oak Forest and Woodland",266:"Northwestern Great Plains Aspen Forest and Parkland",267:"Western Great Plains Wooded Drawand Ravine",268:"Western Great Plains Floodplain",269:"Northwestern Great Plains Riparian",270:"Northwestern Great Plains Floodplain",271:"Western Great Plains Open Freshwater Depression Wetland",272:"Northwestern Great Plains Mixedgrass Prairie",273:"Western Great Plains Tallgrass Prairie",274:"Western Great Plains Shortgrass Prairie",275:"Western Great Plains Sandhill Steppe",276:"Western Great Plains Sand Prairie",278:"Western Great Plains Mesquite Woodland and Shrubland",279:"Western Great Plains Dry Bur Oak Forest and Woodland",280:"Western Great Plains Closed Depression Wetland",281:"Western Great Plains Cliffand Outcrop",282:"Southwestern Great Plains Canyon",283:"Western Great Plains Badlands",284:"Northwestern Great Plains Shrubland",285:"Great Plains Prairie Pothole",286:"Edwards Plateau Limestone Savanna and Woodland",287:"Central Mixedgrass Prairie",288:"Central Appalachian Stream and Riparian",289:"Central Appalachian River Floodplain",290:"North-Central Appalachian Seepage Fen",291:"North-Central Interior and Appalachian Acidic Peatland",292:"North-Central Interior and Appalachian Rich Swamp",293:"North-Central Appalachian Acidic Swamp",294:"North-Central Appalachian Circumneutral Cliffand Talus",295:"Central Appalachian Alkaline Glade and Woodland",297:"Central Appalachian Pine-Oak Rocky Woodland",298:"Appalachian Shale Barrens",299:"Centraland Southern Appalachian Montane Oak Forest",300:"Appalachian( Hemlock)-Northern Hardwood Forest",301:"Northeastern Interior Dry-Mesic Oak Forest",302:"Central Appalachian Dry Oak-Pine Forest",303:"Northeastern Interior Pine Barrens",304:"Eastern Boreal Floodplain",305:"Laurentian-Acadian Floodplain Forest",309:"Boreal-Laurentian Bog",311:"Acadian Estuary Marsh",313:"Acadian-Appalachian Conifer Seepage Forest",314:"Laurentian-Acadian Alkaline Conifer-Hardwood Swamp",315:"Northern Appalachian-Acadian Conifer-Hardwood Acidic Swamp",317:"Laurentian-Acadian Calcareous Rocky Outcrop",318:"Northern Appalachian-Acadian Rocky Heath Outcrop",320:"Laurentian-Acadian Acidic Cliff and Talus",321:"Acadian-Appalachian Subalpine Woodland and Heath-Krummholz",322:"Acadian-Appalachian Montane Spruce-Fir Forest",323:"Acadian Low-Elevation Spruce-Fir-Hardwood Forest",324:"Laurentian-Acadian Northern Hardwoods Forest",325:"Laurentian-Acadian Pine-Hemlock-Hardwood Forest",326:"AcadianNear-Boreal Spruce Flat",328:"Southern Coastal Plain Dry Upland Hardwood Forest",329:"East Gulf Coastal Plain Small Stream and River Floodplain Forest",331:"East Gulf Coastal Plain Southern Loblolly-Hardwood Flatwoods",332:"East Gulf Coastal Plain Southern Loess Bluff Forest",333:"East Gulf Coastal Plain Jackson Prairie and Woodland",336:"Lower Mississippi Alluvial Plain Grand Prairie",337:"West Gulf Coastal Plain Nonriverine Wet Hardwood Flatwoods",345:"South Texas Sand Sheet Grassland",349:"Panhandle Florida Limestone Glade",350:"Lower Mississippi River Dune Woodland and Forest",351:"Northern Atlantic Coastal Plain Basin Peat Swamp",352:"Northern Atlantic Coastal Plain Basin Swamp and Wet Hardwood Forest",357:"Florida Big Bend Saltand Brackish Tidal Marsh",359:"East Gulf Coastal Plain Interior Shortleaf Pine-Oak Forest",362:"Southern Coastal Plain Limestone Forest",363:"Southern Coastal Plain Hydric Hammock",365:"Atlantic Coastal Plain Xeric River Dune",366:"East Gulf Coastal Plain Interior Upland Longleaf Pine Woodland",367:"Southern Coastal Plain Sinkhole",368:"Southern Coastal Plain Oak Dome and Hammock",369:"Southern Coastal Plain Blackwater River Floodplain Forest",371:"Central Florida Wet Prairieand Herbaceous Seep",375:"West Gulf Coastal Plain Small Stream and River Forest",378:"East Gulf Coastal Plain Northern Dry Upland Hardwood Forest",379:"East Gulf Coastal Plain Northern Loess Plain Oak-Hickory Upland",380:"East Gulf Coastal Plain Northern Loess Bluff Forest",381:"South-Central Interior/Upper Coastal Plain Wet Flatwoods",382:"South-Central Interior/Upper Coastal Plain Flatwoods",384:"East Gulf Coastal Plain Northern Mesic Hardwood Slope Forest",386:"Northern Atlantic Coastal Plain Hardwood Forest",389:"Mississippi Delta Salt and Brackish Tidal Marsh",395:"Central and Upper Texas Coast Dune and Coastal Grassland",397:"Texas Coastal Bend Beach",398:"South Texas Lomas",402:"Southern Ridge and Valley/Cumberland Dry Calcareous Forest",403:"Southern Ridge and Valley Patch Prairie",404:"Southern Piedmont Cliff",405:"East Gulf Coastal Plain Interior Shrub Bog",408:"Central Florida Pine Flatwoods",409:"South Florida Pine Flatwoods",411:"West Gulf Coastal Plain Southern Calcareous Prairie",412:"West Gulf Coastal Plain Pine-Hardwood Forest",413:"West Gulf Coastal Plain Northern Calcareous Prairie",416:"Northern Atlantic Coastal Plain Pitch Pine Lowland",417:"Southernand Central Appalachian Cove Forest",422:"Southwest Florida Coastal Strandand Maritime Hammock",423:"South Florida Pine Rockland",425:"South Florida Cypress Dome",428:"Allegheny-Cumberl and Dry Oak Forest and Woodland",429:"Southern Interior Sinkhole Wall",430:"Southern Interior Calcareous Cliff",431:"Pennyroyal Karst Plain Prairie and Barrens",432:"Eastern Highland Rim Prairie and Barrens",433:"East Gulf Coastal Plain Jackson Plain Prairie and Barrens",435:"Southern and Central Appalachian Mafic Glade and Barrens",438:"Southern Piedmont Mesic Forest",439:"Southern Piedmont Dry Oak-(Pine) Forest",440:"Alabama Ketona Glade and Woodland",441:"Cumberland Sandstone Glade and Barrens",442:"Piedmont Upland Depression Swamp",443:"Nashville Basin Limestone Glade and Woodland",444:"Southern Appalachian Low-Elevation Pine Forest",445:"Southern Appalachian Montane Pine Forest and Woodland",446:"Southern Appalachian Montane Cliff and Talus",448:"Southern Piedmont Gladeand Barrens",451:"Southern Piedmont Small Floodplain and Riparian Forest",453:"Southeastern Interior Longleaf Pine Woodland",454:"Southern Appalachian Seepage Wetland",455:"Ouachita Novaculite Glade and Woodland",456:"Ozark-Ouachita Shortleaf Pine-Oak Forest and Woodland",457:"Arkansas Valley Prairie and Woodland",458:"Cumberland Acidic Cliff and Rockhouse",459:"Ouachita Montane Oak Forest",466:"Piedmont Seepage Wetland",467:"Southern Appalachian Granitic Dome",468:"Southern Appalachian Grass and Shrub Bald",469:"West Gulf Coastal Plain Upland Longleaf Pine Forest and Woodland",473:"Southern Appalachian Spray Cliff",474:"South Florida Hardwood Hammock",475:"South Florida Everglades Sawgrass Marsh",476:"Florida Longleaf Pine Sandhill",477:"Northern Atlantic Coastal Plain Tidal Swamp",478:"Atlantic Coastal Plain Upland Longleaf Pine Woodland",479:"West Gulf Coastal Plain Mesic Hardwood Forest",480:"West Gulf Coastal Plain Pine-Hardwood Flatwoods",487:"Northern Atlantic Coastal Plain Pitch Pine Barrens",488:"Piedmont Hardpan Woodland and Forest",489:"Atlantic Coastal Plain Peatland Pocosin and Canebrake",494:"Central Atlantic Coastal Plain Maritime Forest",499:"Atlantic Coastal Plain Fall-line Sandhills Longleaf Pine Woodland",501:"Atlantic Coastal Plain Streamhead Seepage Swamp, Pocosin,and Baygall",502:"Southern Coastal Plain Nonriverine Cypress Dome",503:"Atlantic Coastal Plain Small Brownwater River Floodplain Forest",508:"Atlantic Coastal Plain Mesic Hardwood Forest",509:"Atlantic Coastal Plain Dryand Dry-Mesic Oak Forest",511:"West Gulf Coastal Plain Herbaceous Seepage Bog",513:"West Gulf Coastal Plain Wet Longleaf Pine Savanna and Flatwoods",516:"Florida Peninsula Inland Scrub",517:"West Gulf Coastal Plain Sandhill Oakand Shortleaf Pine Forest and Woodland",518:"Southern Rocky Mountain Pinyon-Juniper Woodland",520:"Laurentian-Acadian Wet Meadow-Shrub Swamp",521:"Laurentian-Acadian Freshwater Marsh",522:"Inter-Mountain Basins Alkaline Closed Depression",524:"South Florida Hydric Hammock",525:"North-Central Interior Freshwater Marsh",527:"North Pacific Maritime Dry-Mesic Douglas-fir-Western Hemlock Forest",528:"North Pacific Maritime Mesic-Wet Douglas-fir-Western Hemlock Forest",530:"Columbia Plateau Low Sagebrush Steppe",531:"Columbia Plateau Ashand Tuff Badland",532:"Columbia Plateau Western Juniper Woodland and Savanna",534:"Columbia Plateau Silver Sagebrush Seasonally Flooded Shrub-Steppe",535:"East Cascades Oak-Ponderosa Pine Forest and Woodland",536:"East Cascades Mesic Montane Mixed-Conifer Forest and Woodland",537:"Northern Rocky Mountain Western Larch Savanna",538:"Northern Rocky Mountain Ponderosa Pine Woodland and Savanna",542:"North Pacific Alpineand Subalpine Bedrock and Scree",543:"North Pacific Wooded Volcanic Flowage",544:"North Pacific Montane Shrubland",545:"North Pacific Hypermaritime Shruband Herbaceous Headland",546:"North Pacific Herbaceous Baldand Bluff",547:"North Pacific Hardwood-Conifer Swamp",553:"North Pacific Volcanic Rockand Cinder Land",554:"North Pacific Montane Massive Bedrock, Cliffand Talus",555:"North Pacific Coastal Cliffand Bluff",557:"North Pacific Mesic Western Hemlock-Silver Fir Forest",558:"North Pacific Dry-Mesic Silver Fir-Western Hemlock-Douglas-fir Forest",559:"North Pacific Alpineand Subalpine Dry Grassland",560:"Northern Rocky Mountain Lower Montane, Foothill and Valley Grassland",561:"Llano Uplift Acidic Forest, Woodland and Glade",563:"Northern Rocky Mountain Foothill Conifer Wooded Steppe",564:"Middle Rocky Mountain Montane Douglas-fir Forest and Woodland",565:"Rocky Mountain Poor-Site Lodgepole Pine Forest",566:"Northern Rocky Mountain Subalpine Deciduous Shrubland",568:"Sierran-Intermontane Desert Western White Pine-White Fir Woodland",569:"Klamath-Siskiyou Xeromorphic Serpentine Savanna and Chaparral",570:"Southeastern Great Plains Floodplain Terrace",571:"Edwards Plateau Riparian",572:"Edwards Plateau Upland Depression",573:"Edwards Plateau Carbonate Glade and Barrens",574:"Edwards Plateau Dry-Mesic Slope Forest and Woodland",575:"Edwards Plateau Cliff",577:"Chihuahuan Loamy Plains Desert Grassland",578:"Northwestern Great Plains-Black Hills Ponderosa Pine Woodland and Savanna",579:"Southern Rocky Mountain Ponderosa Pine Woodland",580:"Southern Rocky Mountain Ponderosa Pine Savanna",582:"Ozark-Ouachita Shortleaf Pine-Bluestem Woodland",583:"Ozark Prairieand Woodland",584:"Southern Crowley's Ridge Mesic Loess Slope Forest",585:"Mississippi River Alluvial Plain Dry-Mesic Loess Slope Forest",586:"Northern Crowley's Ridge Sand Forest",589:"East-Central Texas Plains Post Oak Savanna and Woodland",590:"West Gulf Coastal Plain Stream Terrace Sandyland Longleaf Pine Woodland",600:"Water",601:"Unknown - pixel count > 20,000",602:"Unknown - pixel count <= 20,000"}};
</script>

    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/aadt.js */
RendererTemplates.wms("aadt",{parameters:{opacity:70,year:2e3,options:{}},url:CDN(GEOSERVER+"/wms"),wms_opts:function(t){return{layers:"ny:aadt",format:"image/png",opacity:0,zIndex:-1,transparent:!0}},get_feature_info_url:function(t){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:aadt&QUERY_LAYERS=ny:aadt&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        Daily Traffic (# vehicles)<br/><img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:aadt&format=image/png\")}}/>\n      </div>\n  ",info_template:"\n    <div class='row'>\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\">\n          <tr>\n            <th>Name</th>\n            <th>AADT Type</th>\n            <th>Avg. Cars/Day</th>\n            <th>Data Link</th>\n          </tr>\n          {{#json.features}}\n            <tr>\n              <td>{{properties.tdv_route}}</td>\n              <td>{{properties.aadt_type}}</td>\n              <td>{{properties.aadt}}</td>\n              <td><a target='_blank'\n                href=\"{{properties.vol_url1}}\">PDF Report</a></td>\n            </tr>\n          {{/json.features}}\n        </table>\n      </div>\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/airmon.js */
RendererTemplates.geojson_points("airmon",{parameters:{opacity:!1,options:{}},url:CDN(URI("https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows").query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:airmon",maxFeatures:100,outputFormat:"application/json"}).toString()),pointToLayer:function(e,t,n,o){return L.marker(n,{pane:o,icon:L.icon({iconUrl:"./img/icons/airmon.png",iconSize:[18,21],iconAnchor:[12,28],popupAnchor:[0,-25],opacity:0}),title:t.properties.name})},popupContents:function(e){return link_url="<a href='http://www.dec.ny.gov/airmon/stationStatus.php?stationNo="+e.properties.dec_uid+"' target='_blank_'>More info</a><br><a href='http://www.dec.ny.gov/airmon/stationStatus.php?stationNo="+e.properties.dec_uid+"' target='_blank_'><img src='http://www.dec.ny.gov/airmon/stationUSAQIGraph.php?stationno="+e.properties.dec_uid+"' width='100%'></a><br>","\n      <strong>"+e.properties.stat_name+"</strong>\n      <br>\n      Location: "+e.properties.location+"\n      <br>"+Renderers.utils.zoom_to_location_link(e.geometry)},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n        <img src={{'./img/icons/airmon.png'}}>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/anthromes.js */
RendererTemplates.wms("anthromes",{parameters:{opacity:70,year_indx:2,options:{years:["1800","1900","2000"]}},wms_opts:function(e){return{layers:"anthromes:anthromes-anthropogenic-biomes-world-v2-"+e.parameters.options.years[e.parameters.year_indx],format:"image/png",opacity:0,zIndex:-1,transparent:!0}},url:CDN("http://sedac.ciesin.columbia.edu/geoserver/wms"),legend_template:"\n    <div class='detail-block opacity'>\n      <label> Model Year: </label>\n      <input type='range' list='anthromes-year-tickmarks' value='{{parameters.year_indx}}' min='0' max='{{parameters.options.years.length - 1}}'>\n      {{parameters.options.years[parameters.year_indx]}}\n    </div>\n\n    <div class='detail-block'>\n      <label> Legend: </label>\n      <img src='{{CDN(\"http://sedac.ciesin.columbia.edu/geoserver/wms?request=GetLegendGraphic&LAYER=anthromes:anthromes-anthropogenic-biomes-world-v2-1700&format=image/png\")}}'>\n    </div>\n  ",info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      {{#json.features}}\n        <div>\n          Value: {{properties.GRAY_INDEX}}\n        </div>\n      {{/json.features}}\n    </div>\n  ",get_feature_info_url:function(e){var a=e.parameters.options.years[e.parameters.year_indx];return CDN("http://sedac.ciesin.columbia.edu/geoserver/wms")+"?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=anthromes:anthromes-anthropogenic-biomes-world-v2-"+a+"&QUERY_LAYERS=anthromes:anthromes-anthropogenic-biomes-world-v2-"+a+"&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>"}});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/armories.js */
RendererTemplates.geojson_points("armories",{parameters:{opacity:!1,options:{}},url:CDN(URI("https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows").query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:armories",maxFeatures:100,outputFormat:"application/json"}).toString()),pointToLayer:function(e,t,r,o){return L.marker(r,{pane:o,icon:L.icon({iconUrl:"./img/icons/armory.png",iconSize:[18,21],iconAnchor:[12,28],popupAnchor:[0,-25],opacity:0}),title:t.properties.site_name+" ARMORY"})},popupContents:function(e){return link_url="<a href='http://www.dec.ny.gov/armories/stationStatus.php?stationNo="+e.properties.dec_uid+"' target='_blank_'>More info</a><br><a href='http://www.dec.ny.gov/armories/stationStatus.php?stationNo="+e.properties.dec_uid+"' target='_blank_'><img src='http://www.dec.ny.gov/armories/stationUSAQIGraph.php?stationno="+e.properties.dec_uid+"' width='100%'></a><br>","\n      <strong>"+e.properties.site_name+" ARMORY</strong>\n      <br>"+Renderers.utils.zoom_to_location_link(e.geometry)},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n        <img src={{'./img/icons/armory.png'}}>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/boundary_climate_divisions.js */
RendererTemplates.wms("boundary_climate_divisions",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"ny:clim_div",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:clim_div&QUERY_LAYERS=ny:clim_div&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:clim_div&format=image/png\")}}>\n      </div>\n  ",info_template:'\n    <div class=\'col-xs-2\'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class=\'col-xs-10\'>\n      <table class="table">\n        <tr>\n          <th>Name</th>\n          <th>Sample Queries</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.name}}</td>\n            <td>\n              <a href="http://www.ncdc.noaa.gov/cag/time-series/us/{{properties.clim_div_id_state}}/{{properties.clim_div_id}}/pcp/ytd/12/1895-2015?base_prd=true&firstbaseyear=1895&lastbaseyear=2015&trend=true&trend_base=10&firsttrendyear=1905&lasttrendyear=2015&filter=true&filterType=binomial" target="_blank">Annual PPT 1895-2015</a><br>\n              <a href="http://www.ncdc.noaa.gov/cag/time-series/us/{{properties.clim_div_id_state}}/{{properties.clim_div_id}}/tmax/1/9/1950-2015?base_prd=true&firstbaseyear=1950&lastbaseyear=2015&trend=true&trend_base=10&firsttrendyear=1950&lasttrendyear=2015&filter=true&filterType=binomial" target="_blank">Sept Max Temp 1895-2015</a>\n            </td>\n            <td></td>\n            <td></td>\n            <td></td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  '});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/boundary_counties.js */
RendererTemplates.wms("boundary_counties",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"ny:county",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:county&QUERY_LAYERS=ny:county&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:county&format=image/png\")}}>\n      </div>\n  ",info_template:"\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\">\n          <tr>\n            <th>Name</th>\n            <th>FIPS code</th>\n          </tr>\n          {{#json.features}}\n            <tr>\n              <td>{{properties.name}}</td>\n              <td>{{properties.fips}}</td>\n            </tr>\n          {{/json.features}}\n        </table>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/boundary_huc8.js */
RendererTemplates.wms("boundary_huc8",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(t){return{layers:"ny:huc8",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(t){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:huc8&QUERY_LAYERS=ny:huc8&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:huc8&format=image/png\")}}>\n      </div>\n  ",info_template:"\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\">\n          <tr>\n            <th>Name</th>\n            <th>HUC8 Reachcode</th>\n            <th>Shapefile Link</th>\n            <th></th>\n            <th></th>\n          </tr>\n          {{#json.features}}\n            <tr>\n              <td>{{properties.name}}</td>\n              <td>{{properties.huc8}}</td>\n              <td><a target='_blank'\n                href=\"ftp://ftp.horizon-systems.com/NHDPlus/NHDPlusV1/NHDPlusExtensions/Subbasins/NHDPlus02/NHDPlus{{properties.huc8}}.zip\">Shapefile(s)</a></td>\n              <td></td>\n              <td></td>\n            </tr>\n          {{/json.features}}\n        </table>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/boundary_municipal.js */
RendererTemplates.wms("boundary_municipal",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(t){return{layers:"ny:citytownvillage",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(t){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:citytownvillage&QUERY_LAYERS=ny:citytownvillage&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:citytownvillage&format=image/png\")}}>\n      </div>\n  ",info_template:"\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\">\n          <tr>\n            <th>Name</th>\n            <th>GNIS code</th>\n            <th></th>\n            <th></th>\n            <th></th>\n          </tr>\n          {{#json.features}}\n            <tr>\n              <td>{{properties.name}}</td>\n              <td>{{properties.gnis}}</td>\n              <td></td>\n              <td></td>\n              <td></td>\n            </tr>\n          {{/json.features}}\n        </table>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/bridges.js */
!function(){var e=CDN(GEOSERVER+"/wms");RendererTemplates.wms("bridges",{parameters:{opacity:90,layers:"ny:bridges"},url:e,wms_opts:function(e){return{layers:e.parameters.layers,format:"image/png",opacity:0,zIndex:-1,transparent:!0,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS="+e.parameters.layers+"&QUERY_LAYERS="+e.parameters.layers+"&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:bridges&format=image/png\")}}/>\n      </div>\n    ",info_template:"\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\">\n          <tr>\n            <th>BIN</th>\n            <th>Crosses</th>\n            <th>Year Built</th>\n            <th>Material</th>\n          </tr>\n          {{#json.features}}\n            <tr>\n              <td>{{properties.bin}}</td>\n              <td>{{properties.crossed_mi}}</td>\n              <td>{{properties.year_built}}</td>\n              <td>{{properties.gtms_mater}}</td>\n            </tr>\n          {{/json.features}}\n        </table>\n      </div>\n\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/bulkstorage.js */
RendererTemplates.wms("bulkstorage",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"ny:bulkstorage",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:bulkstorage&QUERY_LAYERS=ny:bulkstorage&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:bulkstorage&format=image/png\")}}>\n      </div>\n  ",info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      <table class=\"table\">\n        <tr>\n          <th>Name</th>\n          <th>ID</th>\n          <th>Type</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.name}}</td>\n            <td>{{properties.id}}</td>\n            <td>{{properties.type}}</td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/carbon.js */
RendererTemplates.wms("carbon",{parameters:{opacity:70,scenario_year:"ny:biomass_b1_2050",options:{scenario_years:{"ny:biomass_a2_2010":"2010 - A2 (medium-high emissions)","ny:biomass_a2_2050":"2050 - A2 (medium-high emissions)","ny:biomass_b1_2050":"2050 - B1 (lower emissions)"}}},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:e.parameters.scenario_year,format:"image/png",opacity:0,zIndex:-1,transparent:!0,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326}},get_feature_info_url:function(e){var n=e.parameters.scenario_year;return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS="+n+"&QUERY_LAYERS="+n+"&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n    <div class='detail-block show-confidence carbon'>\n      <label> Year / Scenario: </label>\n      <select value='{{parameters.scenario_year}}'>\n        <option value='ny:biomass_a2_2010'>\n          2010 - A2 (medium-high emissions)\n        </option>\n        <option value='ny:biomass_a2_2050'>\n          2050 - A2 (medium-high emissions)\n        </option>\n        <option value='ny:biomass_b1_2050'>\n          2050 - B1 (lower emissions)\n        </option>\n      </select>\n    </div>\n    <div class='detail-block legend-url-text carbon'>\n      <span class='legend-text'>\n        grams C per m<sup>2</sup>\n      </span>\n    </div>\n    <div class='detail-block legend-url-text'>\n      <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=\" + parameters.scenario_year+\"&format=image/png\")}}/>\n    </div>\n  ",info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      {{#json.features}}\n        <div>\n          Value: {{properties.GRAY_INDEX}}\n        </div>\n      {{/json.features}}\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/cfem_critical.js */
RendererTemplates.esri_tiled_map("cfem_critical",{parameters:{opacity:!1},url:CDN("https://coast.noaa.gov/arcgis/rest/services/FloodExposureMapper/CFEM_CriticalFacilities/MapServer"),esri_opts:{layers:"0",transparent:!0}});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/climaid_precip.js */
RendererTemplates.climaid("climaid_precip",{data_url:"https://repository.nescaum-ccsc-dataservices.com/data/ny/climaid_precip_deltas.json",title:"CLIMAID Precipitation Change",legend:"Precipitation Change (cm)",legend_units:" cm ",legend_precision:2,color_range:{positive:colorbrewer.BuGn[9],negative:_.cloneDeep(colorbrewer.Blues[9].reverse())}});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/climaid_temp.js */
RendererTemplates.climaid("climaid_temp",{data_url:"https://repository.nescaum-ccsc-dataservices.com/data/ny/climaid_temp_deltas.json",title:"CLIMAID Temperature Change",legend:"Temperature Change (&deg; F)",legend_units:" &deg;F ",legend_precision:2,color_range:{positive:colorbrewer.YlOrRd[9],negative:_.cloneDeep(colorbrewer.Blues[9]).reverse()}});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/croplands.js */
RendererTemplates.wms("croplands",{parameters:{opacity:70},url:CDN("http://sedac.ciesin.columbia.edu/geoserver/wms"),wms_opts:function(e){return{layers:"aglands:aglands-croplands-2000",format:"image/png",opacity:0,zIndex:-1,transparent:!0}},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(\"http://sedac.ciesin.columbia.edu/geoserver/wms?request=GetLegendGraphic&LAYER=aglands:aglands-croplands-2000&format=image/png\")}}/>\n      </div>\n      <div class='detail-block legend-url-text'>\n        <span class='legend-text'>% of cell area in crops</span>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/coastal_wetlands.js */
!function(){var e=CDN("https://50.19.218.171/arcgis1/rest/services/MarineLifeAndHabitat/MapServer/");RendererTemplates.esri("coastal_wetlands",{parameters:{opacity:85,options:{}},legend_template:"\n      <div class='detail-block legend'>\n        <label> Legend </label>\n        <img src=\"img/legends/coastal_wetlands.jpg\"/>\n      </div>\n    ",esri_opts:function(a){return{url:CDN(e),layers:[32],f:"image",clickable:!1,attribution:"NWI"}}})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/culverts.js */
!function(){var e=CDN(GEOSERVER+"/wms");RendererTemplates.wms("culverts",{parameters:{opacity:90,layers:"ny:large_culverts"},url:e,wms_opts:function(e){return{layers:e.parameters.layers,format:"image/png",opacity:0,zIndex:-1,transparent:!0,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS="+e.parameters.layers+"&QUERY_LAYERS="+e.parameters.layers+"&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:large_culverts&format=image/png\")}}/>\n      </div>\n    ",info_template:"\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\">\n          <tr>\n            <th>ID</th>\n            <th>Crosses</th>\n            <th>Material</th>\n            <th>Inspected</th>\n            <th>Condition Index</th>\n          </tr>\n          {{#json.features}}\n            <tr>\n              <td>{{properties.culvert_id}}</td>\n              <td>{{properties.crosses}}</td>\n              <td>{{properties.material}}</td>\n              <td>{{properties.last_inspected}}</td>\n              <td>{{properties.condition}}</td>\n            </tr>\n          {{/json.features}}\n        </table>\n      </div>\n\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/dams.js */
RendererTemplates.geojson_points("dams",{parameters:{opacity:!1,no_sorting:!0},url:CDN(URI("https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows").query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:dams",outputFormat:"application/json"}).toString()),clustering:{spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:40,disableClusteringAtZoom:10,iconCreateFunction:function(e,r){return new L.DivIcon({pane:r,html:e.getChildCount(),className:"damsCluster",iconSize:new L.Point(35,35)})}},pointToLayer:function(e,r,n,o){var t="./img/icons/dam-";return"A"===r.properties.hazard_code||"a"===r.properties.hazard_code?t+="a.png":"B"===r.properties.hazard_code||"b"===r.properties.hazard_code?t+="b.png":"C"===r.properties.hazard_code||"c"===r.properties.hazard_code?t+="c.png":t+="unk.png",L.marker(n,{pane:o,riseOnHover:!0,icon:L.icon({className:"dam-"+r.properties.hazard_code.toLowerCase(),iconUrl:t,iconSize:[21,24],iconAnchor:[12,28],opacity:0,popupAnchor:[0,-25]}),title:r.properties.name})},popupContents:function(e){return link_url="<a href='http://www.dec.ny.gov/airmon/stationStatus.php?stationNo="+e.properties.dec_uid+"' target='_blank_'>More info</a><br><a href='http://www.dec.ny.gov/airmon/stationStatus.php?stationNo="+e.properties.dec_uid+"' target='_blank_'><img src='http://www.dec.ny.gov/airmon/stationUSAQIGraph.php?stationno="+e.properties.dec_uid+"' width='100%'></a><br>","\n      <strong>"+e.properties.name+"</strong>\n      <br>\n      "+e.properties.hazard+"\n      <br>\n      State ID: "+e.properties.state_id+"\n      <br>\n      Federal ID: "+e.properties.federal_id+"\n      <br>"+Renderers.utils.zoom_to_location_link(e.geometry)},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n        <div><img src={{'./img/icons/dam-a.png'}}> Low Hazard<br>\n          <img src={{'./img/icons/dam-b.png'}}> Intermediate Hazard<br>\n          <img src={{'./img/icons/dam-c.png'}}> High Hazard<br>\n          <img src={{'./img/icons/dam-unk.png'}}> Unknown Hazard<br>\n        </div>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/dec_wetlands.js */
!function(){var e=CDN("https://services2.coastalresilience.org/arcgis/rest/services/Natural_Resource_Navigator/Natural_Resource_Navigator/MapServer/");RendererTemplates.esri("dec_wetlands",{parameters:{opacity:85,options:{}},legend_template:"\n      <div class='detail-block legend'>\n        <label> Legend </label>\n        <img src=\"img/legends/dec_wetlands.jpg\"/>\n      </div>\n    ",esri_opts:function(a){return{url:CDN(e),layers:[144],f:"image",clickable:!1,attribution:"NYS DEC"}}})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/dewberry_sea_level_rise.js */
!function(){var e=[{label:"Current Sea Level",url:"eb79a6a4c8c41af16e3da3e5a016f773",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAEtJREFUOI1jYaAyYGFgYGBgYJf/T7FJPx8yIgykBmCX/8/w8yEjqoFuM8kzbFc6nEk9F44aOGrgqIHD2ECkUoM6BlICUApYKIcaAABK1g0oRy3dqQAAAABJRU5ErkJggg==",contentType:"image/png"},{label:"Predicted Sea Level",url:"282365f8fa642491daa9ffee493361ea",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAE1JREFUOI1jYaAyYGFgYGBgcEj7T7FJB2YxIgykBnBI+89wYBYjioEqaZVkmXVnVjucTT0Xjho4auCogcPXQORSgyoGUgRQClgohxoAAAemDgT4LaMAAAAAAElFTkSuQmCC",contentType:"image/png",height:20,width:20}];RendererTemplates.esri("dewberry_sea_level_rise",{parameters:{opacity:70,rise:0,year:0,legend_data:e,options:{years:{0:"10 year",1:"50 year",2:"100 year",3:"500 year"},rises:{0:"0 Inches",1:"12 inches",2:"18 inches",3:"24 inches",4:"36 inches",5:"48 inches",6:"60 inches",7:"72 inches"}}},clone_layer_name:function(e){var a=_.find(LayerInfo,{id:e.layer_default_id}),r=e.parameters.rise,s=e.parameters.year;return a.name+" Rise:"+r+" Year:"+s},esri_opts:function(e){var a=4*e.parameters.rise,r=+e.parameters.year,s=[34+a+r,67+a+r,100+a+r];return{url:CDN("https://services.nyserda.ny.gov/arcgis/rest/services/NYSERDA_SLR_Viewer/MapServer"),layers:s,f:"image",format:"png8",opacity:0,zIndex:-1,attribution:"Dewberry Sea Level Rise (SLR)"}},legend_template:"\n      <div class='detail-block sea-level'>\n        <label decorator='tooltip:Use slider to select sea level (feet above mean higher high water)'> Sea Level: </label>\n        <input type=\"range\"\n              min=\"0\"\n              max=\"{{u.number_of_keys(parameters.options.rises) - 1}}\"\n              value=\"{{parameters.rise}}\">\n        <span> {{parameters.options.rises[parameters.rise]}} </span>\n      </div>\n      <div class='detail-block'>\n        <label decorator='tooltip:Use slider to select storm return'> Storm Return: </label>\n        <select value='{{parameters.year}}'>\n          {{#u.to_sorted_values_from_hash(parameters.options.years)}}\n            <option value='{{key}}'>{{value}}</option>\n          {{/u.to_sorted_values_from_hash(parameters.options.years)}}\n        </select>\n      </div>\n\n      <div class='detail-block sea-level'>\n        <label decorator='tooltip:Use slider to select storm return'> Legend: </label>\n        {{#parameters.legend_data}}\n          <div class=''>\n            <img src=\"data:{{contentType}};base64,{{imageData}}\" class='cube'/>\n            <span>{{label}}</span>\n          </div>\n        {{/parameters.legend_data}}\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/dow_unconsolidated_aquifers.js */
RendererTemplates.wms("dow_unconsolidated_aquifers",{parameters:{opacity:100,layers:"ny:dow_uncon_aqui_main",options:{}},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:e.parameters.layers,format:"image/png",opacity:0,zIndex:-1,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS="+e.parameters.layers+"&QUERY_LAYERS="+e.parameters.layers+"&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=\" + parameters.layers + \"&format=image/png\")}}/>\n      </div>\n      <div class='detail-block legend-url-text'>\n        <span class='legend-text'> Click on map to view more detail</span>\n      </div>\n  ",info_template:"\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\">\n          <tr>\n            <th>Primary Aquifer</th>\n            <th>Type</th>\n            <th>Yield</th>\n            <th>Acres</th>\n          </tr>\n          {{#json.features}}\n            <tr>\n              <td>{{properties.primary_aq}}</td>\n              <td>{{properties.type}}</td>\n              <td>{{properties.yield}}</td>\n              <td>{{properties.acres}}</td>\n            </tr>\n          {{/json.features}}\n        </table>\n      </div>\n\n\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/electric_powerlines.js */
RendererTemplates.wms("electric_powerlines",{parameters:{opacity:80},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"multistate:electric_powerlines",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=multistate:electric_powerlines&QUERY_LAYERS=multistate:electric_powerlines&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=multistate:electric_powerlines&format=image/png\")}}>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/epa_frs_facilities.js */
RendererTemplates.wms("epa_frs_facilities",{parameters:{opacity:60},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"ny:epa_frs_facilities",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:epa_frs_facilities&QUERY_LAYERS=ny:epa_frs_facilities&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:epa_frs_facilities&format=image/png\")}}>\n      </div>\n  ",info_template:'\n    <div class=\'col-xs-2\'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class=\'col-xs-10\'>\n      <table class="table">\n        <tr>\n          <th>Name</th>\n          <th>Address</th>\n          <th>Report Link</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.primary_name}}</td>\n            <td>{{properties.location_address}}, {{properties.city_name}}</td>\n            <td><a href="{{properties.frs_facility_detail_report_url}}" target="_blank">View Report</a></td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  '});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/fema_historic.js */
!function(){var t=CDN("https://gis.fema.gov/arcgis/rest/services/FEMA/HistoricalDesignations/MapServer"),e={},n=function(n,r){var a=n.parameters.fema_historic_layer;e[a]?r(null,e[a]):$.ajax({url:CDN(t+"/"+a),data:{f:"pjson"},dataType:"jsonp",success:function(t){e[a]=t,r(null,e[a])},error:function(t){200!==t.status&&(r(t,[]),Views.ControlPanel.fire("tile-layer-loading-error",n))}})};RendererTemplates.esri("fema_historic",{parameters:{opacity:70,fema_historic_layer:"0",options:{types:{0:"Total",2:"Drought",3:"Fire",4:"Flood",5:"Hurricane",6:"Severe Storm",7:"Snow/Ice/Freezing",8:"Tornado"}}},get_feature_info_url:function(e,n){console.log(e);var r=e.parameters.fema_historic_layer;return CDN(t+"/identify")+'?f=json&tolerance=1&returnGeometry=true&imageDisplay=<%=width%>%2C<%=height%>%2C96&maxAllowableOffset=150&geometry={"x": <%= lng %>,"y": <%=lat%>}&geometryType=esriGeometryPoint&sr=4326&mapExtent=<%=xmin%>,<%=ymin%>,<%=xmax%>,<%=ymax%>&layers=visible%3A'+r},onrender:function(t){n(t,function(e,n){if(t.parameters.legend_text=n.name,"uniqueValue"==n.drawingInfo.renderer.type){var r=_.uniq(n.drawingInfo.renderer.uniqueValueInfos,"label");t.parameters.legend_range=_.map(r,function(t){return{c:"rgba("+t.symbol.color.join(",")+")",s:t.label}})}else t.parameters.legend_range=_.map(n.drawingInfo.renderer.classBreakInfos,function(t){return{c:"rgba("+t.symbol.color.join(",")+")",s:t.label}});Views.ControlPanel.fire("update-layers-parameters",t)})},esri_opts:function(e){var n=e.parameters.fema_historic_layer;return{url:CDN(t),layers:[n],f:"image",format:"png8",transparent:!0,dpi:96,clickable:!1,attribution:"FEMA"}},legend_template:"\n     <div class='detail-block show-confidence'>\n       <label decorator='tooltip:Choose an emergency type'> Summarize by: </label>\n       <select value='{{parameters.fema_historic_layer}}'>\n         {{#u.to_sorted_keys_from_hash(parameters.options.types)}}\n           <option value='{{key}}'>{{value}}</option>\n         {{/u.to_sorted_keys_from_hash(parameters.options.types)}}\n       </select>\n     </div>\n\n    <div class='detail-block legend'>\n      {{#parameters.legend_text}}\n        <div class='color-legend'>{{parameters.legend_text}}</div>\n      {{/parameters.legend_text}}\n\n      {{#parameters.legend_range}}\n        <div class='color-block' style=\"width: {{100.0 / parameters.legend_range.length}}%;\">\n          <svg width=\"100\" height=\"100\">\n            <rect height=\"100\" width=\"100\" style=\"fill: {{c}}; opacity:{{(0.7 * parameters.opacity / 100.0) + 0.3}}; \"/>\n          </svg>\n          {{#if v}}\n            <label>{{fixed_precision(v, parameters.legend_significant_digits)}}</label>\n          {{/if v}}\n\n          {{#if s}}\n            <label>{{s}} </label>\n          {{/if s}}\n        </div>\n      {{/parameters.legend_range}}\n    </div>\n  ",info_template:"\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\" style=\"text-align:center;\">\n          <tr>\n            <th>County</th>\n            <th>Total</th>\n            <th>Drought</th>\n            <th>Drought</th>\n            <th>Earthquake</th>\n            <th>Fire</th>\n            <th>Flood</th>\n            <th>Hurricane</th>\n            <th>Ice Storm</th>\n            <th>Snow</th>\n            <th>Storm</th>\n            <th>Tornado</th>\n          </tr>\n          <tr>\n            <th> &nbsp; </th>\n            <th colspan='11' style='text-align: center'>\n              (1964 - 2000)\n            </th>\n          </tr>\n          {{#json.results}}\n            <tr>\n              <td>{{attributes.COUNTY}}</td>\n              <td>{{attributes.TOTAL_DECLARATIONS_1964}} - {{attributes.TOTAL_DECLARATIONS_2K}}</td>\n              <td>{{attributes.DROUGHT_1964}} - {{attributes.DROUGHT_2K}}</td>\n              <td>{{attributes.EARTHQUAKE_1964}} - {{attributes.EARTHQUAKE_2K}}</td>\n              <td>{{attributes.FIRE_1964}} - {{attributes.FIRE_2K}}</td>\n              <td>{{attributes.FLOOD_1964}} - {{attributes.FLOOD_2K}}</td>\n              <td>{{attributes.HURRICANE_1964}} - {{attributes.HURRICANE_2K}}</td>\n              <td>{{attributes.ICE_STORM_1964}} - {{attributes.ICE_STORM_2K}}</td>\n              <td>{{attributes.SNOW_1964}} - {{attributes.SNOW_2K}}</td>\n              <td>{{attributes.STORM_1964}} - {{attributes.STORM_2K}}</td>\n              <td>{{attributes.TORNADO_1964}} - {{attributes.TORNADO_2K}}</td>\n            </tr>\n          {{/json.results}}\n        </table>\n      </div>\n  "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/flood_exposure.js */
RendererTemplates.esri("flood_exposure",{parameters:{opacity:85,options:{}},legend_template:"\n    <div class='detail-block legend'>\n      <label> Legend </label>\n      <img src=\"https://coast.noaa.gov/arcgis/services/FloodExposureMapper/CFEM_CoastalFloodHazardComposite/MapServer/WmsServer?request=GetLegendGraphic%26version=1.3.0%26format=image/png%26layer=1\"/>\n    </div>\n  ",esri_opts:function(e){return{url:CDN("https://coast.noaa.gov/arcgis/rest/services/FloodExposureMapper/CFEM_CoastalFloodHazardComposite/MapServer"),layers:[21],f:"image",clickable:!1,attribution:"NOAA"}}});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/freight_stations.js */
!function(){var n=GEOSERVER+"/ny/ows";RendererTemplates.geojson_points("freight_stations",{parameters:{opacity:!1,no_sorting:!0},url:CDN(URI(n).query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:freight_stations",maxFeatures:500,outputFormat:"application/json"}).toString()),clustering:{spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:40,disableClusteringAtZoom:10,iconCreateFunction:function(n,e){return new L.DivIcon({pane:e,html:n.getChildCount(),className:"freightStationCluster",iconSize:new L.Point(35,35)})}},pointToLayer:function(n,e,t,o){return L.marker(t,{pane:o,icon:L.icon({iconAnchor:[12,28],iconSize:[21,24],iconUrl:"./img/icons/freight_station.png",opacity:0,popupAnchor:[0,-25]}),title:e.properties.name})},popupContents:function(n){return"\n          <strong>"+n.properties.city+" Freight Station</strong>\n          <br/>\n          Railroad: "+n.properties.railroad+"\n          <br/>\n          "+Renderers.utils.zoom_to_location_link(n.geometry)+"\n      "},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n        <img src=\"./img/icons/freight_station.png\"/> Railroad Freight Stations\n      </div>\n      <div class='detail-block legend-url-text'>\n        <span class='legend-text'>\n          Click map icons for more info\n        </span>\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/gap_lc.js */
!function(){var t=CDN("https://www.sciencebase.gov/geoserver/nvcs/wms"),n=t+"?TRANSPARENT=TRUE&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetLegendGraphic&LAYER=formation&FORMAT=image/png";RendererTemplates.wms("gap_lc",{parameters:{opacity:70,layers:"formation"},url:t,wms_opts:function(t){return{layers:t.parameters.layers,format:"image/png",opacity:0,zIndex:-1,transparent:!0}},legend_template:"\n        <div class='detail-block show-confidence'>\n          <img  style='max-width: 110%' src='"+n+"' />\n        </div>\n    ",info_template:"\n      <div class='row'>\n        <div class='col-xs-2'>\n          <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n        </div>\n        <div class='col-xs-10'>\n          <table class=\"table\">\n            <tr>\n              <th> NVC Class </th>\n              <th> NVC Sub-Class </th>\n              <th> NVC Form </th>\n              <th> NVC Div </th>\n              <th> Ecosystem LU</th>\n            </tr>\n\n            {{#xml_output}}\n              <tr>\n                <td>{{{nvc_class}}}</td>\n                <td>{{{nvc_subcl}}}</td>\n                <td>{{{nvc_form}}}</td>\n                <td>{{{nvc_div}}}</td>\n                <td>{{{ecolsys_lu}}}</td>\n              </tr>\n            {{/xml_output}}\n          </table>\n        </div>\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/ghg_facilities.js */
!function(){var n=CDN(GEOSERVER+"/ny/ows");RendererTemplates.geojson_points("ghg_facilities",{parameters:{opacity:!1,no_sorting:!0},url:CDN(URI(n).query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:ghg_facilities",maxFeatures:500,outputFormat:"application/json"}).toString()),clustering:{spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,disableClusteringAtZoom:11,iconCreateFunction:function(n,e){return new L.DivIcon({pane:e,html:n.getChildCount(),className:"ghg_facilitiesCluster",iconSize:new L.Point(35,35)})}},pointToLayer:function(n,e,o,i){return L.marker(o,{pane:i,icon:L.icon({iconUrl:"./img/icons/ghg_facilities.png",iconSize:[18,21],iconAnchor:[12,28],popupAnchor:[0,-25],opacity:0}),title:e.properties.name})},popupContents:function(n){return"\n          <strong>"+n.properties.name+"</strong>\n          <br>\n          <strong>Parent Company:</strong>\n          "+n.properties.parent_company+"\n          <br>\n          "+n.properties.ghg_quantity+" metric tons\n          <br>\n          "+Renderers.utils.zoom_to_location_link(n.geometry)+"\n        "},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n        <img src=\"./img/icons/ghg_facilities.png\"/>\n      </div>\n      <div class='detail-block legend-url-text'>\n        <span class='legend-text'>\n          Click map icons for more info\n        </span>\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/hospitals.js */
!function(){var n=CDN(GEOSERVER+"/ny/ows");RendererTemplates.geojson_points("hospitals",{parameters:{opacity:!1,no_sorting:!0},url:CDN(URI(n).query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:hospitals",maxFeatures:500,outputFormat:"application/json"}).toString()),clustering:{spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:40,disableClusteringAtZoom:10,iconCreateFunction:function(n,e){return new L.DivIcon({pane:e,html:n.getChildCount(),className:"hospitalCluster",iconSize:new L.Point(35,35)})}},pointToLayer:function(n,e,o,t){return L.marker(o,{pane:t,icon:L.icon({iconAnchor:[12,28],iconSize:[16,18],iconUrl:"./img/icons/hospital.png",opacity:0,popupAnchor:[0,-25]}),title:e.properties.name})},popupContents:function(n){return"\n          <strong>"+n.properties.name+"</strong>\n          <br/>\n          Hospital ID: "+n.properties.entity_hos+"\n          <br/>\n          "+n.properties.address+"\n          <br/>\n          "+n.properties.city+"\n          <br/>\n          "+n.properties.zipcode+"\n          <br/>\n          "+Renderers.utils.zoom_to_location_link(n.geometry)+"\n      "},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n        <img src=\"./img/icons/hospital.png\"/>\n      </div>\n      <div class='detail-block legend-url-text'>\n        <span class='legend-text'>\n          Click map icons for more info\n        </span>\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/invasive_animals.js */
RendererTemplates.invasives("invasive_animals",{url:"https://api.nescaum-ccsc-dataservices.com/invasive_animals.json",species:"All Animals"});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/invasive_insects.js */
RendererTemplates.invasives("invasive_insects",{url:"https://api.nescaum-ccsc-dataservices.com/invasive_insects.json",species:"All Insects"});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/invasive_plants.js */
RendererTemplates.invasives("invasive_plants",{url:"https://api.nescaum-ccsc-dataservices.com/invasive_plants.json",species:"All Plants"});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/lulc_2011.js */
RendererTemplates.wms("lulc_2011",{parameters:{opacity:90,min_zoom:11,max_zoom:19},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"ny:lulc2011",format:"image/png",opacity:0,zIndex:-1,transparent:!0}},legend_template:"\n      <div class='detail-block show-confidence'>\n      Land Classification<br/><img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:lulc2011&format=image/png\")}}/>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/lulc_2050.js */
RendererTemplates.wms("lulc_2050",{parameters:{opacity:90,min_zoom:11,max_zoom:19},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"ny:lulc2050",format:"image/png",opacity:0,zIndex:-1,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:lulc2050&QUERY_LAYERS=ny:lulc2050&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        Land Classification<br/><img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:lulc2050&format=image/png\")}}/>\n      </div>\n  ",info_template:"\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/national_flood_hazard.js */
!function(){var A=[{label:"Coverage area - Zoom in to see details",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAGJJREFUOI3t1EEKgDAMBMB0yc9K32X+VfK11YuW1oNg40m6pyWEIaeofBy9CkmLQACsgSe2JfdpkKQAsHZhchcpZU6rtVV9WJvKAhe4wD+C3dd4kz3nEQRgJAN33R5sP4jmAJKYGEcjsXAtAAAAAElFTkSuQmCC",contentType:"image/png"},{label:"High Risk - Floodway",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAH5JREFUOI211MENwCAIBdBP0jVczeFczUHooT2UAib0W44oL/+AHthcx2+gAvo+lDHDIe3N9QQQA1LYmMDdD8Ey9igHMpgDWcyAOzCXkMWWYAXT3q6dycAqtkzIYA5kMQPuwFxCFkvBKrZ8y5+wLCGLGVAAQTYYdoHo/vYf+wS600fTP7m0hwAAAABJRU5ErkJggg==",contentType:"image/png"},{label:"High Risk",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAC9JREFUOI1jYaAyYKGdgYse/6fIpDhZRlQDqQRGDRw1cNTAUQPpbSC0PKOegVQCADCrA81JwUxoAAAAAElFTkSuQmCC",contentType:"image/png"},{label:"Moderate Risk",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAADFJREFUOI1jYaAyYKGZgd+nqvynxCDO7DuMKAZSC4waOGrgqIGjBtLZQFh5RjUDqQUAIocFoingXccAAAAASUVORK5CYII=",contentType:"image/png"}];RendererTemplates.esri("national_flood_hazard",{parameters:{opacity:80,legend_data:A},esri_opts:{url:CDN("https://hazards.fema.gov/gis/nfhl/rest/services/public/NFHL/MapServer"),layers:[0,16,28],f:"image",clickable:!1,attribution:"FEMA"},legend_template:"\n        <div class='detail-block lulc'>\n          {{#parameters.legend_data}}\n            <div class=''>\n              <img src=\"data:{{contentType}};base64,{{imageData}}\" class='cube'/>\n              <span>{{label}}</span>\n            </div>\n          {{/legend_data}}\n        </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/nlcd.js */
!function(){var e=CDN(GEOSERVER+"/wms");RendererTemplates.wms("nlcd",{parameters:{opacity:90,layers:"ny:nlcd_2011_ny"},url:e,wms_opts:function(e){return{layers:e.parameters.layers,format:"image/png",opacity:0,zIndex:-1,transparent:!0,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326}},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:nlcd_2011_ny&format=image/png\")}}/>\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/naturalgas_pipelines.js */
RendererTemplates.wms("naturalgas_pipelines",{parameters:{opacity:60},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"multistate:naturalgas_pipelines",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=multistate:naturalgas_pipelines&QUERY_LAYERS=multistate:naturalgas_pipelines&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=multistate:naturalgas_pipelines&format=image/png\")}}>\n      </div>\n  ",info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      <table class=\"table\">\n        <tr>\n          <th>Operator</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.operator}}</td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/noaa_sea_level_rise.js */
!function(){var A={slr:[{label:"Low-lying Areas",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAADFJREFUOI1jYaAyYKGZgaH/Gf5TYtBqRgZGFAOpBUYNHDVw1MBRA+lsIKw8o5qB1AIAREsD/qXn0TcAAAAASUVORK5CYII=",contentType:"image/png"},{label:"Deep",url:"75297640e0328adb91c5043fdb2da9f6",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAFRJREFUOI3N0sENwCAMBMGLORvetJGqU2ckoIl94AJGJ6396tsCz6kgPVk02PGFnQYnDVZjwRow2AyDGtdXLhiMpBfSUZbxhQ8LRtKPTYNBR/nhKAfGVATCm4CufAAAAABJRU5ErkJggg==",contentType:"image/png",height:20,width:20},{label:"",url:"fb23e54840a8e44a8f340dfc35746833",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAFhJREFUOI2t1AENwEAIQ9EelJ6yaZncE7Qsm4mPgBeaEnzd5xM4lpv0ZKVY8BkYfANH7obBoiOr8VLoszG84Rj15N2LBcODqCcPvSEP0i2n4DuE/6scOPIPnH8GX6OI2SAAAAAASUVORK5CYII=",contentType:"image/png",height:20,width:20},{label:"Shallow",url:"aff5b949562089841a6ad19cd52c833b",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAEtJREFUOI3Nk0ERACAMwwoLovGFLDyAiTw2Abld2rLPfREPpolLKIYLXKXywiz5w7IdojtE5QXaO1y2Q+we6sD+09N7qG/ZD6U78ANTnwPz39fdJgAAAABJRU5ErkJggg==",contentType:"image/png",height:20,width:20}],conf:[{label:"Low Confidence",url:"b5c3ee43c73775a8b49e866126d69b44",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAADlJREFUOI1jYaAyYKGlgf+pYB4jigv/r6TApHAITVMvjxo4auCogaMGYjcQVgSRCRjRDWSkyDgoAAB8swOrTPh0KQAAAABJRU5ErkJggg==",contentType:"image/png",height:20,width:20},{label:"High Confidence",url:"d52c8cf8f3602499ba27244fc7989e41",imageData:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAADtJREFUOI1jYaAyYKGlgf+pYB4jqgujn5Fv1FIpBgYGGnt51MBRA0cNHDUQh4HQIohMwIhuICMlpsEAAJ4ABBIZrV6vAAAAAElFTkSuQmCC",contentType:"image/png",height:20,width:20}]};RendererTemplates.esri("noaa_sea_level_rise",{parameters:{opacity:70,sea_level_height:0,display_layer:"slr",legend_data:A},esri_opts:function(A){var e=A.parameters.sea_level_height,a=A.parameters.display_layer;return{url:CDN("https://www.coast.noaa.gov/arcgis/rest/services/dc_slr/"+a+"_"+e+"ft/MapServer/tile"),f:"image",opacity:0,zIndex:-1,attribution:"NOAA Sea Level Rise (SLR)"}},legend_template:"\n      <div class='detail-block sea-level'>\n        <label decorator='tooltip:Use slider to select sea level (feet above mean higher high water)'> Sea Level: </label>\n        <input type=\"range\"\n              min=\"0\"\n              max=\"6\"\n              value=\"{{parameters.sea_level_height}}\">\n        <span> {{parameters.sea_level_height}} ft. </span>\n        <div style='margin-left: 25%' >Feet above Mean Height High Water</div>\n      </div>\n\n      <div class='detail-block show-confidence'>\n        <label decorator='tooltip:Display modeled sea level or model confidence'> Display: </label>\n        <select value={{parameters.display_layer}}>\n          <option value=\"slr\"> Sea Level</option>\n          <option value=\"conf\"> Confidence</option>\n        </select>\n      </div>\n\n      <div class='detail-block lulc'>\n        {{#parameters.legend_data[parameters.display_layer]}}\n          <div class=''>\n            <img src=\"data:{{contentType}};base64,{{imageData}}\" class='cube'/>\n            <span>{{label}}</span>\n          </div>\n        {{/parameters.legend_data[parameters.display_layer]}}\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/ny_mask.js */
!function(){var e=CDN("https://repository.nescaum-ccsc-dataservices.com/data/ny/ny_mask.topojson");RendererTemplates.geojson_polygons("ny_mask",{parameters:{opacity:80,fixed_z_index:5e3,no_sorting:!0,style:{weight:1,color:"#111111"}},url:e,onEachPolygon:function(e,o,t){o.setStyle(_.merge({opacity:t},e.parameters.style))}})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/nyserda_slr.js */
!function(){var e=[5,10,20,50,100,200,500,1e3],a=[0,6,12,18,24,30,36,48,60,72];RendererTemplates.wms("nyserda_slr",{parameters:{opacity:100,rise:a[0],year:e[0],options:{rises:a,years:e}},url:CDN("http://ciesin.columbia.edu/geoserver/nyserda/wms"),wms_opts:function(e){var a=e.parameters.rise,r=e.parameters.year;return{layers:"nyserda:flood_"+_.padLeft(a,2,"0")+"_"+_.padLeft(r,4,"0"),format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},legend_template:"\n      <div class='detail-block show-confidence'>\n          <label decorator='tooltip:Use slider to select sea level (inches above mean higher high water)'> Sea Level: </label>\n          <select value='{{parameters.rise}}'>\n            {{#parameters.options.rises}}\n              <option value={{.}}>{{.}} inches</option>\n            {{/parameters.options.rises}}\n          </select>\n        </div>\n        <div class='detail-block show-confidence'>\n          <label decorator='tooltip:Choose a storm return period'> Storm Return: </label>\n          <select value='{{parameters.year}}'>\n            {{#parameters.options.years}}\n              <option value={{.}}>{{.}} year</option>\n            {{/parameters.options.years}}\n          </select>\n        </div>\n        <div class='detail-block'>\n          <label>Legend</label>\n          <img src=\"./img/legends/nyserda_slr.jpg\"/>\n        </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/pastures.js */
!function(){RendererTemplates.wms("pastures",{parameters:{opacity:70},url:CDN("http://sedac.ciesin.columbia.edu/geoserver/wms"),wms_opts:{layers:"aglands:aglands-pastures-2000",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(\"http://sedac.ciesin.columbia.edu/geoserver/wms?request=GetLegendGraphic&LAYER=aglands:aglands-pastures-2000&format=image/png\")}}/>\n      </div>\n      <div class='detail-block legend-url-text {{layer_default_id}} {{legend_classname}}'>\n        <span class='legend-text'> % cell area in pasture</span>\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/power_plants.js */
RendererTemplates.geojson_points("power_plants",{parameters:{opacity:!1,options:{power_plants_to_key:{solar:"Solar","natural gas":"Natural Gas",petroleum:"Petroleum",hydroelectric:"Hydroelectric",biomass:"Biomass",wind:"Wind",nuclear:"Nuclear",coal:"Coal","pumped storage":"Pumped Storage"}}},url:CDN(GEOSERVER+"/ny/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ny:power_plants&maxFeatures=500&outputFormat=application%2Fjson"),pointToLayer:function(e,r,o){var t;return t="./img/icons/PowerPlant_"+r.properties.primsource+".png",L.marker(o,{icon:L.icon({iconUrl:t,iconSize:[21,24],iconAnchor:[11,24],popupAnchor:[0,-22]}),title:r.properties.plant_name})},popupContents:function(e){e.properties.reason_cls;return"<strong>Name: "+e.properties.plant_name+"</strong></br>Description: "+e.properties.source_des+"<br/>Specs: "+e.properties.tech_desc+"<br/><a href='https://www.eia.gov/electricity/data/browser/#/plant/"+e.properties.plant_code+"' target='_blank_'>View in Electricity Data Browser</a><br/></br>"+Renderers.utils.zoom_to_location_link(e.geometry)},legend_template:"\n      <div class='detail-block show-confidence' style='float: left; clear: both;'>\n        {{#u.to_sorted_values_from_hash(parameters.options.power_plants_to_key)}}\n          <div style='width: 50%; float: left;'>\n            <img src={{'./img/icons/PowerPlant_' + key + '.png'}}>\n            <strong>{{value}}</strong>\n          </div>\n        {{/u.to_sorted_values_from_hash(parameters.options.power_plants_to_key)}}\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/primary_aquifers.js */
!function(){RendererTemplates.wms("primary_aquifers",{parameters:{opacity:70},url:CDN(GEOSERVER+"/wms"),wms_opts:{layers:"ny:primary_aquifers",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:primary_aquifers&format=image/png\")}}/>\n      </div>\n      <div class='detail-block legend-url-text'>\n        <span class='legend-text'> Extimated aquifer boundary </span>\n      </div>\n    ",info_template:"\n        <div class='col-xs-2'>\n          <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n        </div>\n        <div class='col-xs-10'>\n          <table class=\"table\">\n            <tr>\n              <th>Source</th>\n              <th>Shape Area</th>\n              <th>Shape Length</th>\n            </tr>\n            {{#json.features}}\n              <tr>\n                <td>{{properties.source}}</td>\n                <td>{{properties.shape_area}}</td>\n                <td>{{properties.shape_len}}</td>\n              </tr>\n            {{/json.features}}\n          </table>\n        </div>\n    ",get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:primary_aquifers&QUERY_LAYERS=ny:primary_aquifers&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")}})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_temp_gt_90.js */
RendererTemplates.ny_observed_climate_data("observed_temp_gt_90",{title:"Days > 90 &deg;F",legend:" Days above 90 &deg;F",legend_precision:1,legend_units:" days ",variable_name:"maxt_gt_90",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_temp_gt_95.js */
RendererTemplates.ny_observed_climate_data("observed_temp_gt_95",{title:"Days > 95 &deg;F",legend:" Days above 95 &deg;F",legend_precision:1,legend_units:"days",variable_name:"maxt_gt_95",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_temp_gt_100.js */
RendererTemplates.ny_observed_climate_data("observed_temp_gt_100",{title:"Days > 100 &deg;F",legend:" Days above 100 &deg;F",legend_precision:1,legend_units:" Days ",variable_name:"maxt_gt_100",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_temp_lt_0.js */
RendererTemplates.ny_observed_climate_data("observed_temp_lt_0",{title:"Days Below 0 &deg;F ",legend:" Days below 0 &deg;F",legend_precision:1,legend_reverse:!0,legend_units:"days",variable_name:"mint_lt_0",color_range:colorbrewer.Blues[6],invert_scale:!1});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_temp_lt_32.js */
RendererTemplates.ny_observed_climate_data("observed_temp_lt_32",{title:"Days Below 32 &deg;F ",legend:" Days below 32 &deg;F",legend_precision:1,legend_units:"days",variable_name:"mint_lt_32",color_range:colorbrewer.Blues[6],invert_scale:!1});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_growing_degree_days.js */
RendererTemplates.ny_observed_climate_data("observed_growing_degree_days",{title:"Growing Degree Days",legend:"Growing Degree-Days (Observed)",legend_precision:0,legend_units:"Degree-Days",variable_name:"gdd",color_range:colorbrewer.Greens[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_cooling_degree_days.js */
RendererTemplates.ny_observed_climate_data("observed_cooling_degree_days",{title:"Cooling Degree Days",legend:"Observed Cooling Degree-Days",legend_precision:0,legend_units:"Degree-Days",variable_name:"cdd",color_range:colorbrewer.Blues[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_heating_degree_days.js */
RendererTemplates.ny_observed_climate_data("observed_heating_degree_days",{title:"Heating Degree Days",legend:"Observed Heating Degree-Days",legend_precision:0,legend_units:"Degree-Days",variable_name:"hdd",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_precip_gt_1.js */
RendererTemplates.ny_observed_climate_data("observed_precip_gt_1",{title:' Precipitation &gt; 1"',legend:' Days with precipitation &gt; 1" ',legend_precision:2,legend_units:"days",variable_name:"pcpn_gt_1",color_range:colorbrewer.Purples[5]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_precip_gt_2.js */
RendererTemplates.ny_observed_climate_data("observed_precip_gt_2",{title:' Precipitation &gt; 2"',legend:' Days with precipitation &gt; 2" ',legend_precision:2,legend_units:"days",variable_name:"pcpn_gt_2",color_range:colorbrewer.Purples[5]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_precip_gt_3.js */
RendererTemplates.ny_observed_climate_data("observed_precip_gt_3",{title:' Precipitation &gt; 3"',legend:' Observed # Days with precipitation &gt; 3" ',legend_precision:4,legend_units:"days",variable_name:"pcpn_gt_3",color_range:colorbrewer.Purples[5]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_precip.js */
RendererTemplates.ny_observed_climate_data("observed_precip",{title:"Total Precipitation",legend:" Total Precipitation (inches)",legend_precision:2,legend_units:"inches",variable_name:"pcpn",color_range:colorbrewer.Blues[7]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_avg_temp.js */
RendererTemplates.ny_observed_climate_data("observed_avg_temp",{title:"Average Temperature",legend:"Observed Average Temp. (&deg;F)",legend_units:" &deg; F",legend_precision:1,variable_name:"avgt",color_range:colorbrewer.OrRd[8]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_min_temp.js */
RendererTemplates.ny_observed_climate_data("observed_min_temp",{title:"Minimum Temperature",legend:"Observed Min Temp. (&deg;F)",legend_precision:1,legend_units:" &deg;F",variable_name:"mint",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/observed_max_temp.js */
RendererTemplates.ny_observed_climate_data("observed_max_temp",{title:"Maximum Temperature",legend:"Observed Max Temp. (&deg;F)",legend_precision:1,legend_units:" &deg;F",variable_name:"maxt",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_temp_gt_90.js */
RendererTemplates.ny_projected_climate_data("projected_temp_gt_90",{title:"Days > 90&deg;F",legend:"Projected change in # days above 90&deg;F",legend_precision:1,legend_units:" Days ",variable_name:"maxt_gt_90",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_temp_gt_95.js */
RendererTemplates.ny_projected_climate_data("projected_temp_gt_95",{title:"Days > 95&deg;F",legend:"Projected change in # days above 95&deg;F",legend_precision:1,legend_units:" Days ",variable_name:"maxt_gt_95",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_temp_gt_100.js */
RendererTemplates.ny_projected_climate_data("projected_temp_gt_100",{title:"Days > 100&deg;F",legend:"Projected change in # days above 100&deg;F",legend_precision:1,legend_units:" Days ",variable_name:"maxt_gt_100",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_temp_lt_0.js */
RendererTemplates.ny_projected_climate_data("projected_temp_lt_0",{title:"Days Below 0 &deg;F ",legend:" Projected change in # days below 0 &deg;F",legend_precision:1,legend_reverse:!0,legend_units:"days",variable_name:"mint_lt_0",color_range:colorbrewer.Blues[6],invert_scale:!0});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_temp_lt_32.js */
RendererTemplates.ny_projected_climate_data("projected_temp_lt_32",{title:"Days Below 32 &deg;F ",legend:" Projected change in # days below 32 &deg;F",legend_precision:1,legend_units:"days",variable_name:"mint_lt_32",color_range:colorbrewer.Blues[6],invert_scale:!0});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_growing_degree_days.js */
RendererTemplates.ny_projected_climate_data("projected_growing_degree_days",{title:"Growing Degree Days",legend:"Projected change in Growing Degree-Days",legend_precision:0,legend_units:"Degree-Days",variable_name:"gdd",color_range:colorbrewer.Greens[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_cooling_degree_days.js */
RendererTemplates.ny_projected_climate_data("projected_cooling_degree_days",{title:"Cooling Degree Days",legend:"Projected change in Cooling Degree-Days",legend_precision:0,legend_units:"Degree-Days",variable_name:"cdd",color_range:colorbrewer.Blues[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_heating_degree_days.js */
RendererTemplates.ny_projected_climate_data("projected_heating_degree_days",{title:"Heating Degree Days",legend:"Projected change in Heating Degree-Days",legend_precision:0,legend_units:"Degree-Days",variable_name:"hdd",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_precip_gt_1.js */
RendererTemplates.ny_projected_climate_data("projected_precip_gt_1",{title:' Precipitation &gt; 1"',legend:' Projected change in # Days with precipitation &gt; 1" ',legend_precision:1,legend_units:"days",variable_name:"pcpn_gt_1",color_range:colorbrewer.Purples[5]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_precip_gt_2.js */
RendererTemplates.ny_projected_climate_data("projected_precip_gt_2",{title:' Precipitation &gt; 2"',legend:' Projected change in # Days with precipitation &gt; 2" ',legend_precision:2,legend_units:"days",variable_name:"pcpn_gt_2",color_range:colorbrewer.Purples[5]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_precip_gt_3.js */
RendererTemplates.ny_projected_climate_data("projected_precip_gt_3",{title:' Precipitation &gt; 3"',legend:' Projected change in # Days with precipitation &gt; 3" ',legend_precision:4,legend_units:"days",variable_name:"pcpn_gt_3",color_range:colorbrewer.Purples[5]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_precip.js */
RendererTemplates.ny_projected_climate_data("projected_precip",{title:"Total Precipitation",legend:" Projected change in inches of total precip.",legend_precision:2,legend_units:"Inches",variable_name:"pcpn",color_range:colorbrewer.Blues[7]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_avg_temp.js */
RendererTemplates.ny_projected_climate_data("projected_avg_temp",{title:"Average Temperature",legend:"Projected change in Average Temp. (&deg;F)",legend_units:" &deg;F",legend_precision:1,variable_name:"avgt",color_range:colorbrewer.OrRd[8]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_min_temp.js */
RendererTemplates.ny_projected_climate_data("projected_min_temp",{title:"Minimum Temperature",legend:"Projected change in minimum temperature (&deg;F)",legend_precision:1,legend_units:" &deg;F",variable_name:"mint",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/projected_max_temp.js */
RendererTemplates.ny_projected_climate_data("projected_max_temp",{title:"Maximum Temperature",legend:"Projected change in maximum temperature (&deg;F)",legend_precision:1,legend_units:" &deg;F",variable_name:"maxt",color_range:colorbrewer.OrRd[6]});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/public_environmental_justice_areas.js */
!function(){RendererTemplates.wms("public_environmental_justice_areas",{parameters:{opacity:70,legend_url:CDN(GEOSERVER+"/wms?request=GetLegendGraphic&LAYER=ny:peja&format=image/png")},url:CDN(GEOSERVER+"/wms"),wms_opts:{layers:"ny:peja",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{legend_url}}/>\n      </div>\n    ",get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:peja&QUERY_LAYERS=ny:peja&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},info_template:"\n    <div class='row'>\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\">\n          <tr>\n            <th>County</th>\n            <th>GID</th>\n            <th>Name</th>\n          </tr>\n          {{#json.features}}\n            <tr>\n              <td>{{properties.county}}</td>\n              <td>{{properties.gid}}</td>\n              <td>{{properties.name}}</td>\n            </tr>\n          {{/json.features}}\n        </table>\n      </div>\n    </div>\n  "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/railroad_junctions.js */
!function(){var n=GEOSERVER+"/ny/ows";RendererTemplates.geojson_points("railroad_junctions",{parameters:{opacity:!1,no_sorting:!0},url:CDN(URI(n).query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:rail_junctions",maxFeatures:500,outputFormat:"application/json"}).toString()),clustering:{spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:40,disableClusteringAtZoom:10,iconCreateFunction:function(n,o){return new L.DivIcon({pane:o,html:n.getChildCount(),className:"railroadJunctionCluster",iconSize:new L.Point(35,35)})}},pointToLayer:function(n,o,e,i){return L.marker(e,{pane:i,icon:L.icon({iconAnchor:[12,28],iconSize:[21,24],iconUrl:"./img/icons/railroad_junction.png",opacity:0,popupAnchor:[0,-25]}),title:o.properties.name})},popupContents:function(n){return"\n          <strong>"+n.properties.name+"</strong>\n          <br/>\n          "+Renderers.utils.zoom_to_location_link(n.geometry)+"\n      "},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n        <img src=\"./img/icons/railroad_junction.png\"/> Railroad Junctions\n      </div>\n      <div class='detail-block legend-url-text'>\n        <span class='legend-text'>\n          Click map icons for more info\n        </span>\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/railroad_passenger_stations.js */
!function(){var n=GEOSERVER+"/ny/ows";RendererTemplates.geojson_points("railroad_passenger_stations",{parameters:{opacity:!1,no_sorting:!0},url:CDN(URI(n).query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:rail_passenger_stations",maxFeatures:500,outputFormat:"application/json"}).toString()),clustering:{spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:40,disableClusteringAtZoom:10,iconCreateFunction:function(n,e){return new L.DivIcon({pane:e,html:n.getChildCount(),className:"railPassengerStationCluster",iconSize:new L.Point(35,35)})}},pointToLayer:function(n,e,o,r){return L.marker(o,{pane:r,icon:L.icon({iconAnchor:[12,28],iconSize:[21,24],iconUrl:"./img/icons/rail_passenger_station.png",opacity:0,popupAnchor:[0,-25]}),title:e.properties.name})},popupContents:function(n){return"\n          <strong>"+n.properties.name+" Station</strong>\n          <br/>\n          Use:"+n.properties.use+"\n          <br/>\n          Operator:"+n.properties.operator+"\n          <br/>\n          Line:"+n.properties.line_name+"\n          <br/>\n          "+Renderers.utils.zoom_to_location_link(n.geometry)+"\n      "},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n        <img src=\"./img/icons/rail_passenger_station.png\"/> Railroad Junctions\n      </div>\n      <div class='detail-block legend-url-text'>\n        <span class='legend-text'>\n          Click map icons for more info\n        </span>\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/railroads.js */
RendererTemplates.wms("railroads",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"ny:railroad",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:railroad&QUERY_LAYERS=ny:railroad&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:railroad&format=image/png\")}}>\n      </div>\n  ",info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      <table class=\"table\">\n        <tr>\n          <th>Line Name</th>\n          <th>Track Name</th>\n          <th>Owner</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.line_name}}</td>\n            <td>{{properties.trk_name}}</td>\n            <td>{{properties.owner_name}}</td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/rare_plants_and_animals.js */
!function(){var e=null,a=function(a){e?a(null,e):$.ajax({url:CDN("https://services2.coastalresilience.org/arcgis/rest/services/Natural_Resource_Navigator/Natural_Resource_Navigator/MapServer/legend"),data:{f:"pjson"},dataType:"jsonp",success:function(t){e=t,a(null,t)},error:function(e){200!==e.status&&a(e,[])}})},t={All:{Future:18,Current:28,Change:38},Animals:{Future:19,Current:29,Change:39},Plants:{Future:20,Current:30,Change:40},Invertebrates:{Future:22,Current:32,Change:42},Vertebrates:{Future:21,Current:31,Change:41},Birds:{Future:23,Current:33,Change:43},"Aerial Insects":{Future:24,Current:34,Change:44},"Federally Listed":{Future:25,Current:35,Change:45},"NY State Listed":{Future:26,Current:36,Change:46}},r=function(e){return t[e.parameters.species_group][e.parameters.time]};RendererTemplates.esri("rare_plants_and_animals",{esri_opts:function(e){return{url:CDN("https://services2.coastalresilience.org/arcgis/rest/services/Natural_Resource_Navigator/Natural_Resource_Navigator_Species/MapServer"),layers:[r(e)],f:"image",format:"png32",transparent:!0,dpi:96,clickable:!1,attribution:"NYS DEC"}},on_layer_create:function(e){a(function(a,t){var s=r(e),n=_.find(t.layers,{layerId:s}),l=_.cloneDeep(n);l&&l.legend.push({contentType:"image/gif",imageData:"R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=",label:"None"}),e.parameters.legend_data=l,Views.ControlPanel.fire("tile-layer-loaded",e)})},parameters:{opacity:70,time:"Current",species_group:"All",options:{species_groups:t,species_names:_.keys(t)}},get_feature_info_url:function(e,a){return CDN("https://services2.coastalresilience.org/arcgis/rest/services/Natural_Resource_Navigator/Natural_Resource_Navigator_Species/MapServer/identify")+'?f=json&tolerance=5&returnGeometry=true&imageDisplay=<%=width%>%2C<%=height%>%2C96&maxAllowableOffset=150&geometry={"x": <%= lng %>,"y": <%=lat%>}&geometryType=esriGeometryPoint&sr=4326&mapExtent=<%=xmin%>,<%=ymin%>,<%=xmax%>,<%=ymax%>&layers=visible%3A'+r(e)},info_template:'\n        <div class=\'col-xs-2\'>\n          <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n        </div>\n        <div class=\'col-xs-10\'>\n          <table class="table">\n            <tr>\n              <th>Layer Name</th>\n              <th>Stretched value</th>\n              <th>Pixel Value</th>\n              <th>Count</th>\n            </tr>\n            {{#json.results}}\n              <tr>\n                <td>{{layerName}}</td>\n                <td>{{attributes["Stretched value"]}}</td>\n                <td>{{attributes["Pixel Value"]}}</td>\n                <td>{{attributes["Count"]}}</td>\n              </tr>\n            {{/json.features}}\n          </table>\n        </div>\n      ',legend_template:"\n        <div class='detail-block show-confidence plants-and-animals'>\n          <label> Species: </label>\n          <select value='{{parameters.species_group}}'>\n          {{#parameters.options.species_names}}\n            <option value='{{.}}'> {{.}} </option>\n          {{/parameters.options.species_names}}\n          </select>\n        </div>\n        <div class='detail-block show-confidence plants-and-animals'>\n          <label> Timeframe: </label>\n          <select value='{{parameters.time}}'>\n            {{#u.to_sorted_keys_from_hash(parameters.options.species_groups[parameters.species_group])}}\n              <option value='{{key}}'>{{key}}</option>\n            {{/u.to_sorted_keys_from_hash(parameters.options.species_groups[parameters.species_group])}}\n          </select>\n        </div>\n        {{#if parameters.legend_data}}\n          <div class='detail-block show-confidence plants-and-animals esri-legend'>\n              <div class='detail-block legend-block' >\n                <img src=\"img/legends/rare_species.jpg\">\n                <span> {{label}} &nbsp; </span>\n              </div>\n          </div>\n          <div class='detail-block legend-url-text {{layer_default_id}} {{legend_classname}}'>\n            <span class='legend-text'>\n              Species richness based on habitat suitability models\n            </span>\n          </div>\n        {{/if parameters.legend_data}}\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/regulated_wells.js */
!function(){var e=CDN(GEOSERVER+"/wms");RendererTemplates.wms("regulated_wells",{parameters:{opacity:90,layers:"ny:wellspublic"},url:e,wms_opts:function(e){return{layers:e.parameters.layers,format:"image/png",opacity:0,zIndex:-1,transparent:!0,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS="+e.parameters.layers+"&QUERY_LAYERS="+e.parameters.layers+"&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:wellspublic&format=image/png\")}}/>\n      </div>\n    ",info_template:"\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\">\n          <tr>\n            <th>Name</th>\n            <th>Company</th>\n            <th>Well Type</th>\n            <th>Link</th>\n          </tr>\n          {{#json.features}}\n            <tr>\n              <td>{{properties.name}}</td>\n              <td>{{properties.company}}</td>\n              <td>{{properties.well_type}}</td>\n              <td><a target='_blank'\n                href=\"{{properties.link}}\">Online Report</a></td>\n            </tr>\n          {{/json.features}}\n        </table>\n      </div>\n\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/remediation_sites.js */
RendererTemplates.wms("remediation_sites",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"ny:remediation_site_borders",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:remediation_site_borders&QUERY_LAYERS=ny:remediation_site_borders&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n    <div class='detail-block show-confidence'>\n      <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:remediation_site_borders&format=image/png\")}}>\n    </div>\n    <div class='detail-block legend-url-text'>\n      <span class='legend-text'> Remediation site boundary (click for info) </span>\n    </div>\n  ",info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      <table class=\"table\">\n        <tr>\n          <th>Name</th>\n          <th>Program</th>\n          <th>Site Code</th>\n          <th>Address</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.name}}</td>\n            <td>{{properties.program}}</td>\n            <td>{{properties.sitecode}}</td>\n            <td>{{properties.address}}</td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/sandy_surge.js */
RendererTemplates.wms("sandy_surge",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"ny:sandy_surge",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:sandy_surge&QUERY_LAYERS=ny:sandy_surge&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:sandy_surge&format=image/png\")}}>Sandy Surge Extent\n      </div>\n  ",info_template:"\n      <div class='col-xs-2'>\n        <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n      </div>\n      <div class='col-xs-10'>\n        <table class=\"table\">\n          <tr>\n            <th>Status</th>\n            <th>Source</th>\n            <th>Verified</th>\n          </tr>\n          {{#json.features}}\n            <tr>\n              <td>{{properties.status}}</td>\n              <td>{{properties.sourcedata}}</td>\n              <td>{{properties.verified}}</td>\n            </tr>\n          {{/json.features}}\n        </table>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/sewer_overflows.js */
RendererTemplates.geojson_points("sewer_overflows",{parameters:{opacity:!1,no_sorting:!0},clustering:{spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,disableClusteringAtZoom:11,removeOutsideVisibleBounds:!0,iconCreateFunction:function(e,n){return new L.DivIcon({pane:n,html:e.getChildCount(),className:"sewer_overflowsCluster",iconSize:new L.Point(50,48)})}},url:CDN("https://api.nescaum-ccsc-dataservices.com/ny.sewer_overflows.geojson"),selectData:function(e,n){return e.parameters.total_shown=n.length,n},pointToLayer:function(e,n,r,o){return L.marker(r,{pane:o,icon:L.icon({iconUrl:"./img/icons/sewer-overflows.png",iconSize:[18,21],iconAnchor:[12,28],opacity:0,popupAnchor:[0,-25]}),title:n.properties.name})},popupContents:function(e){var n="";return e.properties.link_to_real_time_information&&(n='<a target="_blank" href="'+e.properties.link_to_real_time_information+'">\n            <strong>Link to real-time information</strong>\n          </a>'),"\n        <strong>Facility:</strong>\n          "+e.properties.facility_name+" <br/>\n        <strong>Owner: </strong>\n          "+e.properties.facility_owner_name+" <br/>\n        <strong># Of Overflow Events: </strong>\n          "+e.properties.number_of_overflow_events+" <br/>\n        <strong># Of Permitted Outfalls: </strong>\n          "+e.properties.number_of_permitted_outfalls+" <br/>\n        <strong>Outfall #: </strong>\n          "+e.properties.outfall_number+"\n          <br/>\n        <strong>Receiving Waterbody:</strong>\n          "+e.properties.receiving_waterbody_name+"\n          <br/>\n        <strong>Permit #: </strong>\n          "+e.properties.spdes_permit_number+"\n          <br/>\n        "+n+"\n        <br>"+Renderers.utils.zoom_to_location_link(e.geometry)},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n      </div>\n      <div class='detail-block clusterlegend'>\n        <img src=\"./img/icons/sewer-overflows.png\"/>\n        <br/>\n        <span class='legend-text'>\n          <strong>&nbsp;{{parameters.total_shown}}</strong>&nbsp;&nbsp;&nbsp; Number of sewer overflows shown\n        </span>\n      </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/ecological_land_units.js */
!function(){var e=CDN("https://rmgsc.cr.usgs.gov/arcgis/rest/services/contUS/MapServer/"),a=(CDN("https://rmgsc.cr.usgs.gov/arcgis/rest/services/contUS/MapServer/legend?f=json"),{Ecosystems:0,Bioclimates:1,"Land Surface Forms":2,"Surficial Lithology":3,"Topographic Position":4}),s=null,n=function(a,n){s?n(null,s):$.ajax({url:CDN(e+"/legend"),data:{f:"pjson"},dataType:"jsonp",success:function(e){n(null,s=e)},error:function(e){200!==e.status&&(n(e,[]),Views.ControlPanel.fire("tile-layer-loading-error",a))}})};RendererTemplates.esri("ecological_land_units",{parameters:{opacity:70,soils_name:"Ecosystems",legend_data:[],options:{soils_options:a,eco_desc:Renderers.Constants.soils_eco_desc}},url:e,esri_opts:function(a){var s=a.parameters.options.soils_options[a.parameters.soils_name];return{url:CDN(e),layers:[s],f:"image",format:"png8",transparent:!0,dpi:96,clickable:!1,attribution:"USGS Land Change Science Program Global Ecosystems"}},onrender:function(e){n(e,function(a,s){var n=e.parameters.options.soils_options[e.parameters.soils_name],t=_.find(s.layers,{layerId:n});e.parameters.legend_data=t.legend,Views.ControlPanel.fire("update-layers-parameters",e)})},get_feature_info_url:function(a,s){var n=a.parameters.options.soils_options[a.parameters.soils_name];return CDN(e+"/identify")+'?f=json&tolerance=1&returnGeometry=true&imageDisplay=<%=width%>%2C<%=height%>%2C96&maxAllowableOffset=150&geometry={"x": <%= lng %>,"y": <%=lat%>}&geometryType=esriGeometryPoint&sr=4326&mapExtent=<%=xmin%>,<%=ymin%>,<%=xmax%>,<%=ymax%>&layers=visible%3A'+n},legend_template:"\n        <div class='detail-block show-confidence'>\n          <label> Layer: </label>\n          <select value='{{parameters.soils_name}}'>\n          {{#parameters.options.soils_options:name}}\n            <option value='{{name}}'> {{name}} </option>\n          {{/parameters.options.soils_options:name}}\n          </select>\n        </div>\n        <div class='detail-block sovi'>\n          {{#parameters.legend_data}}\n            {{#if parameters.options.eco_desc[label]}}\n              <div class=''>\n                <img src=\"data:{{contentType}};base64,{{imageData}}\" class='cube'/>\n                <span>{{parameters.options.eco_desc[label]}}</span>\n              </div>\n            {{ else }}\n              <div class=''>\n                <img src=\"data:{{contentType}};base64,{{imageData}}\" class='cube'/>\n                <span>{{label}}</span>\n              </div>\n            {{/if parameters.options.eco_desc[label]}}\n          {{/legend_data}}\n        </div>\n    ",info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      <table class=\"table\">\n        <tr>\n          <th>Legend Color</th>\n          <th>Name</th>\n        </tr>\n        {{#json.results}}\n          <tr>\n            <td>\n              {{#active_layer.parameters.legend_data}}\n                {{#if attributes['code_desc'] == label}}\n                    <img src=\"data:{{contentType}};base64,{{imageData}}\" class='cube'/>\n                {{/if attributes['code_desc'] == label}}\n              {{/active_layer.parameters.legend_data}}\n            </td>\n            <td>{{attributes[\"code_desc\"]}}</td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/sovi.js */
RendererTemplates.wms("sovi",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(t){return{layers:"ny:svi2018_newyork_tract",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(t){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:svi2018_newyork_tract&QUERY_LAYERS=ny:svi2018_newyork_tract&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:"\n      <div class='detail-block show-confidence'>\n        <img src={{CDN(GEOSERVER + \"/wms?request=GetLegendGraphic&LAYER=ny:svi2018_newyork_tract&format=image/png\")}}>\n      </div>\n  ",info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      <table class=\"table\">\n        <tr>\n          <th>Tract</th>\n          <th>SOVI Rank</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.location}}</td>\n            <td>{{properties.rpl_themes}}</td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/spdes.js */
!function(){var e=CDN(GEOSERVER+"/ny/ows");RendererTemplates.geojson_points("spdes",{parameters:{opacity:!1,no_sorting:!0},url:CDN(URI(e).query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:spdes",maxFeatures:1e4,outputFormat:"application/json"}).toString()),selectData:function(e,n){return e.parameters.total_shown=n.length,n},clustering:{spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,disableClusteringAtZoom:11,removeOutsideVisibleBounds:!0,iconCreateFunction:function(e,n){return new L.DivIcon({pane:n,html:e.getChildCount(),className:"spdesCluster",iconSize:new L.Point(35,35)})}},pointToLayer:function(e,n,t,o){return L.marker(t,{pane:o,icon:L.icon({iconUrl:"./img/icons/spdes.png",iconSize:[16,18],iconAnchor:[12,28],opacity:0,popupAnchor:[0,-25]}),title:n.properties.name})},popupContents:function(e){return content="\n          <strong>"+e.properties.name+"</strong>\n          <br/>\n          Owner: "+e.properties.owner+"\n          <br/>\n          Discharge (per second): "+e.properties.dischargec+"\n          <br/>\n          SPDES id: "+e.properties.spdesnum+"\n          <br/>\n          "+Renderers.utils.zoom_to_location_link(e.geometry)+"\n      ",content},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n      </div>\n      <div class='detail-block clusterlegend'>\n        <img src=\"./img/icons/spdes.png\"/>\n        <br/>\n        <span class='legend-text'>\n          <strong>&nbsp;{{parameters.total_shown}}</strong>&nbsp;&nbsp;&nbsp; Number of water treatment facilities shown\n        </span>\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/subway_lines.js */
RendererTemplates.wms("subway_lines",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(e){return{layers:"ny:subway_lines",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(e){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:subway_lines&QUERY_LAYERS=ny:subway_lines&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:'\n      <div class=\'detail-block\'>\n        <label>Legend</label>\n        <br/>\n        <img src="{{CDN(GEOSERVER + "/wms?request=GetLegendGraphic&LAYER=ny:subway_lines&format=image/png")}}"/>\n      </div>\n  ',info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      <table class=\"table\">\n        <tr>\n          <th>Line Name</th>\n          <th>Track Name</th>\n          <th>Owner</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.line_name}}</td>\n            <td>{{properties.trk_name}}</td>\n            <td>{{properties.owner_name}}</td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/superfund.js */
RendererTemplates.wms("superfund",{parameters:{opacity:70,year_indx:2,options:{years:["1800","1900","2000"]}},wms_opts:function(e){e.parameters.options.years[e.parameters.year_indx];return{layers:"superfund:superfund-atsdr-hazardous-waste-site-ciesin-mod-v2",format:"image/png",opacity:0,zIndex:-1,transparent:!0}},url:CDN("http://sedac.ciesin.columbia.edu/geoserver/wms"),legend_template:"\n    <div class='detail-block'>\n      <label> Legend: </label>\n      <img src='{{CDN(\"http://sedac.ciesin.columbia.edu/geoserver/wms?request=GetLegendGraphic&LAYER=superfund:superfund-atsdr-hazardous-waste-site-ciesin-mod-v2&format=image/png\")}}'>\n    </div>\n  ",info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      {{#json.features}}\n        <div>\n          {{properties.site_name}}<br/> <a target=\"_blank\" href=\"{{properties.SITE_PROFI}}\"> Additional EPA Site Information </a>\n        </div>\n      {{/json.features}}\n    </div>\n  ",get_feature_info_url:function(e){e.parameters.options.years[e.parameters.year_indx];return CDN("http://sedac.ciesin.columbia.edu/geoserver/wms")+"?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=superfund:superfund-atsdr-hazardous-waste-site-ciesin-mod-v2&QUERY_LAYERS=superfund:superfund-atsdr-hazardous-waste-site-ciesin-mod-v2&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>"}});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/thruway_bridges.js */
!function(){var e=GEOSERVER+"/ny/ows";RendererTemplates.geojson_points("thruway_bridges",{parameters:{opacity:!1,no_sorting:!0},url:CDN(URI(e).query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:thruway_bridges",maxFeatures:500,outputFormat:"application/json"}).toString()),clustering:{spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:40,disableClusteringAtZoom:16,iconCreateFunction:function(e,n){return new L.DivIcon({pane:n,html:e.getChildCount(),className:"thruway_bridgeCluster",iconSize:new L.Point(50,50)})}},pointToLayer:function(e,n,r,o){return L.marker(r,{pane:o,icon:L.icon({iconAnchor:[15,15],iconSize:[30,30],iconUrl:"./img/icons/thruway_bridge.png",opacity:0,popupAnchor:[0,-15]}),title:n.properties.name})},popupContents:function(e){return"\n          <strong>Thruway Bridge: "+e.properties.bridge_loc+"</strong>\n          <br/>\n          Owner: "+e.properties.primary_ow+"\n          <br/>\n          Feature Carried: "+e.properties.feature_ca+"\n          <br/>\n          Feature Crossed: "+e.properties.feature_cr+"\n          <br/>\n          "+Renderers.utils.zoom_to_location_link(e.geometry)+"\n      "},legend_template:"\n      <div class='detail-block'>\n        <label>Legend</label>\n        <img src=\"./img/icons/thruway_bridge.png\" width=\"50px;\"/> Thruway Bridge\n      </div>\n      <div class='detail-block legend-url-text'>\n        <span class='legend-text'>\n          Click map icons for more info\n        </span>\n      </div>\n    "})}();
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/tree_atlas.js */
RendererTemplates.esri("tree_atlas",{parameters:{opacity:70,species:5,scenario:0,options:{species:{4:"Red Maple",5:"Sugar Maple",7:"Yellow Birch",10:"Pignut Hickory",14:"American Beech",15:"White Ash",28:"Red Spruce",35:"Eastern White Pine",40:"Quaking Aspen",41:"Black Cherry",42:"White Oak",49:"Northern Red Oak",55:"Eastern Hemlock"},scenarios:{0:"Current",56:"Low",112:"High"}}},legend_template:"\n    <div class='detail-block show-confidence'>\n      <label decorator='tooltip:Choose a tree species'> Species: </label>\n\n      <select value='{{parameters.species}}'>\n        {{#u.to_sorted_values_from_hash(parameters.options.species)}}\n          <option value='{{key}}'>{{value}}</option>\n        {{/u.to_sorted_values_from_hash(parameters.options.species)}}\n      </select>\n    </div>\n    <div class='detail-block show-confidence'>\n      <label decorator='tooltip:Choose a tree species'> Scenario: </label>\n      <select value='{{parameters.scenario}}'>\n        {{#u.to_sorted_values_from_hash(parameters.options.scenarios)}}\n          <option value='{{key}}'>{{value}}</option>\n        {{/u.to_sorted_values_from_hash(parameters.options.scenarios)}}\n      </select>\n    </div>\n\n    <div class='detail-block legend tree_atlas '>\n      <label> Legend </label>\n      <img  src=\"img/legends/tree_atlas.jpg\"> Species Importance Value\n    </div>\n  ",clone_layer_name:function(e){var s=e.parameters,a=s.options.scenarios[s.scenario],r=s.options.species[s.species];return e.name+" "+r+" : "+a},esri_opts:function(e){var s=e.parameters.scenario,a=e.parameters.species;return{layers:[Number(s)+Number(a)],url:CDN("http://wassimap.sgcp.ncsu.edu:8399/arcgis/rest/services/taccimo/treeatlas_high/MapServer"),attribution:"USFS",f:"image",clickable:!1}}});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/trout_streams.js */
RendererTemplates.wms("trout_streams",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(t){return{layers:"ny:trout_streams",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(t){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:trout_streams&QUERY_LAYERS=ny:trout_streams&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:'\n      <div class=\'detail-block\'>\n        <label>Legend</label>\n        <img src="{{CDN(GEOSERVER + "/wms?request=GetLegendGraphic&LAYER=ny:trout_streams&format=image/png")}}"/> Suitable Trout Waters\n      </div>\n  ',info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      <table class=\"table\">\n        <tr>\n          <th>ID</th>\n          <th>Classification</th>\n          <th>Standard</th>\n          <th>Protected</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.partitem}}</td>\n            <td>{{properties.classifica}}</td>\n            <td>{{properties.standard}}</td>\n            <td>{{properties.protected}}</td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/usgs_streamflow.js */
RendererTemplates.geojson_points("usgs_streamflow",{parameters:{opacity:!1,no_sorting:!0},url:CDN(URI("https://geoserver.nescaum-ccsc-dataservices.com/geoserver/ny/ows").query({service:"WFS",version:"1.0.0",request:"GetFeature",typeName:"ny:usgs_streamflow_geoserver",outputFormat:"application/json"}).toString()),pointToLayer:function(e,r,t,i){var s="#FF0000";return s="1"===r.properties.class?"#FF0000":"2"===r.properties.class?"#B12121":"3"===r.properties.class?"#B12121":"4"===r.properties.class?"#FFA400":"5"===r.properties.class?"#00FF00":"6"===r.properties.class?"#40DFD0":"7"===r.properties.class?"#0000FF":"8"===r.properties.class?"#000":"#000000",L.circleMarker(t,{pane:i,riseOnHover:!0,radius:4,fillColor:s,fillOpacity:.8,color:"black",weight:1,opacity:1,title:r.properties.name})},popupContents:function(e){return"\n      <strong>"+e.properties.name+"</strong>\n      <br>\n      Date: "+e.properties.date+"\n      <br>\n      Time: "+e.properties.time+"\n      <br>\n      Flow: "+e.properties.flow+" "+e.properties.flow_unit+"\n      <br>\n      Flow Class: "+e.properties.class+"\n      <br>\n      Percentile: "+e.properties.percentile+"\n      <br>\n       <a href='"+e.properties.url+"' target='_blank_'>More info</a><br>"+Renderers.utils.zoom_to_location_link(e.geometry)},legend_template:'\n      <div class=\'detail-block\'>\n        <label>Legend</label>\n        <div>\n          <svg height="10" width="10">\n            <circle cx="5" cy="5" r="4" stroke="black" stroke-width="1" fill="#FF0000" />\n          </svg>  New minimum <br>\n          <svg height="10" width="10">\n            <circle cx="5" cy="5" r="4" stroke="black" stroke-width="1" fill="#B12121" />\n          </svg> gt old minimum and lt 5th percentile\n          <br>\n          <svg height="10" width="10">\n            <circle cx="5" cy="5" r="4" stroke="black" stroke-width="1" fill="#B12121" />\n          </svg> 5th - 10th percentile <br>\n          <svg height="10" width="10">\n            <circle cx="5" cy="5" r="4" stroke="black" stroke-width="1" fill="#FFA400" />\n          </svg> 10th - 25th percentile <br>\n          <svg height="10" width="10">\n            <circle cx="5" cy="5" r="4" stroke="black" stroke-width="1" fill="#00FF00" />\n          </svg> 25th - 75th percentile <br>\n          <svg height="10" width="10">\n            <circle cx="5" cy="5" r="4" stroke="black" stroke-width="1" fill="#40DFD0" />\n          </svg> 75th - 90th percentile <br>\n          <svg height="10" width="10">\n            <circle cx="5" cy="5" r="4" stroke="black" stroke-width="1" fill="#0000FF" />\n          </svg> gt 90th percentile and lt old maximum <br>\n          <svg height="10" width="10">\n            <circle cx="5" cy="5" r="4" stroke="black" stroke-width="1" fill="#000" />\n          </svg> New Maximum <br>\n        </div>\n      </div>\n  '});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/wtrcls_line.js */
RendererTemplates.wms("wtrcls_line",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(t){return{layers:"ny:wtrcls_line",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(t){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:wtrcls_line&QUERY_LAYERS=ny:wtrcls_line&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:'\n      <div class=\'detail-block\'>\n        <label>Legend</label>\n        <img src="{{CDN(GEOSERVER + "/wms?request=GetLegendGraphic&LAYER=ny:wtrcls_line&format=image/png")}}"/> Suitable Trout Waters\n      </div>\n  ',info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      <table class=\"table\">\n        <tr>\n          <th>ID</th>\n          <th>Classification</th>\n          <th>Standard</th>\n          <th>Protected</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.partitem}}</td>\n            <td>{{properties.classifica}}</td>\n            <td>{{properties.standard}}</td>\n            <td>{{properties.protected}}</td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/renderers/wtrcls_poly.js */
RendererTemplates.wms("wtrcls_poly",{parameters:{opacity:100},url:CDN(GEOSERVER+"/wms"),wms_opts:function(t){return{layers:"ny:wtrcls_poly",format:"image/png",opacity:0,zIndex:-1,crs:L.CRS.EPSG4326,srs:L.CRS.EPSG4326,transparent:!0}},get_feature_info_url:function(t){return CDN(GEOSERVER+"/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetFeatureInfo&LAYERS=ny:wtrcls_poly&QUERY_LAYERS=ny:wtrcls_poly&STYLES=&BBOX=<%= bbox %>&FEATURE_COUNT=5&HEIGHT=<%= height %>&WIDTH=<%= width %>&FORMAT=text%2Fhtml&INFO_FORMAT=application%2Fjson&SRS=EPSG%3A4326&X=<%= x %>&Y=<%= y %>")},legend_template:'\n      <div class=\'detail-block\'>\n        <label>Legend</label>\n        <img src="{{CDN(GEOSERVER + "/wms?request=GetLegendGraphic&LAYER=ny:wtrcls_poly&format=image/png")}}"/> Suitable Trout Waters\n      </div>\n  ',info_template:"\n    <div class='col-xs-2'>\n      <label> {{u.layer_defaults(active_layer.layer_default_id).name}} </label>\n    </div>\n    <div class='col-xs-10'>\n      <table class=\"table\">\n        <tr>\n          <th>ID</th>\n          <th>Classification</th>\n          <th>Standard</th>\n          <th>Protected</th>\n        </tr>\n        {{#json.features}}\n          <tr>\n            <td>{{properties.partitem}}</td>\n            <td>{{properties.classifica}}</td>\n            <td>{{properties.standard}}</td>\n            <td>{{properties.protected}}</td>\n          </tr>\n        {{/json.features}}\n      </table>\n    </div>\n  "});
</script>
    <script> /* /home/parenthysis/working/ny-ccc-map/src/js/init.js */
var all_layer_ids=_.pluck(available_layers,"id"),parameters=API_Handler.get_parameters(window.location.search.substr(1),all_layer_ids);Views.ControlPanel.set({base_layers:BaseLayers}),Views.ControlPanel.set("layers.defaults",available_layers),Views.ControlPanel.set({parameters:parameters});var params=URI.parseQuery(window.location.search);if(params.map_state_token&&Controllers.Sharing.load_state(params.map_state_token,Views.ControlPanel,LeafletMap),params.sectors&&Views.ControlPanel.set("sectors.selected",params.sectors.split(",")),"true"!==document.cookie.replace(/(?:(?:^|.*;\s*)show_welcome_modal_to_new_users\s*\=\s*([^;]*).*$)|^.*$/,"$1")&&(Views.ControlPanel.fire("show-wizard"),document.cookie="show_welcome_modal_to_new_users=true; expires=Fri, 31 Dec 9999 23:59:59 GMT"),desired_active_on_load.length>0){var already_active_layers=_.pluck(Views.ControlPanel.get("layers.active"),"layer_default_id");Controllers.Layers.force_layers_active(Views.ControlPanel,already_active_layers.concat(desired_active_layer_ids))}
</script>
</body>
</html>
